<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Muhouer</title>
  
  <subtitle>å°±æ˜¯åšä¸ªè®°å½•ï¼Œå…ˆæ¥5åˆ†é’Ÿçš„ï¼</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://muhouer.github.io/"/>
  <updated>2019-08-20T16:52:25.353Z</updated>
  <id>https://muhouer.github.io/</id>
  
  <author>
    <name>Muhouer</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>æšä¸¾ç±»å‹</title>
    <link href="https://muhouer.github.io/posts/4502a76f/"/>
    <id>https://muhouer.github.io/posts/4502a76f/</id>
    <published>2019-08-20T16:44:00.000Z</published>
    <updated>2019-08-20T16:52:25.353Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h2><p>æšä¸¾ç±»å‹ï¼ˆ<code>enum type</code>ï¼‰æ˜¯æŒ‡ç”±ä¸€ç»„å›ºå®šçš„å¸¸é‡ç»„æˆåˆæ³•çš„ç±»å‹ã€‚<code>Java</code> ä¸­ç”±å…³é”®å­— <code>enum</code> æ¥å®šä¹‰ä¸€ä¸ªæšä¸¾ç±»å‹ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> Season &#123;</span><br><span class="line">    SPRING, SUMMER, AUTUMN, WINER;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¯­å¥å®šä¹‰ï¼š</p><ol><li>ä½¿ç”¨å…³é”®å­— <code>enum</code></li><li>ç±»å‹åç§°ï¼Œæ¯”å¦‚è¿™é‡Œçš„<code>Season</code></li><li>æšä¸¾ä¸­çš„å±æ€§å¿…é¡»æ”¾åœ¨æœ€å‰é¢ï¼Œä¸€èˆ¬ä½¿ç”¨å¤§å†™å­—æ¯è¡¨ç¤º</li><li>æšä¸¾å¯ä»¥å•ç‹¬å®šä¹‰åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œä¹Ÿå¯ä»¥åµŒåœ¨å…¶å®ƒ<code>Java</code>ç±»ä¸­</li><li>æšä¸¾å¯ä»¥å®ç°ä¸€ä¸ªæˆ–å¤šä¸ªæ¥å£ï¼ˆInterfaceï¼‰</li><li>å¯ä»¥å’Œ java ç±»ä¸€æ ·å®šä¹‰æ–¹æ³• ï¼Œæšä¸¾ä¸­çš„æ„é€ æ–¹æ³•å¿…é¡»æ˜¯ç§æœ‰çš„ã€‚</li></ol><h2 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h2><p>ä½¿ç”¨ <code>javap</code> è¿›è¡Œåç¼–è¯‘å¯ä»¥çœ‹åˆ° <code>public final class Season extends Enum</code>ï¼Œä¹Ÿå°±æ˜¯è¯´å½“æˆ‘ä»¬ä½¿ç”¨ <code>enum</code> æ¥å®šä¹‰ä¸€ä¸ªæšä¸¾ç±»å‹çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª <code>final</code> ç±»å‹ä¸”ç»§æ‰¿è‡ª <code>Enum</code> çš„ç±»ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">Season</span> <span class="keyword">extends</span> <span class="title">java</span>.<span class="title">lang</span>.<span class="title">Enum</span>&lt;<span class="title">Season</span>&gt; </span>&#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> com.muhouer.algorithm.Season SPRING;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> com.muhouer.algorithm.Season SUMMER;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> com.muhouer.algorithm.Season AUTUMN;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> com.muhouer.algorithm.Season WINER;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> com.muhouer.algorithm.Season[] values();</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> com.muhouer.algorithm.<span class="function">Season <span class="title">valueOf</span><span class="params">(java.lang.String)</span></span>;</span><br><span class="line">  <span class="keyword">static</span> &#123;&#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä¸€äº›ç‰¹æ®Šæ–¹æ³•"><a href="#ä¸€äº›ç‰¹æ®Šæ–¹æ³•" class="headerlink" title="ä¸€äº›ç‰¹æ®Šæ–¹æ³•"></a>ä¸€äº›ç‰¹æ®Šæ–¹æ³•</h2><ol><li><p>Java æšä¸¾å€¼æ¯”è¾ƒç”¨ <code>==</code> å’Œ <code>equals()</code> æ–¹æ³•æ•ˆæœæ˜¯ä¸€æ ·çš„ã€‚å› ä¸ºæšä¸¾ Enum ç±»çš„ <code>equals()</code> æ–¹æ³•çš„å®ç°å°±æ˜¯ä½¿ç”¨ <code>==</code> ï¼›</p></li><li><p>Enum çš„ <code>compareTo()</code>æ–¹æ³•å®é™…ä¸Šæ¯”è¾ƒçš„æ˜¯ Enum çš„ ordinal é¡ºåºå¤§å°ï¼›</p></li><li><p>Enum åœ¨ <code>switch</code> ä¸­æ¯”è¾ƒçš„æ˜¯ Enum çš„ ordinal å€¼ï¼›</p></li><li><p>Enum çš„ <code>name()</code>æ–¹æ³•å’Œ <code>toString()</code> æ–¹æ³•æ•ˆæœä¸€æ ·ï¼Œè¿”å›çš„éƒ½æ˜¯ Enum çš„ name å€¼ã€‚</p></li></ol><h2 id="åºåˆ—åŒ–åŠçº¿ç¨‹å®‰å…¨"><a href="#åºåˆ—åŒ–åŠçº¿ç¨‹å®‰å…¨" class="headerlink" title="åºåˆ—åŒ–åŠçº¿ç¨‹å®‰å…¨"></a>åºåˆ—åŒ–åŠçº¿ç¨‹å®‰å…¨</h2><p>ä¸ºäº†ä¿è¯æšä¸¾ç±»å‹åƒ Java è§„èŒƒä¸­è§„å®šçš„é‚£æ ·ï¼Œæ¯ä¸€ä¸ªæšä¸¾ç±»å‹æå…¶å®šä¹‰çš„æšä¸¾å˜é‡åœ¨ JVM ä¸­éƒ½æ˜¯å”¯ä¸€çš„ï¼Œåœ¨æšä¸¾ç±»å‹çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–ä¸Šï¼ŒJava åšäº†ç‰¹æ®Šçš„è§„å®š:</p><blockquote><p>Enum constants are serialized differently than ordinary serializable or externalizable objects. The serialized form of an enum constant consists solely of its name; field values of the constant are not present in the form. To serialize an enum constant, ObjectOutputStream writes the value returned by the enum constantâ€™s name method. To deserialize an enum constant, ObjectInputStream reads the constant name from the stream; the deserialized constant is then obtained by calling the java.lang.Enum.valueOf method, passing the constantâ€™s enum type along with the received constant name as arguments. Like other serializable or externalizable objects, enum constants can function as the targets of back references appearing subsequently in the serialization stream. The process by which enum constants are serialized cannot be customized: any class-specific writeObject, readObject, readObjectNoData, writeReplace, and readResolve methods defined by enum types are ignored during serialization and deserialization. Similarly, any serialPersistentFields or serialVersionUID field declarations are also ignoredâ€“all enum types have a fixedserialVersionUID of 0L. Documenting serializable fields and data for enum types is unnecessary, since there is no variation in the type of data sent.</p></blockquote><p>å¤§æ¦‚æ„æ€å°±æ˜¯è¯´ï¼Œåœ¨åºåˆ—åŒ–çš„æ—¶å€™ Java ä»…ä»…æ˜¯å°†æšä¸¾å¯¹è±¡çš„ name å±æ€§è¾“å‡ºåˆ°ç»“æœä¸­ï¼Œååºåˆ—åŒ–çš„æ—¶å€™åˆ™æ˜¯é€šè¿‡java.lang.Enum çš„ <code>valueOf()</code> æ–¹æ³•æ¥æ ¹æ®åå­—æŸ¥æ‰¾æšä¸¾å¯¹è±¡ã€‚åŒæ—¶ï¼Œç¼–è¯‘å™¨æ˜¯ä¸å…è®¸ä»»ä½•å¯¹è¿™ç§åºåˆ—åŒ–æœºåˆ¶çš„å®šåˆ¶çš„ï¼Œå› æ­¤ç¦ç”¨äº† <code>writeObject</code>ã€<code>readObject</code>ã€<code>readObjectNoData</code>ã€<code>writeReplace</code> å’Œ <code>readResolve</code> ç­‰æ–¹æ³•ã€‚ æˆ‘ä»¬çœ‹ä¸€ä¸‹è¿™ä¸ª<code>valueOf()</code>æ–¹æ³•:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;T extends Enum&lt;T&gt;&gt; <span class="function">T <span class="title">valueOf</span><span class="params">(Class&lt;T&gt; enumType,</span></span></span><br><span class="line"><span class="function"><span class="params">                                            String name)</span> </span>&#123;</span><br><span class="line">    T result = enumType.enumConstantDirectory().get(name); <span class="comment">// è·å–æšä¸¾ç±»å‹çš„æšä¸¾å¸¸é‡å­—å…¸</span></span><br><span class="line">    <span class="keyword">if</span> (result != <span class="keyword">null</span>)</span><br><span class="line">        <span class="keyword">return</span> result;  <span class="comment">// æ‰¾åˆ°å³è¿”å›ç»“æœ</span></span><br><span class="line">    <span class="keyword">if</span> (name == <span class="keyword">null</span>) <span class="comment">// å¦åˆ™æŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> NullPointerException(<span class="string">"Name is null"</span>);</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(</span><br><span class="line">        <span class="string">"No enum constant "</span> + enumType.getCanonicalName() + <span class="string">"."</span> + name);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">volatile</span> <span class="keyword">transient</span> Map&lt;String, T&gt; enumConstantDirectory = <span class="keyword">null</span>;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Returns a map from simple name to enum constant.  This package-private</span></span><br><span class="line"><span class="comment"> * method is used internally by Enum to implement</span></span><br><span class="line"><span class="comment"> * &#123;<span class="doctag">@code</span> public static &lt;T extends Enum&lt;T&gt;&gt; T valueOf(Class&lt;T&gt;, String)&#125;</span></span><br><span class="line"><span class="comment"> * efficiently.  Note that the map is returned by this method is</span></span><br><span class="line"><span class="comment"> * created lazily on first use.  Typically it won't ever get created.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function">Map&lt;String, T&gt; <span class="title">enumConstantDirectory</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (enumConstantDirectory == <span class="keyword">null</span>) &#123;</span><br><span class="line">        T[] universe = getEnumConstantsShared();  <span class="comment">// åå°„çš„æ–¹å¼è°ƒç”¨æšä¸¾ç±»å‹çš„ values() é™æ€æ–¹æ³•</span></span><br><span class="line">        <span class="keyword">if</span> (universe == <span class="keyword">null</span>)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(</span><br><span class="line">                getName() + <span class="string">" is not an enum type"</span>);</span><br><span class="line">        Map&lt;String, T&gt; m = <span class="keyword">new</span> HashMap&lt;&gt;(<span class="number">2</span> * universe.length);</span><br><span class="line">        <span class="keyword">for</span> (T constant : universe)</span><br><span class="line">            m.put(((Enum&lt;?&gt;)constant).name(), constant); <span class="comment">// å¡«å…… enumConstantDirectory</span></span><br><span class="line">        enumConstantDirectory = m;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> enumConstantDirectory;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»ğŸ‘†å¯ä»¥çœ‹å‡ºï¼ŒJVM å¯¹æšä¸¾ç±»å‹åºåˆ—åŒ–æœ‰ä¿è¯ã€‚</p><p>æšä¸¾ç±»å‹æ˜¯ä¸€ä¸ª final ç±»å‹çš„ç»§æ‰¿è‡ª Enum çš„ç±»ï¼Œæ‰€ä»¥æšä¸¾ç±»å‹ä¸èƒ½è¢«ç»§æ‰¿ï¼Œè€Œä¸”è¿™ä¸ªç±»ä¸­çš„å±æ€§å’Œæ–¹æ³•éƒ½æ˜¯static ç±»å‹çš„ã€‚å½“ä¸€ä¸ª Java ç±»ç¬¬ä¸€æ¬¡è¢«çœŸæ­£ä½¿ç”¨åˆ°çš„æ—¶å€™é™æ€èµ„æºåˆå§‹åŒ–ã€Java ç±»çš„åŠ è½½å’Œåˆå§‹åŒ–è¿‡ç¨‹éƒ½æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚æ‰€ä»¥ï¼Œ<strong>åˆ›å»ºä¸€ä¸ªenumç±»å‹æ˜¯çº¿ç¨‹å®‰å…¨çš„</strong>ã€‚</p><h2 id="å•ä¾‹"><a href="#å•ä¾‹" class="headerlink" title="å•ä¾‹"></a>å•ä¾‹</h2><p>åœ¨StakcOverflowä¸­ï¼Œæœ‰ä¸€ä¸ªå…³äº<a href="https://stackoverflow.com/questions/70689/what-is-an-efficient-way-to-implement-a-singleton-pattern-in-java" target="_blank" rel="noopener">åœ¨ Java ä¸­å“ªç§å†™å•ä¾‹çš„æ–¹å¼æœ€å¥½</a>çš„è®¨è®ºã€‚</p><p>Joshua Blochå¤§ç¥åœ¨ã€ŠEffective Javaã€‹ä¸­æ˜ç¡®è¡¨è¾¾è¿‡çš„è§‚ç‚¹ï¼š</p><blockquote><p>ä½¿ç”¨æšä¸¾å®ç°å•ä¾‹çš„æ–¹æ³•è™½ç„¶è¿˜æ²¡æœ‰å¹¿æ³›é‡‡ç”¨ï¼Œä½†æ˜¯å•å…ƒç´ çš„æšä¸¾ç±»å‹å·²ç»æˆä¸ºå®ç°Singletonçš„æœ€ä½³æ–¹æ³•ã€‚</p></blockquote><p>ä½¿ç”¨æšä¸¾å®ç°å•ä¾‹çš„å¥½å¤„ï¼š</p><ol><li><p>æšä¸¾å•ä¾‹å†™æ³•ç®€å•ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> Singleton &#123;  </span><br><span class="line">    INSTANCE;  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> Connection <span class="title">getConnection</span><span class="params">()</span> </span>&#123;  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>çº¿ç¨‹å®‰å…¨ï¼šæšä¸¾å®ç°çš„å•ä¾‹æ˜¯å¤©ç”Ÿçº¿ç¨‹å®‰å…¨çš„ã€‚</p></li><li><p>ååºåˆ—åŒ–ä¸ä¼šç ´åå•ä¾‹ã€‚</p><blockquote><p>æ™®é€šçš„ Java ç±»çš„ååºåˆ—åŒ–è¿‡ç¨‹ä¸­ï¼Œä¼šé€šè¿‡åå°„è°ƒç”¨ç±»çš„é»˜è®¤æ„é€ å‡½æ•°æ¥åˆå§‹åŒ–å¯¹è±¡ã€‚æ‰€ä»¥ï¼Œå³ä½¿å•ä¾‹ä¸­æ„é€ å‡½æ•°æ˜¯ç§æœ‰çš„ï¼Œä¹Ÿä¼šè¢«åå°„ç»™ç ´åæ‰ã€‚ç”±äºååºåˆ—åŒ–åçš„å¯¹è±¡æ˜¯é‡æ–° new å‡ºæ¥çš„ï¼Œæ‰€ä»¥è¿™å°±ç ´åäº†å•ä¾‹ã€‚</p></blockquote></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å®šä¹‰&quot;&gt;&lt;a href=&quot;#å®šä¹‰&quot; class=&quot;headerlink&quot; title=&quot;å®šä¹‰&quot;&gt;&lt;/a&gt;å®šä¹‰&lt;/h2&gt;&lt;p&gt;æšä¸¾ç±»å‹ï¼ˆ&lt;code&gt;enum type&lt;/code&gt;ï¼‰æ˜¯æŒ‡ç”±ä¸€ç»„å›ºå®šçš„å¸¸é‡ç»„æˆåˆæ³•çš„ç±»å‹ã€‚&lt;code&gt;Java&lt;/code&gt; ä¸­ç”±å…³é”®å­— 
      
    
    </summary>
    
      <category term="Java" scheme="https://muhouer.github.io/categories/Java/"/>
    
      <category term="æºç å­¦ä¹ " scheme="https://muhouer.github.io/categories/Java/%E6%BA%90%E7%A0%81%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="æšä¸¾ç±»å‹" scheme="https://muhouer.github.io/tags/%E6%9E%9A%E4%B8%BE%E7%B1%BB%E5%9E%8B/"/>
    
  </entry>
  
  <entry>
    <title>æ‚è®°-å¤©ç§€</title>
    <link href="https://muhouer.github.io/posts/ff247979/"/>
    <id>https://muhouer.github.io/posts/ff247979/</id>
    <published>2019-08-20T15:06:47.000Z</published>
    <updated>2019-08-20T16:44:49.483Z</updated>
    
    <content type="html"><![CDATA[<h2 id="åœ¨ä¸€ä¸ª8Ã—8çš„å›½é™…è±¡æ£‹æ£‹ç›˜ä¸Š-æ˜¾ç„¶æˆ‘ä»¬å¯ä»¥ç”¨32å¼ å¤šç±³è¯ºéª¨ç‰Œè¦†ç›–æ•´ä¸ªæ£‹ç›˜ä¸Šçš„64ä¸ªæ–¹æ ¼ã€‚"><a href="#åœ¨ä¸€ä¸ª8Ã—8çš„å›½é™…è±¡æ£‹æ£‹ç›˜ä¸Š-æ˜¾ç„¶æˆ‘ä»¬å¯ä»¥ç”¨32å¼ å¤šç±³è¯ºéª¨ç‰Œè¦†ç›–æ•´ä¸ªæ£‹ç›˜ä¸Šçš„64ä¸ªæ–¹æ ¼ã€‚" class="headerlink" title="åœ¨ä¸€ä¸ª8Ã—8çš„å›½é™…è±¡æ£‹æ£‹ç›˜ä¸Š, æ˜¾ç„¶æˆ‘ä»¬å¯ä»¥ç”¨32å¼ å¤šç±³è¯ºéª¨ç‰Œè¦†ç›–æ•´ä¸ªæ£‹ç›˜ä¸Šçš„64ä¸ªæ–¹æ ¼ã€‚"></a>åœ¨ä¸€ä¸ª8Ã—8çš„å›½é™…è±¡æ£‹æ£‹ç›˜ä¸Š, æ˜¾ç„¶æˆ‘ä»¬å¯ä»¥ç”¨32å¼ å¤šç±³è¯ºéª¨ç‰Œè¦†ç›–æ•´ä¸ªæ£‹ç›˜ä¸Šçš„64ä¸ªæ–¹æ ¼ã€‚</h2><h3 id="é—®ï¼šå¦‚æœå°†å¯¹è§’çº¿ä¸Šçš„ä¸¤ä¸ªæ–¹æ ¼æŒ–æ‰-é‚£å‰©ä¸‹æ¥çš„62ä¸ªæ ¼å­è¿˜èƒ½ç”¨31å¼ éª¨ç‰Œè¦†ç›–ä½å—ï¼Ÿ"><a href="#é—®ï¼šå¦‚æœå°†å¯¹è§’çº¿ä¸Šçš„ä¸¤ä¸ªæ–¹æ ¼æŒ–æ‰-é‚£å‰©ä¸‹æ¥çš„62ä¸ªæ ¼å­è¿˜èƒ½ç”¨31å¼ éª¨ç‰Œè¦†ç›–ä½å—ï¼Ÿ" class="headerlink" title="é—®ï¼šå¦‚æœå°†å¯¹è§’çº¿ä¸Šçš„ä¸¤ä¸ªæ–¹æ ¼æŒ–æ‰, é‚£å‰©ä¸‹æ¥çš„62ä¸ªæ ¼å­è¿˜èƒ½ç”¨31å¼ éª¨ç‰Œè¦†ç›–ä½å—ï¼Ÿ"></a>é—®ï¼šå¦‚æœå°†å¯¹è§’çº¿ä¸Šçš„ä¸¤ä¸ªæ–¹æ ¼æŒ–æ‰, é‚£å‰©ä¸‹æ¥çš„62ä¸ªæ ¼å­è¿˜èƒ½ç”¨31å¼ éª¨ç‰Œè¦†ç›–ä½å—ï¼Ÿ</h3><img src="/images/201908201107.png" width="500px" height="500px" align="center"><p>ç­”ï¼šæ¯ä¸€å¼ éª¨ç‰Œåœ¨æ£‹ç›˜ä¸Šå¿…æ˜¯è¦†ç›–ä½ä¸¤ä¸ªç›¸é‚»æ–¹æ ¼, ä¸€ç™½ä¸€é»‘ã€‚æŒ–æ‰ä¸¤ä¸ªè§’ä¹‹ååªæœ‰ 32 é»‘ 30 ç™½, äºæ˜¯å°±ä¸å­˜åœ¨è¿™æ ·ä¸€ç§èƒ½ç”¨31ä¸ªéª¨ç‰Œè¦†ç›–çš„æ–¹æ³•ã€‚</p><h3 id="é—®ï¼šä»»æ„åˆ‡æ‰ä¸€ä¸ªä¸€ç™½ä¸€é»‘çš„æ ¼å­å°±ä¸€å®šå¯ä»¥å—ï¼Ÿ"><a href="#é—®ï¼šä»»æ„åˆ‡æ‰ä¸€ä¸ªä¸€ç™½ä¸€é»‘çš„æ ¼å­å°±ä¸€å®šå¯ä»¥å—ï¼Ÿ" class="headerlink" title="é—®ï¼šä»»æ„åˆ‡æ‰ä¸€ä¸ªä¸€ç™½ä¸€é»‘çš„æ ¼å­å°±ä¸€å®šå¯ä»¥å—ï¼Ÿ"></a>é—®ï¼šä»»æ„åˆ‡æ‰ä¸€ä¸ªä¸€ç™½ä¸€é»‘çš„æ ¼å­å°±ä¸€å®šå¯ä»¥å—ï¼Ÿ</h3><img src="/images/201908201108.png" width="500px" height="500px" align="center"><p>ç­”ï¼šå¯ä»¥ã€‚ç²—é»‘çº¿æ¡å°†æ•´ä¸ªæ£‹ç›˜è½¬å˜ä¸ºä¸€æ¡é¦–å°¾ç›¸è¿ã€é»‘ç™½æ ¼ç›¸é—´çš„å°é—­è·¯çº¿ã€‚ä»è¿™æ£‹ç›˜ä¸Šåˆ‡æ‰ä»»ä½•ä¸¤ä¸ªé¢œè‰²ä¸åŒçš„æ–¹æ ¼, ä¼šè®©è¿™ä¸ªå°é—­çº¿è·¯å˜æˆä¸¤æ®µçº¿è·¯, å½“ç„¶å¦‚æœåˆ‡æ‰çš„æ–¹æ ¼æ˜¯ç›¸è¿çš„, é‚£å°±æ˜¯ä¸€æ¡çº¿è·¯ã€‚æ˜¾ç„¶, åœ¨ä»»ä½•çº¿è·¯ä¸­, ä¸¤ç§é¢œè‰²çš„æ ¼å­æ•°é‡éƒ½æ˜¯å¶æ•°ï¼Œæ•…åˆ†åˆ«éƒ½å¯ä»¥è¢«è‹¥å¹²å¼ éª¨ç‰Œè¦†ç›–ã€‚ä»è€Œæ•´ä¸ªæ£‹ç›˜ä¸€å®šå¯ä»¥è¢«31å¼ éª¨ç‰Œå®Œå…¨è¦†ç›–ã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;åœ¨ä¸€ä¸ª8Ã—8çš„å›½é™…è±¡æ£‹æ£‹ç›˜ä¸Š-æ˜¾ç„¶æˆ‘ä»¬å¯ä»¥ç”¨32å¼ å¤šç±³è¯ºéª¨ç‰Œè¦†ç›–æ•´ä¸ªæ£‹ç›˜ä¸Šçš„64ä¸ªæ–¹æ ¼ã€‚&quot;&gt;&lt;a href=&quot;#åœ¨ä¸€ä¸ª8Ã—8çš„å›½é™…è±¡æ£‹æ£‹ç›˜ä¸Š-æ˜¾ç„¶æˆ‘ä»¬å¯ä»¥ç”¨32å¼ å¤šç±³è¯ºéª¨ç‰Œè¦†ç›–æ•´ä¸ªæ£‹ç›˜ä¸Šçš„64ä¸ªæ–¹æ ¼ã€‚&quot; class=&quot;headerlink&quot; title=&quot;åœ¨ä¸€ä¸ª8
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>æ‚è®°-ç§‘å­¦ä¸æ–¹æ³•</title>
    <link href="https://muhouer.github.io/posts/b549d39b/"/>
    <id>https://muhouer.github.io/posts/b549d39b/</id>
    <published>2019-08-20T14:40:00.000Z</published>
    <updated>2019-08-20T14:44:59.797Z</updated>
    
    <content type="html"><![CDATA[<ol><li><p>å‡å¦‚åœ¨é‚£é‡Œå±…ä½ç€æ™ºè€…ï¼Œè¿™äº›æ™ºè€…æ¯«æ— å¥½å¥‡å¿ƒï¼Œé¿å…ä¸€åˆ‡è¿‡åº¦è¡Œä¸ºï¼Œé‚£ä¹ˆä»–ä»¬ä¸ä¼šæ­»äºç–¾ç—…ï¼Œè€Œç¡®å®å°†æ­»äºæ— èŠã€‚</p></li><li><p>æ³•åˆ™ä¸€ç»ç¡®ç«‹ï¼Œæˆ‘ä»¬é¦–å…ˆå°±è¦å¯»æ‰¾è¿™ä¸ªæ³•åˆ™å…·æœ‰æœ€å¤§å¤±æ•ˆæœºé‡çš„æƒ…å†µã€‚æˆ‘ä»¬åº”è¯¥è¾¾åˆ°çš„ç›®çš„ä¸»è¦ä¸åœ¨äºå¼„æ¸…ç›¸ä¼¼å’Œå·®å¼‚ï¼Œè€Œæ˜¯è¦è®¤å‡ºéšè—åœ¨è¡¨è§‚åç¦»ä¸‹çš„ç±»ä¼¼æ€§ã€‚</p></li><li><p>ç§‘å­¦å®¶ç ”ç©¶è‡ªç„¶ï¼Œå¹¶éå› ä¸ºå®ƒæœ‰ç”¨å¤„ï¼›ä»–ç ”ç©¶å®ƒï¼Œæ˜¯å› ä¸ºä»–å–œæ¬¢å®ƒï¼Œä»–ä¹‹æ‰€ä»¥å–œæ¬¢å®ƒï¼Œæ˜¯å› ä¸ºå®ƒæ˜¯ç¾çš„ã€‚å¦‚æœè‡ªç„¶ä¸ç¾ï¼Œå®ƒå°±ä¸å€¼å¾—äº†è§£ï¼›å¦‚æœè‡ªç„¶ä¸å€¼å¾—äº†è§£ï¼Œç”Ÿå‘½ä¹Ÿå°±ä¸å€¼å¾—æ´»ç€ã€‚</p></li><li><p>å‡å¦‚æ²¡æœ‰èƒ½å¤Ÿåœ¨äº‹å®ä¸­é€‰æ‹©ã€åˆ†è¾¨åœ¨å“ªäº›äº‹å®èƒŒåéšè—æŸç§ä¸œè¥¿ï¼Œä»¥åŠè¯†åˆ«ä»€ä¹ˆæ­£åœ¨éšè—ç€çš„ç²¾ç¥ï¼Œå‡å¦‚æ²¡æœ‰åœ¨æœªåŠ å·¥çš„äº‹å®ä¸‹å¯Ÿè§‰äº‹å®ç²¾é«“çš„ç²¾ç¥ï¼Œäº‹å®ä¹Ÿè®¸æ˜¯æ¯«æ— æˆæœçš„ã€‚</p></li><li><p>äº‹å®çš„é‡è¦æ€§ç”¨å®ƒäº§ç”Ÿçš„æ•ˆç›Šæ¥è¡¡é‡ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œç”¨å®ƒå®¹è®¸æˆ‘ä»¬èŠ‚çœçš„æ€ç»´æ•°é‡æ¥è¡¡é‡ã€‚æ€ç»´ç»æµæ˜¯æˆ‘ä»¬åº”è¯¥å¯¹å‡†çš„ç›®æ ‡ï¼Œå› æ­¤æä¾›ä»¿æ•ˆçš„æ¨¡å‹è¿˜æ˜¯ä¸å¤Ÿçš„ã€‚éœ€è¦ä½¿æˆ‘ä»¬ä¹‹åçš„äººèƒ½å¤Ÿçœå´è¿™äº›æ¨¡å‹ï¼Œä¸å»é‡å¤å·²åšå‡ºçš„è®ºæ®ï¼Œè€Œç”¨å‡ å¥è¯æ¦‚æ‹¬å®ƒã€‚</p></li><li><p>æˆ‘ä»¬åº”è¯¥ç»å¸¸åŠ›å›¾å»åšçš„ï¼Œå¯ä»¥è¯´æ˜¯å®šæ€§åœ°è§£å†³é—®é¢˜ï¼›ä¹Ÿå°±æ˜¯è¯´ï¼ŒåŠ›å›¾å»äº†è§£è¡¨ç¤ºæœªçŸ¥å‡½æ•°çš„æ›²çº¿çš„ä¸€èˆ¬å½¢çŠ¶ã€‚ä¾ç„¶è¦å¯»æ‰¾é—®é¢˜çš„å®šé‡çš„è§£ã€‚</p></li><li><p>å¾€å¾€å‘ç”Ÿè¿™ç§æƒ…å†µï¼šä¸å®Œç¾çš„è§£æŠŠæˆ‘ä»¬å¼•å‘æ¯”è¾ƒå®Œç¾çš„è§£ã€‚æœ‰æ—¶ï¼Œçº§æ•°æ”¶æ•›è¿‡æ…¢ï¼Œä»¥è‡´è®¡ç®—æ— æ³•å®é™…è¿›è¡Œã€‚æˆ‘ä»¬ä»…ä»…å¾—ä»¥è¯æ˜é—®é¢˜çš„å¯èƒ½æ€§ã€‚</p></li><li><p>å¶ç„¶æ€§ä»…ä»…æ˜¯æˆ‘ä»¬æ— çŸ¥çš„åº¦é‡ã€‚æŒ‰ç…§å®šä¹‰ï¼Œå¶ç„¶å‘ç”Ÿçš„ç°è±¡å°±æ˜¯æˆ‘ä»¬ä¸çŸ¥é“å…¶è§„å¾‹çš„ç°è±¡ã€‚</p></li><li><p>å¯¹ç§°æ€§çš„æœ€å°æ¬ ç¼ºå°†ä½¿å®ƒç¨å¾®å€¾æ–œåˆ°ä¸€ä¾§æˆ–å¦ä¸€ä¾§ï¼Œè€Œä¸”å¦‚æœå®ƒå€¾æ–œäº†ï¼Œä¸ç®¡å€¾æ–œå¾—å¤šä¹ˆå°ï¼Œå®ƒå¿…å°†å®Œå…¨å€¾å‘é‚£ä¸€ä¾§ã€‚</p></li><li><p>æˆ‘ä¸å¯èƒ½é¢„è§æˆ‘æ¨åŠ¨çš„æŒ‡é’ˆå°†åœåœ¨ä½•å¤„ï¼Œè¿™å°±æ˜¯æˆ‘çš„å¿ƒç´§å¼ åœ°è·³åŠ¨ï¼ŒæœŸæœ›ä¸€åˆ‡éƒ½äº¤å¥½è¿çš„ç¼˜ç”±ã€‚åŸå› ä¸Šçš„å·®åˆ«æ˜¯éš¾ä»¥è§‰å¯Ÿçš„ï¼Œè€Œç»“æœä¸Šçš„å·®åˆ«å¯¹æˆ‘æ¥è¯´å´æ˜¯è‡³å…³é‡è¦çš„ï¼Œç”±äºå®ƒå°±æ˜¯æˆ‘çš„æ•´ä¸ªèµŒæ³¨ã€‚</p></li><li><p>æˆ‘ä»¬å¿½è·¯äº†è¿™æ ·ä¸€äº›æƒ…å†µ,è¿™äº›æƒ…å†µä¹çœ‹èµ·æ¥ä¼¼ä¹å®Œå…¨æ˜¯åœ¨æˆ‘ä»¬é¢„è§ä¹‹å¤–å‘ç”Ÿçš„ï¼Œäººä»¬ä»æ¥ä¹Ÿæ²¡æœ‰æ¢¦æƒ³åˆ°æŠŠä»»ä½•å½±å“å½’å’äºå®ƒï¼Œä¸è¿‡ä¸æˆ‘ä»¬çš„é¢„æœŸç›¸åï¼Œå®ƒæœ€ç»ˆå´èµ·ç€é‡è¦çš„ä½œç”¨ã€‚</p></li><li><p>æˆ‘ä»¬ä¸çŸ¥é“å¶ç„¶è¯¯å·®ç”±ä»€ä¹ˆå¼•èµ·çš„ï¼Œè€Œä¸”æ­£å› ä¸ºæˆ‘ä»¬ä¸çŸ¥é“ï¼Œæˆ‘ä»¬æ‰æ„è¯†åˆ°å®ƒä»¬æœä»é«˜æ–¯å®šå¾‹ã€‚</p></li><li><p>ä¸æ˜¯ä¸¥æ ¼çš„è¯æ˜å¾®ä¸è¶³é“ã€‚</p></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;ol&gt;&lt;li&gt;&lt;p&gt;å‡å¦‚åœ¨é‚£é‡Œå±…ä½ç€æ™ºè€…ï¼Œè¿™äº›æ™ºè€…æ¯«æ— å¥½å¥‡å¿ƒï¼Œé¿å…ä¸€åˆ‡è¿‡åº¦è¡Œä¸ºï¼Œé‚£ä¹ˆä»–ä»¬ä¸ä¼šæ­»äºç–¾ç—…ï¼Œè€Œç¡®å®å°†æ­»äºæ— èŠã€‚&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;æ³•åˆ™ä¸€ç»ç¡®ç«‹ï¼Œæˆ‘ä»¬é¦–å…ˆå°±è¦å¯»æ‰¾è¿™ä¸ªæ³•åˆ™å…·æœ‰æœ€å¤§å¤±æ•ˆæœºé‡çš„æƒ…å†µã€‚æˆ‘ä»¬åº”è¯¥è¾¾åˆ°çš„ç›®çš„ä¸»è¦ä¸åœ¨äºå¼„æ¸…ç›¸ä¼¼å’Œå·®å¼‚ï¼Œè€Œæ˜¯è¦è®¤å‡ºéšè—åœ¨è¡¨è§‚
      
    
    </summary>
    
      <category term="æ‚è®°" scheme="https://muhouer.github.io/categories/%E6%9D%82%E8%AE%B0/"/>
    
    
      <category term="ç§‘å­¦ä¸æ–¹æ³•" scheme="https://muhouer.github.io/tags/%E7%A7%91%E5%AD%A6%E4%B8%8E%E6%96%B9%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>è¯æ˜æ‚è®°</title>
    <link href="https://muhouer.github.io/posts/c1a19f3f/"/>
    <id>https://muhouer.github.io/posts/c1a19f3f/</id>
    <published>2019-08-18T06:22:00.000Z</published>
    <updated>2019-08-18T15:42:58.197Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å¦‚ä½•è¯æ˜-0-99999â€¦â€¦-1"><a href="#å¦‚ä½•è¯æ˜-0-99999â€¦â€¦-1" class="headerlink" title="å¦‚ä½•è¯æ˜ 0.99999â€¦â€¦ = 1"></a>å¦‚ä½•è¯æ˜ <code>0.99999â€¦â€¦ = 1</code></h2><h3 id="æ–¹æ³•ä¸€"><a href="#æ–¹æ³•ä¸€" class="headerlink" title="æ–¹æ³•ä¸€"></a>æ–¹æ³•ä¸€</h3><p><code>1/3 = 0.33333â€¦â€¦</code> ==&gt; <code>1 = 0.99999â€¦â€¦</code></p><h3 id="æ–¹æ³•äºŒ"><a href="#æ–¹æ³•äºŒ" class="headerlink" title="æ–¹æ³•äºŒ"></a>æ–¹æ³•äºŒ</h3><p><code>10 * 0.99999â€¦â€¦ = 9.9999â€¦â€¦</code><br>ä¸¤è¾¹å„å‡å»ä¸€ä¸ª <code>0.99999â€¦â€¦</code> ==&gt; <code>9 * 0.99999â€¦â€¦ = 9</code> ==&gt; <code>0.99999â€¦â€¦ = 1</code></p><h2 id="æœ‰è¶£çš„-PI-å’Œ-E"><a href="#æœ‰è¶£çš„-PI-å’Œ-E" class="headerlink" title="æœ‰è¶£çš„ PI å’Œ E"></a>æœ‰è¶£çš„ <code>PI</code> å’Œ <code>E</code></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt; Math.pow(Math.PI, 4) + Math.pow(Math.PI, 5)</span><br><span class="line">403.4287758192838</span><br><span class="line">&gt; Math.pow(Math.E, 6)</span><br><span class="line">403.428793492735</span><br></pre></td></tr></table></figure><p><code>PI^4 + PI^5 çº¦ç­‰äº E^6</code> å¯ä»¥ç²¾ç¡®åˆ°å°æ•°ç‚¹åå››ä½ã€‚<br>ç´§è·Ÿè¿™ä¸ªç²¾åº¦ä¹‹åçš„æ˜¯ <code>PI^146 + PI^152 çº¦ç­‰äº E^174</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt; Math.pow(Math.PI, 146) + Math.pow(Math.PI, 152)</span><br><span class="line">3.6917488742520865e+75</span><br><span class="line">&gt; Math.pow(Math.E, 174)</span><br><span class="line">3.6918143295804325e+75</span><br></pre></td></tr></table></figure><p>ç¥å¥‡ï¼ç¥å¥‡ï¼ç¥å¥‡ï¼<br>æœ‰è¶£ï¼æœ‰è¶£ï¼æœ‰è¶£ï¼</p><h2 id="æ—¶é—´å¤åˆ©"><a href="#æ—¶é—´å¤åˆ©" class="headerlink" title="æ—¶é—´å¤åˆ©"></a>æ—¶é—´å¤åˆ©</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt; Math.pow((1+1/365), 365)</span><br><span class="line">2.714567482021973</span><br><span class="line">&gt; Math.pow((1+1/365), 365*10)</span><br><span class="line">21727.333146076744</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å¦‚ä½•è¯æ˜-0-99999â€¦â€¦-1&quot;&gt;&lt;a href=&quot;#å¦‚ä½•è¯æ˜-0-99999â€¦â€¦-1&quot; class=&quot;headerlink&quot; title=&quot;å¦‚ä½•è¯æ˜ 0.99999â€¦â€¦ = 1&quot;&gt;&lt;/a&gt;å¦‚ä½•è¯æ˜ &lt;code&gt;0.99999â€¦â€¦ = 1&lt;/code&gt;&lt;/h2&gt;
      
    
    </summary>
    
      <category term="æ•°å­¦" scheme="https://muhouer.github.io/categories/%E6%95%B0%E5%AD%A6/"/>
    
      <category term="æ‚è®°" scheme="https://muhouer.github.io/categories/%E6%95%B0%E5%AD%A6/%E6%9D%82%E8%AE%B0/"/>
    
    
  </entry>
  
  <entry>
    <title>HashSetåˆ†æ</title>
    <link href="https://muhouer.github.io/posts/88817346/"/>
    <id>https://muhouer.github.io/posts/88817346/</id>
    <published>2019-08-18T05:58:00.000Z</published>
    <updated>2019-08-20T16:46:43.638Z</updated>
    
    <content type="html"><![CDATA[<p><code>HashSet</code> æ˜¯ä¸€ä¸ªä¸å…è®¸å­˜å‚¨é‡å¤å…ƒç´ çš„é›†åˆï¼Œå®ƒçš„å®ç°æ¯”è¾ƒç®€å•ï¼Œåªè¦ç†è§£äº† <code>HashMap</code>ï¼Œ<code>HashSet</code> åŸºæœ¬å°±æ²¡ä»€ä¹ˆé—®é¢˜ã€‚</p><h2 id="æˆå‘˜å˜é‡"><a href="#æˆå‘˜å˜é‡" class="headerlink" title="æˆå‘˜å˜é‡"></a>æˆå‘˜å˜é‡</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">transient</span> HashMap&lt;E,Object&gt; map;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Dummy value to associate with an Object in the backing Map</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Object PRESENT = <span class="keyword">new</span> Object();</span><br></pre></td></tr></table></figure><p>ä¸»è¦å°±ä¸¤ä¸ªå˜é‡:</p><ul><li><code>map</code> ï¼šç”¨äºå­˜æ”¾æœ€ç»ˆæ•°æ®çš„ã€‚</li><li><code>PRESENT</code> ï¼šæ˜¯æ‰€æœ‰å†™å…¥ map çš„ <code>value</code> å€¼ã€‚</li></ul><h2 id="æ„é€ å‡½æ•°"><a href="#æ„é€ å‡½æ•°" class="headerlink" title="æ„é€ å‡½æ•°"></a>æ„é€ å‡½æ•°</h2><p>æ„é€ å‡½æ•°ä¹Ÿå¾ˆç®€å•ï¼Œåˆ©ç”¨ <code>HashMap</code> åˆå§‹åŒ–äº† map</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Constructs a new, empty set; the backing &lt;tt&gt;HashMap&lt;/tt&gt; instance has</span></span><br><span class="line"><span class="comment"> * default initial capacity (16) and load factor (0.75).</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">HashSet</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Constructs a new set containing the elements in the specified</span></span><br><span class="line"><span class="comment"> * collection.  The &lt;tt&gt;HashMap&lt;/tt&gt; is created with default load factor</span></span><br><span class="line"><span class="comment"> * (0.75) and an initial capacity sufficient to contain the elements in</span></span><br><span class="line"><span class="comment"> * the specified collection.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> c the collection whose elements are to be placed into this set</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> NullPointerException if the specified collection is null</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">HashSet</span><span class="params">(Collection&lt;? extends E&gt; c)</span> </span>&#123;</span><br><span class="line">    map = <span class="keyword">new</span> HashMap&lt;&gt;(Math.max((<span class="keyword">int</span>) (c.size()/.<span class="number">75f</span>) + <span class="number">1</span>, <span class="number">16</span>));</span><br><span class="line">    addAll(c);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Constructs a new, empty set; the backing &lt;tt&gt;HashMap&lt;/tt&gt; instance has</span></span><br><span class="line"><span class="comment"> * the specified initial capacity and the specified load factor.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>      initialCapacity   the initial capacity of the hash map</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>      loadFactor        the load factor of the hash map</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span>     IllegalArgumentException if the initial capacity is less</span></span><br><span class="line"><span class="comment"> *             than zero, or if the load factor is nonpositive</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">HashSet</span><span class="params">(<span class="keyword">int</span> initialCapacity, <span class="keyword">float</span> loadFactor)</span> </span>&#123;</span><br><span class="line">    map = <span class="keyword">new</span> HashMap&lt;&gt;(initialCapacity, loadFactor);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Constructs a new, empty set; the backing &lt;tt&gt;HashMap&lt;/tt&gt; instance has</span></span><br><span class="line"><span class="comment"> * the specified initial capacity and default load factor (0.75).</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>      initialCapacity   the initial capacity of the hash table</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span>     IllegalArgumentException if the initial capacity is less</span></span><br><span class="line"><span class="comment"> *             than zero</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">HashSet</span><span class="params">(<span class="keyword">int</span> initialCapacity)</span> </span>&#123;</span><br><span class="line">    map = <span class="keyword">new</span> HashMap&lt;&gt;(initialCapacity);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="é‡è¦æ–¹æ³•"><a href="#é‡è¦æ–¹æ³•" class="headerlink" title="é‡è¦æ–¹æ³•"></a>é‡è¦æ–¹æ³•</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">add</span><span class="params">(E e)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> map.put(e, PRESENT)==<span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¯”è¾ƒå…³é”®çš„å°±æ˜¯è¿™ä¸ª <code>add()</code> æ–¹æ³•ã€‚ å¯ä»¥çœ‹å‡ºå®ƒæ˜¯å°†å­˜æ”¾çš„å¯¹è±¡å½“åšäº† <code>HashMap</code> çš„å¥ï¼Œ<code>value</code> éƒ½æ˜¯ç›¸åŒçš„ <code>PRESENT</code> ã€‚ç”±äº <code>HashMap</code> çš„ <code>key</code> æ˜¯ä¸èƒ½é‡å¤çš„ï¼Œæ‰€ä»¥æ¯å½“æœ‰é‡å¤çš„å€¼å†™å…¥åˆ° <code>HashSet</code> æ—¶ï¼Œ<code>value</code> ä¼šè¢«è¦†ç›–ï¼Œä½† <code>key</code> ä¸ä¼šå—åˆ°å½±å“ï¼Œè¿™æ ·å°±ä¿è¯äº† <code>HashSet</code> ä¸­åªèƒ½å­˜æ”¾ä¸é‡å¤çš„å…ƒç´ ã€‚</p><h2 id="TreeSet-ä¸-HashSet-çš„åŒºåˆ«"><a href="#TreeSet-ä¸-HashSet-çš„åŒºåˆ«" class="headerlink" title="TreeSet ä¸ HashSet çš„åŒºåˆ«"></a>TreeSet ä¸ HashSet çš„åŒºåˆ«</h2><p>1ã€<code>TreeSet</code> æ˜¯äºŒå·®æ ‘å®ç°çš„ï¼Œ<code>Treeset</code>cä¸­çš„æ•°æ®æ˜¯è‡ªåŠ¨æ’å¥½åºçš„ï¼Œä¸å…è®¸æ”¾å…¥ null å€¼ 2ã€<code>HashSet</code> æ˜¯å“ˆå¸Œè¡¨å®ç°çš„ï¼Œ<code>HashSet</code> ä¸­çš„æ•°æ®æ˜¯æ— åºçš„ï¼Œå¯ä»¥æ”¾å…¥ nullï¼Œä½†åªèƒ½æ”¾å…¥ä¸€ä¸ª nullï¼Œä¸¤è€…ä¸­çš„å€¼éƒ½ä¸èƒ½é‡å¤ï¼Œå°±å¦‚æ•°æ®åº“ä¸­å”¯ä¸€çº¦æŸã€‚</p><p>åœ¨ <code>HashSet</code> ä¸­ï¼ŒåŸºæœ¬çš„æ“ä½œéƒ½æ˜¯ç”± <code>HashMap</code> åº•å±‚å®ç°çš„ï¼Œå› ä¸º <code>HashSet</code> åº•å±‚æ˜¯ç”¨ <code>HashMap</code> å­˜å‚¨æ•°æ®çš„ã€‚å½“å‘<code>HashSet</code> ä¸­æ·»åŠ å…ƒç´ çš„æ—¶å€™ï¼Œé¦–å…ˆè®¡ç®—å…ƒç´ çš„hashcodeå€¼ï¼Œç„¶åé€šè¿‡æ‰°åŠ¨è®¡ç®—å’ŒæŒ‰ä½ä¸çš„æ–¹å¼è®¡ç®—å‡ºè¿™ä¸ªå…ƒç´ çš„å­˜å‚¨ä½ç½®ï¼Œå¦‚æœè¿™ä¸ªä½ç½®ä½ç©ºï¼Œå°±å°†å…ƒç´ æ·»åŠ è¿›å»ï¼›å¦‚æœä¸ä¸ºç©ºï¼Œåˆ™ç”¨equalsæ–¹æ³•æ¯”è¾ƒå…ƒç´ æ˜¯å¦ç›¸ç­‰ï¼Œç›¸ç­‰å°±ä¸æ·»åŠ ï¼Œå¦åˆ™æ‰¾ä¸€ä¸ªç©ºä½æ·»åŠ ã€‚</p><p><code>TreeSet</code> çš„åº•å±‚æ˜¯ <code>TreeMap</code> çš„ keySet()ï¼Œè€Œ <code>TreeMap</code> æ˜¯åŸºäºçº¢é»‘æ ‘å®ç°çš„ï¼Œçº¢é»‘æ ‘æ˜¯ä¸€ç§å¹³è¡¡äºŒå‰æŸ¥æ‰¾æ ‘ï¼Œå®ƒèƒ½ä¿è¯ä»»ä½•ä¸€ä¸ªèŠ‚ç‚¹çš„å·¦å³å­æ ‘çš„é«˜åº¦å·®ä¸ä¼šè¶…è¿‡è¾ƒçŸ®çš„é‚£æ£µçš„ä¸€å€ã€‚</p><p><code>TreeMap</code> æ˜¯æŒ‰keyæ’åºçš„ï¼Œå…ƒç´ åœ¨æ’å…¥ <code>TreeSet</code> æ—¶ compareTo() æ–¹æ³•è¦è¢«è°ƒç”¨ï¼Œæ‰€ä»¥ <code>TreeSet</code> ä¸­çš„å…ƒç´ è¦å®ç°Comparable æ¥å£ã€‚<code>TreeSet</code> ä½œä¸ºä¸€ç§Setï¼Œå®ƒä¸å…è®¸å‡ºç°é‡å¤å…ƒç´ ã€‚<code>TreeSet</code> æ˜¯ç”¨ compareTo() æ¥åˆ¤æ–­é‡å¤å…ƒç´ çš„ã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p><code>HashSet</code> çš„åŸç†æ¯”è¾ƒç®€å•ï¼Œå‡ ä¹å…¨éƒ¨å€ŸåŠ©äº <code>HashMap</code> æ¥å®ç°çš„ã€‚å³ <code>HashSet</code> å’Œ <code>HashMap</code> æ˜¯å‘½è¿å…±åŒä½“ï¼Œä¸€è£ä¿±è£ï¼Œä¸€æŸä¿±æŸã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;code&gt;HashSet&lt;/code&gt; æ˜¯ä¸€ä¸ªä¸å…è®¸å­˜å‚¨é‡å¤å…ƒç´ çš„é›†åˆï¼Œå®ƒçš„å®ç°æ¯”è¾ƒç®€å•ï¼Œåªè¦ç†è§£äº† &lt;code&gt;HashMap&lt;/code&gt;ï¼Œ&lt;code&gt;HashSet&lt;/code&gt; åŸºæœ¬å°±æ²¡ä»€ä¹ˆé—®é¢˜ã€‚&lt;/p&gt;&lt;h2 id=&quot;æˆå‘˜å˜é‡&quot;&gt;&lt;a href=&quot;#æˆå‘˜å˜é‡&quot; 
      
    
    </summary>
    
      <category term="Java" scheme="https://muhouer.github.io/categories/Java/"/>
    
      <category term="æºç å­¦ä¹ " scheme="https://muhouer.github.io/categories/Java/%E6%BA%90%E7%A0%81%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="HashSet" scheme="https://muhouer.github.io/tags/HashSet/"/>
    
  </entry>
  
  <entry>
    <title>LinkedListåˆ†æ</title>
    <link href="https://muhouer.github.io/posts/5c1acfc0/"/>
    <id>https://muhouer.github.io/posts/5c1acfc0/</id>
    <published>2019-08-18T05:55:00.000Z</published>
    <updated>2019-08-20T16:46:27.303Z</updated>
    
    <content type="html"><![CDATA[<p><code>LinkedList</code> åº•å±‚æ˜¯åŸºäºåŒå‘é“¾è¡¨ <code>Deque</code> å®ç°çš„ï¼Œä¹Ÿæ˜¯å®ç°äº† <code>List</code> æ¥å£ï¼Œæ‰€ä»¥ä¹Ÿæ‹¥æœ‰ List çš„ä¸€äº›ç‰¹ç‚¹ï¼Œå‡ºåœºç‡ä¸é«˜ï¼Œäº†è§£ä¸€ä¸‹ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">transient</span> <span class="keyword">int</span> size = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Pointer to first node.</span></span><br><span class="line"><span class="comment"> * Invariant: (first == null &amp;&amp; last == null) ||</span></span><br><span class="line"><span class="comment"> *            (first.prev == null &amp;&amp; first.item != null)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">transient</span> Node&lt;E&gt; first;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Pointer to last node.</span></span><br><span class="line"><span class="comment"> * Invariant: (first == null &amp;&amp; last == null) ||</span></span><br><span class="line"><span class="comment"> *            (last.next == null &amp;&amp; last.item != null)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">transient</span> Node&lt;E&gt; last;</span><br></pre></td></tr></table></figure><p>å³ç±»ä¼¼å¦‚ä¸‹å½¢å¼ï¼š</p><p><code>first.prev == null &amp;&amp; first.next == a</code> &lt;â€”â€”&gt; <code>a.prev = first&amp;&amp; a.next == last</code> &lt;â€”â€”&gt; <code>last.prev == a &amp;&amp; last.next == null</code></p><h2 id="add"><a href="#add" class="headerlink" title="add"></a>add</h2><p>æ¯æ¬¡æ’å…¥éƒ½æ˜¯ç§»åŠ¨æŒ‡é’ˆï¼Œå’Œ <code>ArrayList</code> çš„æ‹·è´æ•°ç»„ç›¸æ¯”æ•ˆç‡æå‡ä¸å°‘ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Appends the specified element to the end of this list.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;This method is equivalent to &#123;<span class="doctag">@link</span> #addLast&#125;.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> e element to be appended to this list</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="doctag">@code</span> true&#125; (as specified by &#123;<span class="doctag">@link</span> Collection#add&#125;)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">add</span><span class="params">(E e)</span> </span>&#123;</span><br><span class="line">    linkLast(e);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Links e as last element.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">linkLast</span><span class="params">(E e)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; l = last;</span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; newNode = <span class="keyword">new</span> Node&lt;&gt;(l, e, <span class="keyword">null</span>);</span><br><span class="line">    last = newNode;</span><br><span class="line">    <span class="keyword">if</span> (l == <span class="keyword">null</span>)</span><br><span class="line">        first = newNode;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        l.next = newNode;</span><br><span class="line">    size++;</span><br><span class="line">    modCount++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="get"><a href="#get" class="headerlink" title="get"></a>get</h2><p>åˆ©ç”¨äº†åŒå‘é“¾è¡¨çš„ç‰¹æ€§ï¼Œä½¿ç”¨ç©ºé—´æ¥æ¢å–æ—¶é—´ã€‚å¦‚æœç´¢å¼•å€¼å°äºé“¾è¡¨å¤§å°çš„ä¸€åŠï¼Œå³ <code>index</code> ç¦»é“¾è¡¨å¤´æ¯”è¾ƒè¿‘ï¼Œå°±ä»èŠ‚ç‚¹å¤´éƒ¨éå†ï¼Œå¦åˆ™å°†ä»å°¾ç»“ç‚¹å¼€å§‹éå†ã€‚è¿™å°±å¯¼è‡´æ•ˆç‡é™ä½ï¼Œç‰¹åˆ«æ˜¯å½“ <code>index</code> è¶Šæ¥è¿‘ <code>size</code> çš„ä¸­é—´å€¼æ—¶ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Returns the element at the specified position in this list.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> index index of the element to return</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> the element at the specified position in this list</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> IndexOutOfBoundsException &#123;<span class="doctag">@inheritDoc</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> E <span class="title">get</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">    checkElementIndex(index);</span><br><span class="line">    <span class="keyword">return</span> node(index).item;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Returns the (non-null) Node at the specified element index.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function">Node&lt;E&gt; <span class="title">node</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// assert isElementIndex(index);</span></span><br><span class="line">    <span class="keyword">if</span> (index &lt; (size &gt;&gt; <span class="number">1</span>)) &#123;</span><br><span class="line">        Node&lt;E&gt; x = first;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; index; i++)</span><br><span class="line">            x = x.next;</span><br><span class="line">        <span class="keyword">return</span> x;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        Node&lt;E&gt; x = last;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = size - <span class="number">1</span>; i &gt; index; i--)</span><br><span class="line">            x = x.prev;</span><br><span class="line">        <span class="keyword">return</span> x;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><ul><li>LinkedList æ’å…¥ï¼Œåˆ é™¤éƒ½æ˜¯ç§»åŠ¨æŒ‡é’ˆæ•ˆç‡å¾ˆé«˜ã€‚</li><li>æŸ¥æ‰¾éœ€è¦è¿›è¡Œéå†æŸ¥è¯¢ï¼Œæ•ˆç‡è¾ƒä½ã€‚</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;code&gt;LinkedList&lt;/code&gt; åº•å±‚æ˜¯åŸºäºåŒå‘é“¾è¡¨ &lt;code&gt;Deque&lt;/code&gt; å®ç°çš„ï¼Œä¹Ÿæ˜¯å®ç°äº† &lt;code&gt;List&lt;/code&gt; æ¥å£ï¼Œæ‰€ä»¥ä¹Ÿæ‹¥æœ‰ List çš„ä¸€äº›ç‰¹ç‚¹ï¼Œå‡ºåœºç‡ä¸é«˜ï¼Œäº†è§£ä¸€ä¸‹ã€‚&lt;/p&gt;&lt;figure class=&quot;highli
      
    
    </summary>
    
      <category term="Java" scheme="https://muhouer.github.io/categories/Java/"/>
    
      <category term="æºç å­¦ä¹ " scheme="https://muhouer.github.io/categories/Java/%E6%BA%90%E7%A0%81%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="LinkedList" scheme="https://muhouer.github.io/tags/LinkedList/"/>
    
  </entry>
  
  <entry>
    <title>HashMapåˆ†æ</title>
    <link href="https://muhouer.github.io/posts/9c86c04c/"/>
    <id>https://muhouer.github.io/posts/9c86c04c/</id>
    <published>2019-08-18T01:34:00.000Z</published>
    <updated>2019-08-18T06:07:55.791Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>Map è¿™æ ·çš„ <code>Key Value</code> åœ¨è½¯ä»¶å¼€å‘ä¸­æ˜¯éå¸¸ç»å…¸çš„ç»“æ„ï¼Œå¸¸ç”¨äºåœ¨å†…å­˜ä¸­å­˜æ”¾æ•°æ®ã€‚Java ä¸­æœ€å¸¸ç”¨çš„ Map æœ‰ä¸¤ç§ï¼Œé¦–å…ˆæ˜¯ HashMap ï¼Œå…¶æ¬¡æ˜¯ ConcurrentHashMap ã€‚</p><h2 id="HashMap"><a href="#HashMap" class="headerlink" title="HashMap"></a>HashMap</h2><p>ä»æ•´ä¸ª HashMap çš„å£°æ˜å¯ä»¥çœ‹å‡ºå®ƒå†…éƒ¨æ˜¯åŸºäº<strong>æ•°ç»„</strong> + <strong>é“¾è¡¨</strong>å®ç°çš„ï¼Œä¸è¿‡åœ¨ jdk1.7 å’Œ 1.8 ä¸­å…·ä½“å®ç°ç¨æœ‰ä¸åŒã€‚</p><h3 id="åŸºäº-1-7"><a href="#åŸºäº-1-7" class="headerlink" title="åŸºäº 1.7"></a>åŸºäº 1.7</h3><p>HashMap åœ¨ jdk1.7 ä¸­çš„æ•°æ®ç»“æ„å›¾ï¼š<br><img src="/images/5cd1d2be77958.png" width="900px" height="600px" align="center"><br>é¦–å…ˆæ¥çœ‹ jdk1.7 ä¸­çš„å®ç°ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEFAULT_INITIAL_CAPACITY = <span class="number">1</span> &lt;&lt; <span class="number">4</span>; <span class="comment">//åˆå§‹åŒ–æ¡¶å¤§å°ï¼Œå› ä¸ºåº•å±‚æ˜¯æ•°ç»„ï¼Œæ‰€ä»¥è¿™æ˜¯æ•°ç»„é»˜è®¤çš„å¤§å°ã€‚é»˜è®¤å¤§å°16</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> MAXIMUM_CAPACITY = <span class="number">1</span> &lt;&lt; <span class="number">30</span>;    <span class="comment">//æ¡¶æœ€å¤§å®¹é‡</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">float</span> DEFAULT_LOAD_FACTOR = <span class="number">0.75f</span>; <span class="comment">//é»˜è®¤çš„è´Ÿè½½å› å­</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> Entry&lt;?,?&gt;[] EMPTY_TABLE = &#123;&#125;;</span><br><span class="line"><span class="keyword">transient</span> Entry&lt;K,V&gt;[] table = (Entry&lt;K,V&gt;[]) EMPTY_TABLE; <span class="comment">//çœŸæ­£å­˜æ”¾æ•°æ®çš„æ•°ç»„</span></span><br><span class="line"><span class="keyword">transient</span> <span class="keyword">int</span> size;      <span class="comment">//å­˜æ”¾key-valueå…ƒç´ çš„ä¸ªæ•°</span></span><br><span class="line"><span class="keyword">int</span> threshold;           <span class="comment">//æ¡¶å®¹é‡å¤§å°ï¼Œå¯åœ¨åˆå§‹åŒ–æ—¶æ˜¾å¼æŒ‡å®šï¼Œæ‰©å®¹åˆ¤å®šthreshold = capacity * loadFactorï¼Œé»˜è®¤ä¸º0.75 * 16 = 12</span></span><br><span class="line"><span class="keyword">final</span> <span class="keyword">float</span> loadFactor;  <span class="comment">//è´Ÿè½½å› å­ï¼Œå¯åœ¨åˆå§‹åŒ–æ—¶æ˜¾å¼æŒ‡å®šã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿™ä¸¤ä¸ªå±æ€§æ˜¯åœ¨æŠ½è±¡ç±»AbstractMapä¸­å®šä¹‰çš„</span></span><br><span class="line"><span class="keyword">transient</span> <span class="keyword">volatile</span> Set&lt;K&gt;        keySet = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">transient</span> <span class="keyword">volatile</span> Collection&lt;V&gt; values = <span class="keyword">null</span>;</span><br></pre></td></tr></table></figure><blockquote><p>Map åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ä¸æ–­çš„å¾€é‡Œé¢å­˜æ”¾æ•°æ®ï¼Œå½“æ•°é‡è¾¾åˆ°äº† threshold å°±éœ€è¦å°†å½“å‰å®¹é‡è¿›è¡Œæ‰©å®¹ï¼Œè€Œæ‰©å®¹è¿™ä¸ªè¿‡ç¨‹æ¶‰åŠåˆ° rehashã€å¤åˆ¶æ•°æ®ç­‰æ“ä½œï¼Œæ‰€ä»¥éå¸¸æ¶ˆè€—æ€§èƒ½ã€‚å› æ­¤é€šå¸¸å»ºè®®èƒ½<strong>æå‰é¢„ä¼° HashMap çš„å¤§å°æœ€å¥½ï¼Œå°½é‡çš„å‡å°‘æ‰©å®¹å¸¦æ¥çš„æ€§èƒ½æŸè€—</strong>ã€‚</p></blockquote><p>æ ¹æ®ä»£ç å¯ä»¥çœ‹åˆ°å…¶å®çœŸæ­£å­˜æ”¾æ•°æ®çš„æ˜¯</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">transient</span> Entry&lt;K,V&gt;[] table = (Entry&lt;K,V&gt;[]) EMPTY_TABLE;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæ•°ç»„ï¼Œé‚£ä¹ˆå®ƒåˆæ˜¯å¦‚ä½•å®šä¹‰çš„å‘¢ï¼Ÿ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Entry æ˜¯ HashMap ä¸­çš„ä¸€ä¸ªå†…éƒ¨ç±»</span></span><br><span class="line"><span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Entry</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt; <span class="keyword">implements</span> <span class="title">Map</span>.<span class="title">Entry</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">final</span> K key;     <span class="comment">// keyï¼Œå†™å…¥æ—¶çš„é”®</span></span><br><span class="line">    V value;         <span class="comment">// valueï¼Œå€¼</span></span><br><span class="line">    Entry&lt;K,V&gt; next; <span class="comment">// ç”¨äºå®ç°é“¾è¡¨ç»“æ„ï¼Œå½“æœ‰hashå†²çªï¼Œå­˜å‚¨çš„ä¸‹ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">int</span> hash;  <span class="comment">// å½“å‰ key çš„ hashcode</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Creates new entry.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    Entry(<span class="keyword">int</span> h, K k, V v, Entry&lt;K,V&gt; n) &#123;</span><br><span class="line">        value = v;</span><br><span class="line">        next = n;</span><br><span class="line">        key = k;</span><br><span class="line">        hash = h;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> K <span class="title">getKey</span><span class="params">()</span> </span>&#123;<span class="keyword">return</span> key;&#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> V <span class="title">getValue</span><span class="params">()</span> </span>&#123;<span class="keyword">return</span> value;&#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> V <span class="title">setValue</span><span class="params">(V newValue)</span> </span>&#123;</span><br><span class="line">      V oldValue = value;</span><br><span class="line">      value = newValue;</span><br><span class="line">      <span class="keyword">return</span> oldValue;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šå³ä¸º HashMap çš„åŸºæœ¬ç»“æ„ï¼Œæ¥ä¸‹æ¥æ¥çœ‹å†™å…¥å’Œè·å–æ–¹æ³•ï¼š</p><h4 id="put-æ–¹æ³•"><a href="#put-æ–¹æ³•" class="headerlink" title="put æ–¹æ³•"></a>put æ–¹æ³•</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">public V put(K key, V value) &#123;</span><br><span class="line">    if (table == EMPTY_TABLE) &#123; // åˆ¤æ–­å½“å‰æ•°ç»„æ˜¯å¦éœ€è¦åˆå§‹åŒ–ã€‚</span><br><span class="line">        inflateTable(threshold);</span><br><span class="line">    &#125;</span><br><span class="line">    if (key == null) // å¦‚æœ key ä¸ºç©ºï¼Œåˆ™ put ä¸€ä¸ªç©ºå€¼è¿›å»</span><br><span class="line">        return putForNullKey(value); // </span><br><span class="line">    int hash = hash(key); // è®¡ç®—æ ¹æ® key è®¡ç®—å‡º hash å€¼------</span><br><span class="line">    int i = indexFor(hash, table.length); // æ ¹æ®è®¡ç®—å‡ºçš„ hash å€¼å®šä½å‡ºæ‰€åœ¨æ¡¶</span><br><span class="line">    for (Entry&lt;K,V&gt; e = table[i]; e != null; e = e.next) &#123; // å¦‚æœæ¡¶æ˜¯ä¸€ä¸ªé“¾è¡¨åˆ™ï¼Œéœ€è¦éå†åˆ¤æ–­</span><br><span class="line">        Object k;</span><br><span class="line">        // hash å€¼ã€key æ˜¯å¦å’Œä¼ å…¥ key ç›¸ç­‰ï¼Œå¦‚æœç›¸ç­‰åˆ™è¿›è¡Œè¦†ç›–ï¼Œå¹¶è¿”å›åŸæ¥çš„å€¼ã€‚</span><br><span class="line">        if (e.hash == hash &amp;&amp; ((k = e.key) == key || key.equals(k))) &#123;</span><br><span class="line">            V oldValue = e.value;</span><br><span class="line">            e.value = value;</span><br><span class="line">            e.recordAccess(this);</span><br><span class="line">            return oldValue;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    // æ¡¶æ˜¯ç©ºçš„ï¼Œè¯´æ˜å½“å‰ä½ç½®æ²¡æœ‰æ•°æ®å­˜å…¥</span><br><span class="line">    modCount++;</span><br><span class="line">    addEntry(hash, key, value, i); // æ–°å¢ä¸€ä¸ª Entry å¯¹è±¡å†™å…¥å½“å‰ä½ç½®</span><br><span class="line">    return null;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">static int indexFor(int h, int length) &#123;</span><br><span class="line">    // åˆå§‹å®¹é‡æ˜¯ä¸€ä¸ªå¶æ•°ï¼Œå½“ length-1 çš„æ—¶å€™ï¼Œè¿™ä¸ªæ•°çš„æœ‰æ•ˆäºŒè¿›åˆ¶ä½éƒ½æ˜¯1ã€‚</span><br><span class="line">    // åªè¦ä¿è¯äº† h çš„åˆ†æ•£æ€§å°±è¡Œã€‚&amp;ç”¨æ¥å–modè¿ç®—ï¼Œæ•ˆç‡æ¯”%é«˜ã€‚</span><br><span class="line">    return h &amp; (length-1);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void addEntry(int hash, K key, V value, int bucketIndex) &#123;</span><br><span class="line">    if ((size &gt;= threshold) &amp;&amp; (null != table[bucketIndex])) &#123; // åˆ¤æ–­æ˜¯å¦éœ€è¦æ‰©å®¹</span><br><span class="line">        resize(2 * table.length); // ä¸¤å€æ‰©å……</span><br><span class="line">        hash = (null != key) ? hash(key) : 0; // å½“å‰çš„ key é‡æ–° hash</span><br><span class="line">        bucketIndex = indexFor(hash, table.length); // é‡æ–°å®šä½</span><br><span class="line">    &#125;</span><br><span class="line">    createEntry(hash, key, value, bucketIndex);</span><br><span class="line">&#125;</span><br><span class="line">void createEntry(int hash, K key, V value, int bucketIndex) &#123;</span><br><span class="line">    // å°†å½“å‰ä½ç½®çš„æ¡¶ä¼ å…¥åˆ°æ–°å»ºçš„æ¡¶ä¸­ï¼Œå¦‚æœå½“å‰æ¡¶æœ‰å€¼å°±ä¼šåœ¨ä½ç½®å½¢æˆé“¾è¡¨</span><br><span class="line">    Entry&lt;K,V&gt; e = table[bucketIndex];</span><br><span class="line">    table[bucketIndex] = new Entry&lt;&gt;(hash, key, value, e);</span><br><span class="line">    size++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="get-æ–¹æ³•"><a href="#get-æ–¹æ³•" class="headerlink" title="get æ–¹æ³•"></a>get æ–¹æ³•</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> V <span class="title">get</span><span class="params">(Object key)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (key == <span class="keyword">null</span>)</span><br><span class="line">        <span class="keyword">return</span> getForNullKey();</span><br><span class="line">    Entry&lt;K,V&gt; entry = getEntry(key);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span> == entry ? <span class="keyword">null</span> : entry.getValue();</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">final</span> Entry&lt;K,V&gt; <span class="title">getEntry</span><span class="params">(Object key)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (size == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> hash = (key == <span class="keyword">null</span>) ? <span class="number">0</span> : hash(key); <span class="comment">// æ ¹æ® key è®¡ç®—å‡º hash å€¼</span></span><br><span class="line">    <span class="keyword">for</span> (Entry&lt;K,V&gt; e = table[indexFor(hash, table.length)]; </span><br><span class="line">         e != <span class="keyword">null</span>;</span><br><span class="line">         e = e.next) &#123; <span class="comment">// å®šä½åˆ°å…·ä½“çš„æ¡¶ä¸­</span></span><br><span class="line">        Object k;</span><br><span class="line">        <span class="keyword">if</span> (e.hash == hash &amp;&amp;</span><br><span class="line">            ((k = e.key) == key || (key != <span class="keyword">null</span> &amp;&amp; key.equals(k)))) </span><br><span class="line">            <span class="keyword">return</span> e; <span class="comment">//  key åŠ hash å€¼ç›¸ç­‰æ—¶å€™å°±è¿”å›å¯¹åº”çš„å€¼</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>; <span class="comment">// è¿”å› null </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="é“¾è¡¨æ­»å¾ªç¯"><a href="#é“¾è¡¨æ­»å¾ªç¯" class="headerlink" title="é“¾è¡¨æ­»å¾ªç¯"></a>é“¾è¡¨æ­»å¾ªç¯</h4><p><a href="https://blog.csdn.net/xyh930929/article/details/84777301" target="_blank" rel="noopener">HashMapç”±å¹¶å‘å¼•èµ·çš„é“¾è¡¨æ­»å¾ªç¯</a></p><h3 id="åŸºäº-1-8"><a href="#åŸºäº-1-8" class="headerlink" title="åŸºäº 1.8"></a>åŸºäº 1.8</h3><p>HashMap åœ¨ jdk1.7 çš„å®ç°ä¸­æœ‰ä¸ªæ˜æ˜¾ç¼ºç‚¹ï¼š</p><blockquote><p>å½“ Hash å†²çªä¸¥é‡æ—¶ï¼Œåœ¨æ¡¶ä¸Šå½¢æˆçš„é“¾è¡¨ä¼šå˜çš„è¶Šæ¥è¶Šé•¿ï¼Œè¿™æ ·åœ¨æŸ¥è¯¢æ—¶çš„æ•ˆç‡å°±ä¼šè¶Šæ¥è¶Šä½ï¼›æ—¶é—´å¤æ‚åº¦ä¸º <code>O(N)</code>ã€‚</p></blockquote><p>å› æ­¤ 1.8 ä¸­å¯¹å¤§é“¾è¡¨åšäº†ä¼˜åŒ–ï¼Œä¿®æ”¹ä¸ºçº¢é»‘æ ‘ä¹‹åæŸ¥è¯¢æ•ˆç‡ç›´æ¥æé«˜åˆ°äº† <code>O(logn)</code>ã€‚</p><p>è¯ä¸å¤šè¯´ï¼Œä¸ŠğŸï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEFAULT_INITIAL_CAPACITY = <span class="number">1</span> &lt;&lt; <span class="number">4</span>; <span class="comment">// aka 16</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> MAXIMUM_CAPACITY = <span class="number">1</span> &lt;&lt; <span class="number">30</span>;</span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">float</span> DEFAULT_LOAD_FACTOR = <span class="number">0.75f</span>;</span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> TREEIFY_THRESHOLD = <span class="number">8</span>;</span><br><span class="line"><span class="keyword">transient</span> Node&lt;K,V&gt;[] table;</span><br><span class="line"><span class="keyword">transient</span> Set&lt;Map.Entry&lt;K,V&gt;&gt; entrySet;</span><br><span class="line"><span class="keyword">transient</span> <span class="keyword">int</span> size;</span><br></pre></td></tr></table></figure><p>å’Œ 1.7 å¤§ä½“ä¸Šéƒ½å·®ä¸å¤šï¼Œè¿˜æ˜¯æœ‰å‡ ä¸ªé‡è¦çš„åŒºåˆ«ï¼š</p><ul><li><code>TREEIFY_THRESHOLD</code> ç”¨äºåˆ¤æ–­æ˜¯å¦éœ€è¦å°†é“¾è¡¨è½¬æ¢ä¸ºçº¢é»‘æ ‘çš„é˜ˆå€¼ã€‚</li><li><code>Entry</code> ä¿®æ”¹ä¸º <code>Node</code>ã€‚</li></ul><p>Node çš„æ ¸å¿ƒç»„æˆå…¶å®ä¹Ÿæ˜¯å’Œ 1.7 ä¸­çš„ Entry ä¸€æ ·ï¼Œå­˜æ”¾çš„éƒ½æ˜¯ <code>key value hashcode next</code> ç­‰æ•°æ®ã€‚</p><h4 id="put-æ–¹æ³•-1"><a href="#put-æ–¹æ³•-1" class="headerlink" title="put æ–¹æ³•"></a>put æ–¹æ³•</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">final</span> V <span class="title">putVal</span><span class="params">(<span class="keyword">int</span> hash, K key, V value, <span class="keyword">boolean</span> onlyIfAbsent,</span></span></span><br><span class="line"><span class="function"><span class="params">                   <span class="keyword">boolean</span> evict)</span> </span>&#123;</span><br><span class="line">        Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; p; <span class="keyword">int</span> n, i;</span><br><span class="line">        <span class="keyword">if</span> ((tab = table) == <span class="keyword">null</span> || (n = tab.length) == <span class="number">0</span>)</span><br><span class="line">            n = (tab = resize()).length; <span class="comment">// å½“å‰æ¡¶ä¸ºç©ºï¼Œè¿›è¡Œåˆå§‹åŒ–ï¼ˆresize ä¸­ä¼šåˆ¤æ–­æ˜¯å¦è¿›è¡Œåˆå§‹åŒ–ï¼‰</span></span><br><span class="line">        <span class="keyword">if</span> ((p = tab[i = (n - <span class="number">1</span>) &amp; hash]) == <span class="keyword">null</span>) <span class="comment">// æ ¹æ®å½“å‰ key çš„ hash å€¼å®šä½åˆ°å…·ä½“çš„æ¡¶ä¸­</span></span><br><span class="line">            tab[i] = newNode(hash, key, value, <span class="keyword">null</span>); <span class="comment">// ä¸ºç©ºè¡¨æ˜æ²¡æœ‰ Hash å†²çªå°±ç›´æ¥åœ¨å½“å‰ä½ç½®åˆ›å»ºä¸€ä¸ªæ–°æ¡¶</span></span><br><span class="line">        <span class="keyword">else</span> &#123; <span class="comment">// ä¸ä¸ºç©ºï¼Œæœ‰ Hash å†²çª</span></span><br><span class="line">            Node&lt;K,V&gt; e; K k;</span><br><span class="line">            <span class="keyword">if</span> (p.hash == hash &amp;&amp;</span><br><span class="line">                ((k = p.key) == key || (key != <span class="keyword">null</span> &amp;&amp; key.equals(k))))</span><br><span class="line">                e = p; <span class="comment">// æ¯”è¾ƒå½“å‰æ¡¶ä¸­çš„ keyã€key çš„ hash å€¼ä¸å†™å…¥çš„ key æ˜¯å¦ç›¸ç­‰ï¼Œç›¸ç­‰å°±èµ‹å€¼ç»™ e</span></span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (p <span class="keyword">instanceof</span> TreeNode) <span class="comment">// å¦‚æœå½“å‰æ¡¶ä¸ºçº¢é»‘æ ‘ï¼Œé‚£å°±è¦æŒ‰ç…§çº¢é»‘æ ‘çš„æ–¹å¼å†™å…¥æ•°æ®</span></span><br><span class="line">                e = ((TreeNode&lt;K,V&gt;)p).putTreeVal(<span class="keyword">this</span>, tab, hash, key, value);</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">// å¦‚æœæ˜¯ä¸ªé“¾è¡¨ï¼Œå°±éœ€è¦å°†å½“å‰çš„ keyã€value å°è£…æˆä¸€ä¸ªæ–°èŠ‚ç‚¹å†™å…¥åˆ°å½“å‰æ¡¶çš„åé¢ï¼ˆå½¢æˆé“¾è¡¨ï¼‰</span></span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> binCount = <span class="number">0</span>; ; ++binCount) &#123;</span><br><span class="line">                    <span class="keyword">if</span> ((e = p.next) == <span class="keyword">null</span>) &#123;</span><br><span class="line">                        p.next = newNode(hash, key, value, <span class="keyword">null</span>);</span><br><span class="line">                        <span class="comment">// åˆ¤æ–­å½“å‰é“¾è¡¨çš„å¤§å°æ˜¯å¦å¤§äºé¢„è®¾çš„é˜ˆå€¼ï¼Œå¤§äºæ—¶å°±è¦è½¬æ¢ä¸ºçº¢é»‘æ ‘</span></span><br><span class="line">                        <span class="keyword">if</span> (binCount &gt;= TREEIFY_THRESHOLD - <span class="number">1</span>) <span class="comment">// -1 for 1st</span></span><br><span class="line">                            treeifyBin(tab, hash);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="comment">// å¦‚æœåœ¨éå†è¿‡ç¨‹ä¸­æ‰¾åˆ° key ç›¸åŒæ—¶ç›´æ¥é€€å‡ºéå†</span></span><br><span class="line">                    <span class="keyword">if</span> (e.hash == hash &amp;&amp;</span><br><span class="line">                        ((k = e.key) == key || (key != <span class="keyword">null</span> &amp;&amp; key.equals(k))))</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    p = e;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (e != <span class="keyword">null</span>) &#123; <span class="comment">// å­˜åœ¨ç›¸åŒçš„ key ï¼Œéœ€è¦å°†å€¼è¦†ç›–</span></span><br><span class="line">                V oldValue = e.value;</span><br><span class="line">                <span class="keyword">if</span> (!onlyIfAbsent || oldValue == <span class="keyword">null</span>)</span><br><span class="line">                    e.value = value;</span><br><span class="line">                afterNodeAccess(e);</span><br><span class="line">                <span class="keyword">return</span> oldValue;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        ++modCount;</span><br><span class="line">        <span class="keyword">if</span> (++size &gt; threshold) <span class="comment">// åˆ¤æ–­æ˜¯å¦éœ€è¦è¿›è¡Œæ‰©å®¹</span></span><br><span class="line">            resize();</span><br><span class="line">        afterNodeInsertion(evict);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h4 id="get-æ–¹æ³•-1"><a href="#get-æ–¹æ³•-1" class="headerlink" title="get æ–¹æ³•"></a>get æ–¹æ³•</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> V <span class="title">get</span><span class="params">(Object key)</span> </span>&#123;</span><br><span class="line">        Node&lt;K,V&gt; e;</span><br><span class="line">        <span class="keyword">return</span> (e = getNode(hash(key), key)) == <span class="keyword">null</span> ? <span class="keyword">null</span> : e.value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">final</span> Node&lt;K,V&gt; <span class="title">getNode</span><span class="params">(<span class="keyword">int</span> hash, Object key)</span> </span>&#123;</span><br><span class="line">        Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; first, e; <span class="keyword">int</span> n; K k;</span><br><span class="line">        <span class="comment">// å°† key hash ä¹‹åå–å¾—æ‰€å®šä½çš„æ¡¶</span></span><br><span class="line">        <span class="keyword">if</span> ((tab = table) != <span class="keyword">null</span> &amp;&amp; (n = tab.length) &gt; <span class="number">0</span> &amp;&amp;</span><br><span class="line">            (first = tab[(n - <span class="number">1</span>) &amp; hash]) != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="comment">// åˆ¤æ–­æ¡¶çš„ç¬¬ä¸€ä¸ªä½ç½®çš„ key æ˜¯å¦ä¸ºæŸ¥è¯¢çš„ keyï¼Œæ˜¯å°±ç›´æ¥è¿”å› valueã€‚</span></span><br><span class="line">            <span class="keyword">if</span> (first.hash == hash &amp;&amp; <span class="comment">// always check first node</span></span><br><span class="line">                ((k = first.key) == key || (key != <span class="keyword">null</span> &amp;&amp; key.equals(k))))</span><br><span class="line">                <span class="keyword">return</span> first;</span><br><span class="line">            <span class="keyword">if</span> ((e = first.next) != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (first <span class="keyword">instanceof</span> TreeNode) <span class="comment">// çº¢é»‘æ ‘</span></span><br><span class="line">                    <span class="comment">// æŒ‰ç…§æ ‘çš„æŸ¥æ‰¾æ–¹å¼è¿”å›å€¼</span></span><br><span class="line">                    <span class="keyword">return</span> ((TreeNode&lt;K,V&gt;)first).getTreeNode(hash, key);</span><br><span class="line">                <span class="keyword">do</span> &#123; <span class="comment">// é“¾è¡¨</span></span><br><span class="line">                    <span class="comment">// æŒ‰ç…§é“¾è¡¨çš„æ–¹å¼éå†åŒ¹é…è¿”å›å€¼</span></span><br><span class="line">                    <span class="keyword">if</span> (e.hash == hash &amp;&amp;</span><br><span class="line">                        ((k = e.key) == key || (key != <span class="keyword">null</span> &amp;&amp; key.equals(k))))</span><br><span class="line">                        <span class="keyword">return</span> e;</span><br><span class="line">                &#125; <span class="keyword">while</span> ((e = e.next) != <span class="keyword">null</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>; <span class="comment">// æ¡¶ä¸ºç©ºåˆ™ç›´æ¥è¿”å› null </span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="çº¿ç¨‹ä¸å®‰å…¨"><a href="#çº¿ç¨‹ä¸å®‰å…¨" class="headerlink" title="çº¿ç¨‹ä¸å®‰å…¨"></a>çº¿ç¨‹ä¸å®‰å…¨</h3><p>HashMap åœ¨å¹¶å‘æ—¶å¯èƒ½å‡ºç°çš„é—®é¢˜ä¸»è¦æœ‰ä¸‰ä¸ªæ–¹é¢ï¼š</p><ul><li><p>å¦‚æœå¤šä¸ªçº¿ç¨‹åŒæ—¶ä½¿ç”¨ put æ–¹æ³•æ·»åŠ å…ƒç´ ï¼Œè€Œä¸”å‡è®¾æ­£å¥½å­˜åœ¨ä¸¤ä¸ª put çš„ key å‘ç”Ÿäº†ç¢°æ’ï¼ˆæ ¹æ® hash å€¼è®¡ç®—çš„ bucket ä¸€æ ·ï¼‰ï¼Œé‚£ä¹ˆæ ¹æ® HashMap çš„å®ç°ï¼Œè¿™ä¸¤ä¸ª key ä¼šæ·»åŠ åˆ°æ•°ç»„çš„åŒä¸€ä¸ªä½ç½®ï¼Œè¿™æ ·æœ€ç»ˆå°±ä¼šå‘ç”Ÿå…¶ä¸­ä¸€ä¸ªçº¿ç¨‹ put çš„æ•°æ®è¢«è¦†ç›–ã€‚</p></li><li><p>å¦‚æœå¤šä¸ªçº¿ç¨‹åŒæ—¶æ£€æµ‹åˆ°å…ƒç´ ä¸ªæ•°è¶…è¿‡ thresholdï¼Œè¿™æ ·å°±ä¼šå‘ç”Ÿå¤šä¸ªçº¿ç¨‹åŒæ—¶å¯¹ Node æ•°ç»„è¿›è¡Œæ‰©å®¹ï¼Œéƒ½åœ¨é‡æ–°è®¡ç®—å…ƒç´ ä½ç½®ä»¥åŠå¤åˆ¶æ•°æ®ï¼Œä½†æ˜¯æœ€ç»ˆåªæœ‰ä¸€ä¸ªçº¿ç¨‹æ‰©å®¹åçš„æ•°ç»„ä¼šèµ‹ç»™ tableï¼Œä¹Ÿå°±æ˜¯è¯´å…¶ä»–çº¿ç¨‹çš„éƒ½ä¼šä¸¢å¤±ï¼Œå¹¶ä¸”å„è‡ªçº¿ç¨‹ put çš„æ•°æ®ä¹Ÿä¸¢å¤±ã€‚</p></li></ul><h3 id="éå†æ–¹å¼"><a href="#éå†æ–¹å¼" class="headerlink" title="éå†æ–¹å¼"></a>éå†æ–¹å¼</h3><p>è¿˜æœ‰ä¸€ä¸ªå€¼å¾—æ³¨æ„çš„æ˜¯ HashMap çš„éå†æ–¹å¼ï¼Œé€šå¸¸æœ‰ä»¥ä¸‹å‡ ç§ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Iterator&lt;Map.Entry&lt;String, Integer&gt;&gt; entryIterator = map.entrySet().iterator();</span><br><span class="line"><span class="keyword">while</span> (entryIterator.hasNext()) &#123;</span><br><span class="line">    Map.Entry&lt;String, Integer&gt; next = entryIterator.next();</span><br><span class="line">&#125;</span><br><span class="line">        </span><br><span class="line">Iterator&lt;String&gt; iterator = map.keySet().iterator();</span><br><span class="line"><span class="keyword">while</span> (iterator.hasNext())&#123;</span><br><span class="line">    String key = iterator.next();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>å¼ºçƒˆå»ºè®®</code>ä½¿ç”¨ç¬¬ä¸€ç§ EntrySet è¿›è¡Œéå†ã€‚ç¬¬ä¸€ç§å¯ä»¥æŠŠ key value åŒæ—¶å–å‡ºï¼Œç¬¬äºŒç§è¿˜å¾—éœ€è¦é€šè¿‡ key å–ä¸€æ¬¡ valueï¼Œæ•ˆç‡è¾ƒä½ã€‚</p><blockquote><p>æ— è®ºæ˜¯ 1.7 è¿˜æ˜¯ 1.8 å…¶å®éƒ½èƒ½çœ‹å‡º JDK æ²¡æœ‰å¯¹å®ƒåšä»»ä½•çš„åŒæ­¥æ“ä½œï¼Œæ‰€ä»¥å¹¶å‘ä¼šå‡ºé—®é¢˜ï¼Œç”šè‡³ 1.7 ä¸­å‡ºç°æ­»å¾ªç¯å¯¼è‡´ç³»ç»Ÿä¸å¯ç”¨ï¼ˆ1.8 å·²ç»ä¿®å¤æ­»å¾ªç¯é—®é¢˜ï¼‰ã€‚</p></blockquote><p>å› æ­¤ JDK æ¨å‡ºäº†ä¸“é¡¹ä¸“ç”¨çš„ ConcurrentHashMap ï¼Œè¯¥ç±»ä½äº <code>java.util.concurrent</code> åŒ…ä¸‹ï¼Œä¸“é—¨ç”¨äºè§£å†³å¹¶å‘é—®é¢˜ã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;Map è¿™æ ·çš„ &lt;code&gt;Key Value&lt;/code&gt; åœ¨è½¯ä»¶å¼€å‘ä¸­æ˜¯éå¸¸ç»å…¸çš„ç»“æ„ï¼Œå¸¸ç”¨äºåœ¨å†…å­˜ä¸­å­˜æ”¾æ•°æ®ã€‚Java ä¸­æœ€å¸¸ç”¨çš„ M
      
    
    </summary>
    
      <category term="Java" scheme="https://muhouer.github.io/categories/Java/"/>
    
      <category term="æºç å­¦ä¹ " scheme="https://muhouer.github.io/categories/Java/%E6%BA%90%E7%A0%81%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="HashMap" scheme="https://muhouer.github.io/tags/HashMap/"/>
    
  </entry>
  
  <entry>
    <title>Stringåˆ†æ</title>
    <link href="https://muhouer.github.io/posts/4a48cd1d/"/>
    <id>https://muhouer.github.io/posts/4a48cd1d/</id>
    <published>2019-08-18T01:31:00.000Z</published>
    <updated>2019-08-18T01:33:43.976Z</updated>
    
    <content type="html"><![CDATA[<p><code>String</code> è¿™ä¸ªç±»æ˜¯æˆ‘ä»¬åœ¨å†™ Java ä»£ç ä¸­ç”¨å¾—æœ€å¤šçš„ä¸€ä¸ªç±»ï¼Œæ²¡æœ‰ä¹‹ä¸€ï¼Œä»Šå¤©æˆ‘ä»¬å°±è®²è®²å®ƒã€‚</p><h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p><code>String</code> å¹¶ä¸æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼Œè€Œæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶ä¸”æ˜¯ä¸å¯å˜çš„å¯¹è±¡ã€‚</p><p>æŸ¥çœ‹æºç å°±ä¼šå‘ç° <code>String</code> ç±»ä¸º<code>final</code> å‹çš„(å½“ç„¶ä¹Ÿä¸å¯è¢«ç»§æ‰¿)ï¼Œè€Œä¸”é€šè¿‡æŸ¥çœ‹ JDK æ–‡æ¡£ä¼šå‘ç°å‡ ä¹æ¯ä¸€ä¸ªä¿®æ”¹ <code>String</code> å¯¹è±¡çš„æ“ä½œï¼Œå®é™…ä¸Šéƒ½æ˜¯åˆ›å»ºäº†ä¸€ä¸ªå…¨æ–°çš„ <code>String</code> å¯¹è±¡ã€‚</p><p><code>String</code> ç±»å®ç°äº† <code>Serializable</code>ï¼Œ<code>Comparable</code>ï¼Œ<code>CharSequence</code>æ¥å£ï¼Œè¢« <code>final</code> ä¿®é¥°ã€‚å†…éƒ¨ç»´æŠ¤äº†ä¸€ä¸ªå­—ç¬¦æ•°ç»„ã€‚</p><h2 id="å¸¸ç”¨æ–¹æ³•"><a href="#å¸¸ç”¨æ–¹æ³•" class="headerlink" title="å¸¸ç”¨æ–¹æ³•"></a>å¸¸ç”¨æ–¹æ³•</h2><h3 id="å­—ç¬¦ä¸²æ¯”è¾ƒ"><a href="#å­—ç¬¦ä¸²æ¯”è¾ƒ" class="headerlink" title="å­—ç¬¦ä¸²æ¯”è¾ƒ"></a>å­—ç¬¦ä¸²æ¯”è¾ƒ</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">== <span class="comment">// åˆ¤æ–­å†…å®¹ä¸åœ°å€æ˜¯å¦ç›¸åŒ</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object anObject)</span> <span class="comment">// åˆ¤æ–­ä¸¤ä¸ªå­—ç¬¦ä¸²å†…å®¹æ˜¯å¦ç›¸åŒ</span></span></span><br><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">equalsIgnoreCase</span><span class="params">(String anotherString)</span> <span class="comment">// å¿½ç•¥å¤§å°å†™ï¼Œåˆ¤æ–­ä¸¤ä¸ªå­—ç¬¦ä¸²å†…å®¹æ˜¯å¦ç›¸åŒï¼Œåº•å±‚è°ƒç”¨äº†regionMatchesæ–¹æ³•</span></span></span><br><span class="line"><span class="function">  </span></span><br><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">contentEquals</span><span class="params">(CharSequence cs)</span> <span class="comment">// åˆ¤æ–­å­—ç¬¦åºåˆ—å’Œå­—ç¬¦ä¸²å†…å®¹æ˜¯å¦ç›¸åŒ</span></span></span><br><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">contentEquals</span><span class="params">(StringBuffer sb)</span> <span class="comment">// åˆ¤æ–­StringBufferå’Œå­—ç¬¦ä¸²å†…å®¹æ˜¯å¦ç›¸åŒï¼Œå®é™…ä¸Šè°ƒç”¨çš„æ˜¯contentEqualsæ–¹æ³•</span></span></span><br><span class="line"><span class="function">  </span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">compareTo</span><span class="params">(String anotherString)</span> <span class="comment">// æŒ‰ç…§å­—å…¸å¤§å°æ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²çš„å¤§å°</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">compareToIgnoreCase</span><span class="params">(String str)</span> <span class="comment">// å¿½ç•¥å¤§å°å†™ï¼ŒæŒ‰ç…§å­—å…¸å¤§å°æ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²çš„å¤§å°ï¼Œä½¿ç”¨å¿½ç•¥å¤§å°å†™æ¯”è¾ƒå™¨</span></span></span><br><span class="line"><span class="function">  </span></span><br><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">regionMatches</span><span class="params">(<span class="keyword">boolean</span> ignoreCase, <span class="keyword">int</span> toffset, String other, <span class="keyword">int</span> ooffset, <span class="keyword">int</span> len)</span></span></span><br><span class="line"><span class="function"><span class="comment">// åˆ¤æ–­ä¸¤ä¸ªå­—ç¬¦ä¸²éƒ¨åˆ†å†…å®¹æ˜¯å¦ç›¸åŒï¼ŒignoreCase:æ˜¯å¦å¿½ç•¥å¤§å°å†™ï¼Œtoffset:å­å­—ç¬¦ä¸²çš„åç§»é‡ï¼Œooffset:å‚æ•°å­—ç¬¦ä¸²ä¸­å­å­—ç¬¦ä¸²çš„åç§»é‡ï¼Œlen:æ¯”è¾ƒçš„å­å­—ç¬¦ä¸²çš„é•¿åº¦</span></span></span><br></pre></td></tr></table></figure><h3 id="å­—ç¬¦ä¸²æŸ¥æ‰¾"><a href="#å­—ç¬¦ä¸²æŸ¥æ‰¾" class="headerlink" title="å­—ç¬¦ä¸²æŸ¥æ‰¾"></a>å­—ç¬¦ä¸²æŸ¥æ‰¾</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">char</span> <span class="title">charAt</span><span class="params">(<span class="keyword">int</span> index)</span> <span class="comment">// è¿”å›ç´¢å¼•ä¸Šçš„å­—ç¬¦ï¼Œç´¢å¼•ä»0å¼€å§‹</span></span></span><br><span class="line"><span class="function">  </span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">indexOf</span><span class="params">(<span class="keyword">int</span> ch)</span> <span class="comment">// ä»å­—ç¬¦ä¸²å¼€å§‹æ£€ç´¢å­—ç¬¦(Unicode ç ) chï¼Œå¹¶è¿”å›ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®ï¼Œæœªå‡ºç°è¿”å›-1ã€‚</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">indexOf</span><span class="params">(<span class="keyword">int</span> chï¼Œ<span class="keyword">int</span> fromIndex)</span> <span class="comment">// ä»å­—ç¬¦ä¸²çš„ç¬¬fromIndexä¸ªå­—ç¬¦å¼€å§‹æ£€ç´¢å­—ç¬¦(Unicode ç ) chï¼Œæœªå‡ºç°è¿”å›-1ã€‚</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">lastIndexOf</span><span class="params">(<span class="keyword">int</span> ch)</span> <span class="comment">// ä»å­—ç¬¦ä¸²æ£€ç´¢å­—ç¬¦(Unicode ç ) chæœ€åä¸€æ¬¡å‡ºç°çš„ä½ç½®ã€‚</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">lastIndexOf</span><span class="params">(<span class="keyword">int</span> ch, <span class="keyword">int</span> fromIndex)</span> <span class="comment">//ä»å­—ç¬¦ä¸²çš„ç¬¬fromIndexä¸ªå­—ç¬¦æ£€ç´¢å­—ç¬¦(Unicode ç ) chæœ€åä¸€æ¬¡å‡ºç°çš„ä½ç½®ã€‚</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">startsWith</span><span class="params">(String prefix, <span class="keyword">int</span> toffset)</span> <span class="comment">// åˆ¤æ–­æ­¤å­—ç¬¦ä¸²ä»æŒ‡å®šç´¢å¼•å¼€å§‹çš„å­å­—ç¬¦ä¸²æ˜¯å¦ä»¥æŒ‡å®šå‰ç¼€å¼€å§‹</span></span></span><br><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">startsWith</span><span class="params">(String prefix)</span> <span class="comment">// åˆ¤æ–­æ­¤å­—ç¬¦ä¸²æ˜¯å¦ä»¥æŒ‡å®šå‰ç¼€å¼€å§‹ã€‚</span></span></span><br><span class="line"><span class="function">  </span></span><br><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">endsWith</span><span class="params">(String suffix)</span> <span class="comment">// åˆ¤æ–­æ­¤å­—ç¬¦ä¸²æ˜¯å¦ä»¥æŒ‡å®šåç¼€ç»“å°¾ã€‚</span></span></span><br></pre></td></tr></table></figure><h3 id="å­—ç¬¦ä¸²æˆªå–ä¸æ›¿æ¢"><a href="#å­—ç¬¦ä¸²æˆªå–ä¸æ›¿æ¢" class="headerlink" title="å­—ç¬¦ä¸²æˆªå–ä¸æ›¿æ¢"></a>å­—ç¬¦ä¸²æˆªå–ä¸æ›¿æ¢</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">String <span class="title">substring</span><span class="params">(<span class="keyword">int</span> beginIndex)</span> <span class="comment">// è¿”å›ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ï¼Œæ˜¯ä»beginIndexå¼€å§‹åˆ°length-1çš„ä¸²ã€‚</span></span></span><br><span class="line"><span class="function">String <span class="title">subString</span><span class="params">(<span class="keyword">int</span> beginIndexï¼Œ<span class="keyword">int</span> endIndex)</span>------è¿”å›ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ï¼Œæ˜¯ä»beginIndexå¼€å§‹åˆ°endIndex-1çš„ä¸²ã€‚</span></span><br><span class="line"><span class="function">CharSequence <span class="title">subSequence</span><span class="params">(<span class="keyword">int</span> beginIndex, <span class="keyword">int</span> endIndex)</span> <span class="comment">// è¿”å›ä»beginIndexå¼€å§‹åˆ°endIndex-1çš„å­—ç¬¦åºåˆ—</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">String <span class="title">replace</span><span class="params">(<span class="keyword">char</span> oldChar, <span class="keyword">char</span> newChar)</span> <span class="comment">// å°†å­—ç¬¦ä¸²ä¸­çš„oldCharå­—ç¬¦æ›¿æ¢ä¸ºnewChar</span></span></span><br><span class="line"><span class="function">String <span class="title">replace</span><span class="params">(CharSequence target, CharSequence replacement)</span> <span class="comment">// å°†å­—ç¬¦ä¸²ä¸­çš„targetå­—ç¬¦åºåˆ—æ›¿æ¢ä¸ºreplacementåºåˆ—</span></span></span><br><span class="line"><span class="function">String <span class="title">replaceFirst</span><span class="params">(String regex, String replacement)</span> <span class="comment">// ä½¿ç”¨replacementæ›¿æ¢ç¬¬ä¸€ä¸ªé€šè¿‡regexåŒ¹é…åˆ°å­ä¸²ã€‚</span></span></span><br><span class="line"><span class="function">String <span class="title">replaceAll</span><span class="params">(String regex, String replacement)</span> <span class="comment">// ä½¿ç”¨replacementæ›¿æ¢æ‰€æœ‰é€šè¿‡regexåŒ¹é…åˆ°å­ä¸²ã€‚</span></span></span><br></pre></td></tr></table></figure><h3 id="å­—ç¬¦ä¸²å…¶ä»–å¸¸ç”¨æ–¹æ³•"><a href="#å­—ç¬¦ä¸²å…¶ä»–å¸¸ç”¨æ–¹æ³•" class="headerlink" title="å­—ç¬¦ä¸²å…¶ä»–å¸¸ç”¨æ–¹æ³•"></a>å­—ç¬¦ä¸²å…¶ä»–å¸¸ç”¨æ–¹æ³•</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">length</span><span class="params">()</span> <span class="comment">// è·å–å­—ç¬¦ä¸²é•¿åº¦</span></span></span><br><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span> <span class="comment">// åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ä¸ºç©º</span></span></span><br><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">contains</span><span class="params">(CharSequence s)</span> <span class="comment">// åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦åŒ…å«å­—ç¬¦åºåˆ— s</span></span></span><br><span class="line"><span class="function">String <span class="title">concat</span><span class="params">(String str)</span> <span class="comment">// å­—ç¬¦ä¸²æ‹¼æ¥</span></span></span><br><span class="line"><span class="function">String <span class="title">trim</span><span class="params">()</span> <span class="comment">// å­—ç¬¦ä¸²å»æ‰é¦–å°¾ç©ºç™½</span></span></span><br><span class="line"><span class="function">String <span class="title">toUpperCase</span><span class="params">(Locale locale)</span> <span class="comment">// å­—ç¬¦ä¸²è½¬å¤§å†™</span></span></span><br><span class="line"><span class="function">String <span class="title">toLowerCase</span><span class="params">(Locale locale)</span> <span class="comment">// å­—ç¬¦ä¸²è½¬å°å†™</span></span></span><br><span class="line"><span class="function">String[] <span class="title">split</span><span class="params">(String regex)</span> <span class="comment">// å­—ç¬¦ä¸²åˆ†å‰²</span></span></span><br><span class="line"><span class="function">String[] <span class="title">split</span><span class="params">(String regex, <span class="keyword">int</span> limit)</span> <span class="comment">// å­—ç¬¦ä¸²åˆ†å‰²ï¼Œå¤šäº†ç»“æœé˜ˆå€¼å‚æ•°</span></span></span><br></pre></td></tr></table></figure><h2 id="åˆ›å»ºæ–¹å¼"><a href="#åˆ›å»ºæ–¹å¼" class="headerlink" title="åˆ›å»ºæ–¹å¼"></a>åˆ›å»ºæ–¹å¼</h2><p>ç¬¬ä¸€ç§æ–¹å¼æ˜¯åœ¨å¸¸é‡æ± ä¸­ç›´æ¥æ‹¿å¯¹è±¡ï¼Œç¬¬äºŒç§æ˜¯åœ¨å †å†…å­˜ç©ºé—´åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ã€‚åªè¦ä½¿ç”¨newæ–¹æ³•ï¼Œå°±éœ€è¦åˆ›å»ºæ–°çš„å¯¹è±¡ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">String str = <span class="keyword">new</span> String(<span class="string">"Freya"</span>); <span class="comment">// è¿™å¥è¯åˆ›å»ºäº†ä¸¤ä¸ªå¯¹è±¡ã€‚</span></span><br></pre></td></tr></table></figure><p>é¦–å…ˆï¼Œå­—ç¬¦ä¸²â€œFreyaâ€æ”¾å…¥å¸¸é‡æ± ï¼Œç„¶å new äº†ä¸€ä¸ªå­—ç¬¦ä¸²â€œFreyaâ€æ”¾å…¥ Java å †ã€‚å­—ç¬¦ä¸²å¸¸é‡â€Freyaâ€åœ¨ç¼–è¯‘æœŸå°±å·²ç»ç¡®å®šæ”¾å…¥å¸¸é‡æ± ï¼Œè€Œ Java å †ä¸Šçš„â€Freyaâ€æ˜¯åœ¨è¿è¡ŒæœŸåˆå§‹åŒ–é˜¶æ®µæ‰ç¡®å®šã€‚ç„¶å Java æ ˆä¸­çš„ str æŒ‡å‘äº† Java å †ä¸­çš„ â€œFreyaâ€ã€‚</p><h2 id="å­—ç¬¦ä¸²å¸¸é‡æ± "><a href="#å­—ç¬¦ä¸²å¸¸é‡æ± " class="headerlink" title="å­—ç¬¦ä¸²å¸¸é‡æ± "></a>å­—ç¬¦ä¸²å¸¸é‡æ± </h2><p>å­—ç¬¦ä¸²å¸¸é‡æ± æ˜¯ JVM å®ä¾‹å…¨å±€å…±äº«çš„ï¼Œå…¨å±€åªæœ‰ä¸€ä¸ªã€‚å­—ç¬¦ä¸²å¸¸é‡æ± åŠåˆ°ä¸€ä¸ªè®¾è®¡æ¨¡å¼ï¼Œå«â€œäº«å…ƒæ¨¡å¼â€ï¼Œé¡¾åæ€ä¹‰ å°±æ˜¯<strong>å…±äº«å…ƒç´ æ¨¡å¼</strong>ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼šä¸€ä¸ªç³»ç»Ÿä¸­å¦‚æœæœ‰å¤šå¤„ç”¨åˆ°äº†ç›¸åŒçš„ä¸€ä¸ªå…ƒç´ ï¼Œé‚£ä¹ˆæˆ‘ä»¬åº”è¯¥åªå­˜å‚¨ä¸€ä»½æ­¤å…ƒç´ ï¼Œè€Œè®©æ‰€æœ‰åœ°æ–¹éƒ½å¼•ç”¨è¿™ä¸€ä¸ªå…ƒç´ ã€‚</p><ul><li>ç›´æ¥ä½¿ç”¨åŒå¼•å·å£°æ˜çš„ String å¯¹è±¡ç›´æ¥å­˜å‚¨åœ¨å­—ç¬¦ä¸²å¸¸é‡æ± ã€‚</li><li>ä¸æ˜¯åŒå¼•å·å£°æ˜çš„ï¼Œå¯ä»¥ä½¿ç”¨ <code>String.intern()</code> æ–¹æ³•ï¼Œè¿™æ˜¯ä¸€ä¸ªNativeæ–¹æ³•ã€‚å¦‚æœè¿è¡Œæ—¶å¸¸é‡æ± ä¸­å·²ç»åŒ…å«ä¸€ä¸ªç­‰äºæ­¤ String å¯¹è±¡å†…å®¹çš„å­—ç¬¦ä¸²ï¼Œåˆ™è¿”å›å¸¸é‡æ± ä¸­è¯¥å­—ç¬¦ä¸²çš„å¼•ç”¨ï¼›å¦‚æœæ²¡æœ‰ï¼Œåˆ™åœ¨å¸¸é‡æ± ä¸­åˆ›å»ºä¸æ­¤ String å†…å®¹ç›¸åŒçš„å­—ç¬¦ä¸²ï¼Œå¹¶è¿”å›å¸¸é‡æ± ä¸­åˆ›å»ºçš„å­—ç¬¦ä¸²çš„å¼•ç”¨ã€‚</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    String a = <span class="string">"Freya"</span>; <span class="comment">//å¸¸é‡æ± ä¸­çš„å¯¹è±¡</span></span><br><span class="line">    String b = <span class="string">"Freya"</span>; <span class="comment">//å¸¸é‡æ± ä¸­çš„å¯¹è±¡</span></span><br><span class="line">    String c = <span class="keyword">new</span> String(<span class="string">"Freya"</span>);</span><br><span class="line">    String d = a.intern();</span><br><span class="line">    String e = <span class="string">"Freya"</span> + <span class="string">" 17"</span>; <span class="comment">//å¸¸é‡æ± ä¸­çš„å¯¹è±¡</span></span><br><span class="line">    String f = <span class="string">" 17"</span>;</span><br><span class="line">    String g = a + f; <span class="comment">//åœ¨å †ä¸Šåˆ›å»ºçš„æ–°çš„å¯¹è±¡</span></span><br><span class="line">    String h = <span class="string">"Freya 17"</span>; <span class="comment">//å¸¸é‡æ± ä¸­çš„å¯¹è±¡</span></span><br><span class="line">    System.out.println(a == b); <span class="comment">//true</span></span><br><span class="line">    System.out.println(a == c); <span class="comment">//false</span></span><br><span class="line">    System.out.println(a == d); <span class="comment">//true</span></span><br><span class="line">    System.out.println(e == g); <span class="comment">//false</span></span><br><span class="line">    System.out.println(e == h); <span class="comment">//true</span></span><br><span class="line">    System.out.println(g == h); <span class="comment">//false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼šå°½é‡é¿å…å¤šä¸ªå­—ç¬¦ä¸²æ‹¼æ¥ï¼Œå› ä¸ºè¿™æ ·ä¼šé‡æ–°åˆ›å»ºå¯¹è±¡ã€‚å¦‚æœéœ€è¦æ”¹å˜ï¼Œå¯ä»¥ä½¿ç”¨StringBuilderæˆ–è€…StringBufferã€‚</p></blockquote><h2 id="String-å¯¹è±¡çš„ä¸å¯å˜æ€§"><a href="#String-å¯¹è±¡çš„ä¸å¯å˜æ€§" class="headerlink" title="String å¯¹è±¡çš„ä¸å¯å˜æ€§"></a>String å¯¹è±¡çš„ä¸å¯å˜æ€§</h2><p>æ‰“å¼€ <code>String</code> ç±»æºç ï¼Œå¯ä»¥çœ‹åˆ°ä¸€å¥è¯:</p><blockquote><p>Strings are constant; their values cannot be changed after they are created. String buffers support mutable strings. Because String objects are immutable they can be shared.</p></blockquote><p>æ„æ€æ˜¯ <code>String</code> æ˜¯ä¸ªå¸¸é‡ï¼Œåˆ›å»ºä¹‹åå°±æ˜¯ä¸å¯å˜çš„ã€‚ä¸å¯å˜çš„æ„æ€æ˜¯ä¸èƒ½æ”¹å˜å¯¹è±¡å†…çš„æˆå‘˜å˜é‡ï¼ŒåŒ…æ‹¬åŸºæœ¬æ•°æ®ç±»å‹å˜é‡çš„å€¼ä¸èƒ½æ”¹å˜ï¼Œå¼•ç”¨ç±»å‹çš„å˜é‡ä¸èƒ½æŒ‡å‘å…¶ä»–çš„å¯¹è±¡ï¼Œå¼•ç”¨ç±»å‹æŒ‡å‘çš„å¯¹è±¡çš„çŠ¶æ€ä¹Ÿä¸èƒ½æ”¹å˜ã€‚</p><h3 id="String-å¯¹è±¡ä¸å¯å˜æ€§æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ"><a href="#String-å¯¹è±¡ä¸å¯å˜æ€§æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ" class="headerlink" title="String å¯¹è±¡ä¸å¯å˜æ€§æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ"></a>String å¯¹è±¡ä¸å¯å˜æ€§æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">String</span></span></span><br><span class="line"><span class="class">    <span class="keyword">implements</span> <span class="title">java</span>.<span class="title">io</span>.<span class="title">Serializable</span>, <span class="title">Comparable</span>&lt;<span class="title">String</span>&gt;, <span class="title">CharSequence</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="comment">/** The value is used for character storage. */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">char</span> value[];</span><br><span class="line">    <span class="comment">/** The offset is the first index of the storage that is used. */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> offset;</span><br><span class="line">    <span class="comment">/** The count is the number of characters in the String. */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> count;</span><br><span class="line">    <span class="comment">/** Cache the hash code for the string */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> hash; <span class="comment">// Default to 0</span></span><br><span class="line">    ....</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">String</span><span class="params">(<span class="keyword">char</span> value[])</span> </span>&#123;</span><br><span class="line">         <span class="keyword">this</span>.value = Arrays.copyOf(value, value.length); <span class="comment">// deep copyæ“ä½œ</span></span><br><span class="line">     &#125;</span><br><span class="line">    ...</span><br><span class="line">     <span class="keyword">public</span> <span class="keyword">char</span>[] toCharArray() &#123;</span><br><span class="line">     <span class="comment">// Cannot use Arrays.copyOf because of class initialization order issues</span></span><br><span class="line">        <span class="keyword">char</span> result[] = <span class="keyword">new</span> <span class="keyword">char</span>[value.length];</span><br><span class="line">        System.arraycopy(value, <span class="number">0</span>, result, <span class="number">0</span>, value.length);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»æºç å¯ä»¥çœ‹å‡ºï¼š</p><ul><li>String ç±»è¢« final ä¿®é¥°ï¼Œä¸å¯ç»§æ‰¿ã€‚</li><li>Stringå†…éƒ¨æ‰€æœ‰æˆå‘˜éƒ½è®¾ç½®ä¸ºç§æœ‰å˜é‡ã€‚</li><li>ä¸å­˜åœ¨valueçš„setteræ–¹æ³•ã€‚</li><li>å°†valueå’Œoffsetè®¾ç½®ä¸ºfinalã€‚</li><li>å½“ä¼ å…¥å¯å˜æ•°ç»„value[]æ—¶ï¼Œè¿›è¡Œcopyè€Œä¸æ˜¯ç›´æ¥å°†value[]å¤åˆ¶ç»™å†…éƒ¨å˜é‡ã€‚</li><li>è·å–valueæ—¶ä¸æ˜¯ç›´æ¥è¿”å›å¯¹è±¡å¼•ç”¨ï¼Œè€Œæ˜¯è¿”å›å¯¹è±¡çš„copyã€‚</li></ul><h3 id="String-å¯¹è±¡ä¸å¯å˜æ€§çš„ä¼˜ç¼ºç‚¹"><a href="#String-å¯¹è±¡ä¸å¯å˜æ€§çš„ä¼˜ç¼ºç‚¹" class="headerlink" title="String å¯¹è±¡ä¸å¯å˜æ€§çš„ä¼˜ç¼ºç‚¹"></a>String å¯¹è±¡ä¸å¯å˜æ€§çš„ä¼˜ç¼ºç‚¹</h3><h4 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h4><ol><li><p><strong>å­—ç¬¦ä¸²å¸¸é‡æ± çš„éœ€è¦</strong><br>å­—ç¬¦ä¸²å¸¸é‡æ± å¯ä»¥å°†ä¸€äº›å­—ç¬¦å¸¸é‡æ”¾åœ¨å¸¸é‡æ± ä¸­é‡å¤ä½¿ç”¨ï¼Œé¿å…æ¯æ¬¡éƒ½é‡æ–°åˆ›å»ºç›¸åŒçš„å¯¹è±¡ã€èŠ‚çœå­˜å‚¨ç©ºé—´ã€‚ä½†å¦‚æœå­—ç¬¦ä¸²æ˜¯å¯å˜çš„ï¼Œæ­¤æ—¶ç›¸åŒå†…å®¹çš„Stringè¿˜æŒ‡å‘å¸¸é‡æ± çš„åŒä¸€ä¸ªå†…å­˜ç©ºé—´ï¼Œå½“æŸä¸ªå˜é‡æ”¹å˜äº†è¯¥å†…å­˜çš„å€¼æ—¶ï¼Œå…¶ä»–éå†çš„å€¼ä¹Ÿä¼šå‘ç”Ÿæ”¹å˜ã€‚æ‰€ä»¥ä¸ç¬¦åˆå¸¸é‡æ± è®¾è®¡çš„åˆè¡·ã€‚</p></li><li><p><strong>çº¿ç¨‹å®‰å…¨è€ƒè™‘</strong><br>åŒä¸€ä¸ªå­—ç¬¦ä¸²å®ä¾‹å¯ä»¥è¢«å¤šä¸ªçº¿ç¨‹å…±äº«ã€‚è¿™æ ·ä¾¿ä¸ç”¨å› ä¸ºçº¿ç¨‹å®‰å…¨é—®é¢˜è€Œä½¿ç”¨åŒæ­¥ã€‚å­—ç¬¦ä¸²è‡ªå·±ä¾¿æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚</p></li><li><p><strong>ç±»åŠ è½½å™¨è¦ç”¨åˆ°å­—ç¬¦ä¸²ï¼Œä¸å¯å˜æ€§æä¾›äº†å®‰å…¨æ€§ï¼Œä»¥ä¾¿æ­£ç¡®çš„ç±»è¢«åŠ è½½</strong></p><p>è­¬å¦‚ä½ æƒ³åŠ è½½java.sql.Connectionç±»ï¼Œè€Œè¿™ä¸ªå€¼è¢«æ”¹æˆäº†myhacked.Connectionï¼Œé‚£ä¹ˆä¼šå¯¹ä½ çš„æ•°æ®åº“é€ æˆä¸å¯çŸ¥çš„ç ´åã€‚</p></li><li><p><strong>æ”¯æŒhashæ˜ å°„å’Œç¼“å­˜</strong><br>å› ä¸ºå­—ç¬¦ä¸²æ˜¯ä¸å¯å˜çš„ï¼Œæ‰€ä»¥åœ¨å®ƒåˆ›å»ºçš„æ—¶å€™hashcodeå°±è¢«ç¼“å­˜äº†ï¼Œä¸éœ€è¦é‡æ–°è®¡ç®—ã€‚è¿™å°±ä½¿å¾—å­—ç¬¦ä¸²å¾ˆé€‚åˆä½œä¸ºMapä¸­çš„é”®ï¼Œå­—ç¬¦ä¸²çš„å¤„ç†é€Ÿåº¦è¦å¿«è¿‡å…¶å®ƒçš„é”®å¯¹è±¡ã€‚è¿™å°±æ˜¯HashMapä¸­çš„é”®å¾€å¾€éƒ½ä½¿ç”¨å­—ç¬¦ä¸²ã€‚</p></li></ol><h4 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h4><p>å¦‚æœæœ‰å¯¹Stringå¯¹è±¡å€¼æ”¹å˜çš„éœ€æ±‚ï¼Œé‚£ä¹ˆä¼šåˆ›å»ºå¤§é‡çš„Stringå¯¹è±¡ã€‚</p><h2 id="Stringå¯¹è±¡æ˜¯å¦çœŸçš„ä¸å¯å˜"><a href="#Stringå¯¹è±¡æ˜¯å¦çœŸçš„ä¸å¯å˜" class="headerlink" title="Stringå¯¹è±¡æ˜¯å¦çœŸçš„ä¸å¯å˜"></a>Stringå¯¹è±¡æ˜¯å¦çœŸçš„ä¸å¯å˜</h2><p>è™½ç„¶ String å¯¹è±¡å°† value è®¾ç½®ä¸º finalï¼Œå¹¶ä¸”è¿˜é€šè¿‡å„ç§æœºåˆ¶ä¿è¯å…¶æˆå‘˜å˜é‡ä¸å¯æ”¹å˜ã€‚ä½†æ˜¯è¿˜æ˜¯å¯ä»¥é€šè¿‡åå°„æœºåˆ¶çš„æ‰‹æ®µæ”¹å˜å…¶å€¼ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//åˆ›å»ºå­—ç¬¦ä¸²"Hello World"ï¼Œ å¹¶èµ‹ç»™å¼•ç”¨s</span></span><br><span class="line">    String s = <span class="string">"Hello World"</span>;</span><br><span class="line">    System.out.println(<span class="string">"s = "</span> + s); <span class="comment">//Hello World</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//è·å–Stringç±»ä¸­çš„valueå­—æ®µ</span></span><br><span class="line">    Field valueFieldOfString = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        valueFieldOfString = String.class.getDeclaredField(<span class="string">"value"</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (NoSuchFieldException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æ”¹å˜valueå±æ€§çš„è®¿é—®æƒé™</span></span><br><span class="line">    valueFieldOfString.setAccessible(<span class="keyword">true</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è·å–så¯¹è±¡ä¸Šçš„valueå±æ€§çš„å€¼</span></span><br><span class="line">    <span class="keyword">char</span>[] value = <span class="keyword">new</span> <span class="keyword">char</span>[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        value = (<span class="keyword">char</span>[]) valueFieldOfString.get(s);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IllegalAccessException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æ”¹å˜valueæ‰€å¼•ç”¨çš„æ•°ç»„ä¸­çš„ç¬¬5ä¸ªå­—ç¬¦</span></span><br><span class="line">    value[<span class="number">5</span>] = <span class="string">'_'</span>;</span><br><span class="line">    System.out.println(<span class="string">"s = "</span> + s);  <span class="comment">//Hello_World</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰“å°ç»“æœä¸ºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">s = Hello World</span><br><span class="line">s = Hello_World</span><br><span class="line"></span><br><span class="line">Process finished with exit code 0</span><br></pre></td></tr></table></figure><h2 id="å…¶ä»–ç›¸å…³å†…å®¹"><a href="#å…¶ä»–ç›¸å…³å†…å®¹" class="headerlink" title="å…¶ä»–ç›¸å…³å†…å®¹"></a>å…¶ä»–ç›¸å…³å†…å®¹</h2><h3 id="substring-æ–¹æ³•"><a href="#substring-æ–¹æ³•" class="headerlink" title="substring æ–¹æ³•"></a>substring æ–¹æ³•</h3><p>åœ¨ JDK 1.6ä¸­ï¼Œå½“è°ƒç”¨ substring æ–¹æ³•çš„æ—¶å€™ï¼Œä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ String å¯¹è±¡ï¼Œä½†æ˜¯è¿™ä¸ª String çš„å€¼ä»ç„¶æŒ‡å‘å †ä¸­çš„åŒä¸€ä¸ªå­—ç¬¦æ•°ç»„ã€‚è¿™ä¸¤ä¸ªå¯¹è±¡ä¸­åªæœ‰ count å’Œoffset çš„å€¼æ˜¯ä¸åŒçš„ã€‚å¦‚æœä½ æœ‰ä¸€ä¸ªå¾ˆé•¿å¾ˆé•¿çš„å­—ç¬¦ä¸²ï¼Œä½†æ˜¯å½“ä½ ä½¿ç”¨ substring è¿›è¡Œåˆ‡å‰²çš„æ—¶å€™ä½ åªéœ€è¦å¾ˆçŸ­çš„ä¸€æ®µã€‚è¿™å¯èƒ½å¯¼è‡´æ€§èƒ½é—®é¢˜ï¼Œå› ä¸ºä½ éœ€è¦çš„åªæ˜¯ä¸€å°æ®µå­—ç¬¦åºåˆ—ï¼Œä½†æ˜¯ä½ å´å¼•ç”¨äº†æ•´ä¸ªå­—ç¬¦ä¸²ï¼ˆå› ä¸ºè¿™ä¸ªéå¸¸é•¿çš„å­—ç¬¦æ•°ç»„ä¸€ç›´åœ¨è¢«å¼•ç”¨ï¼Œæ‰€ä»¥æ— æ³•è¢«å›æ”¶ï¼Œå°±å¯èƒ½å¯¼è‡´å†…å­˜æ³„éœ²ï¼‰ã€‚åœ¨JDK 1.6ä¸­ï¼Œä¸€èˆ¬ç”¨ä»¥ä¸‹æ–¹å¼æ¥è§£å†³è¯¥é—®é¢˜ï¼ŒåŸç†å…¶å®å°±æ˜¯ç”Ÿæˆä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²å¹¶å¼•ç”¨ä»–ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">x = x.substring(x, y) + <span class="string">""</span></span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šé—®é¢˜åœ¨jdk 7+ä¸­å¾—åˆ°è§£å†³ã€‚åœ¨jdk 7+ ä¸­ï¼Œsubstringæ–¹æ³•ä¼šåœ¨å †å†…å­˜ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„æ•°ç»„ã€‚å…¶ä½¿ç”¨<code>new String</code>åˆ›å»ºäº†ä¸€ä¸ªæ–°å­—ç¬¦ä¸²ï¼Œé¿å…å¯¹è€å­—ç¬¦ä¸²çš„å¼•ç”¨ã€‚ä»è€Œè§£å†³äº†å†…å­˜æ³„éœ²é—®é¢˜ã€‚</p><h3 id="String-valueOfå’ŒInteger-toStringçš„åŒºåˆ«"><a href="#String-valueOfå’ŒInteger-toStringçš„åŒºåˆ«" class="headerlink" title="String.valueOfå’ŒInteger.toStringçš„åŒºåˆ«"></a>String.valueOfå’ŒInteger.toStringçš„åŒºåˆ«</h3><p>æˆ‘ä»¬æœ‰ä¸‰ç§æ–¹å¼å°†ä¸€ä¸ªintç±»å‹çš„å˜é‡å˜æˆå‘¢è¿‡Stringç±»å‹ï¼Œé‚£ä¹ˆä»–ä»¬æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> i = <span class="number">5</span>;</span><br><span class="line">String i1 = <span class="string">""</span> + i; <span class="comment">//å…¶å®æ˜¯String i1 = (new StringBuilder()).append(i).toString();ï¼Œé¦–å…ˆåˆ›å»ºä¸€ä¸ªStringBuilderå¯¹è±¡ï¼Œç„¶åå†è°ƒç”¨appendæ–¹æ³•ï¼Œå†è°ƒç”¨toStringæ–¹æ³•ã€‚</span></span><br><span class="line">String i2 = String.valueOf(i); <span class="comment">//è°ƒç”¨ Integer.toString(i)</span></span><br><span class="line">String i3 = Integer.toString(i);</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;code&gt;String&lt;/code&gt; è¿™ä¸ªç±»æ˜¯æˆ‘ä»¬åœ¨å†™ Java ä»£ç ä¸­ç”¨å¾—æœ€å¤šçš„ä¸€ä¸ªç±»ï¼Œæ²¡æœ‰ä¹‹ä¸€ï¼Œä»Šå¤©æˆ‘ä»¬å°±è®²è®²å®ƒã€‚&lt;/p&gt;&lt;h2 id=&quot;ç®€ä»‹&quot;&gt;&lt;a href=&quot;#ç®€ä»‹&quot; class=&quot;headerlink&quot; title=&quot;ç®€ä»‹&quot;&gt;&lt;/a&gt;ç®€ä»‹&lt;/h2&gt;&lt;p&gt;&lt;co
      
    
    </summary>
    
      <category term="Java" scheme="https://muhouer.github.io/categories/Java/"/>
    
      <category term="æºç å­¦ä¹ " scheme="https://muhouer.github.io/categories/Java/%E6%BA%90%E7%A0%81%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="String" scheme="https://muhouer.github.io/tags/String/"/>
    
  </entry>
  
  <entry>
    <title>ArrayListåˆ†æ</title>
    <link href="https://muhouer.github.io/posts/b0d3e399/"/>
    <id>https://muhouer.github.io/posts/b0d3e399/</id>
    <published>2019-08-18T01:27:00.000Z</published>
    <updated>2019-08-18T01:33:09.325Z</updated>
    
    <content type="html"><![CDATA[<p><code>ArrayList</code> å®ç°äº <code>List</code>ã€<code>RandomAccess</code> æ¥å£ã€‚å¯ä»¥æ’å…¥ç©ºæ•°æ®ï¼Œä¹Ÿæ”¯æŒéšæœºè®¿é—®ã€‚</p><p><code>ArrayList</code> ç›¸å½“äºåŠ¨æ€æ•°æ®ï¼Œå…¶ä¸­æœ€é‡è¦çš„ä¸¤ä¸ªå±æ€§åˆ†åˆ«æ˜¯: <code>elementData</code> æ•°ç»„ï¼Œä»¥åŠ <code>size</code> å¤§å°ã€‚</p><h2 id="æˆå‘˜å˜é‡"><a href="#æˆå‘˜å˜é‡" class="headerlink" title="æˆå‘˜å˜é‡"></a>æˆå‘˜å˜é‡</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** é»˜è®¤çš„åˆå§‹åŒ–å®¹é‡ */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEFAULT_CAPACITY = <span class="number">10</span>;</span><br><span class="line"><span class="comment">/** ç©º ArrayList å®ä¾‹å…±äº«çš„ç©ºæ•°ç»„å®ä¾‹ */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Object[] EMPTY_ELEMENTDATA = &#123;&#125;;</span><br><span class="line"><span class="comment">/** é»˜è®¤å¤§å°çš„ç©º ArrayList å®ä¾‹å…±äº«çš„ç©ºæ•°ç»„å®ä¾‹ï¼Œå’Œ EMPTY_ELEMENTDATA åŒºåˆ†å¼€ */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Object[] DEFAULTCAPACITY_EMPTY_ELEMENTDATA = &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** </span></span><br><span class="line"><span class="comment"> * å­˜å‚¨arraylistå…ƒç´ çš„æ•°ç»„ç¼“å†²åŒºã€‚</span></span><br><span class="line"><span class="comment"> * ä»»ä½•ä½¿ç”¨ DEFAULTCAPACITY_EMPTY_ELEMENTDATA çš„ç©º ArrayList å®ä¾‹ï¼Œ</span></span><br><span class="line"><span class="comment"> * åœ¨é¦–æ¬¡æ·»åŠ å…ƒç´ æ—¶å®¹é‡æ‰©å±•åˆ°é»˜è®¤å®¹é‡ DEFAULT_CAPACITY ã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">transient</span> Object[] elementData; <span class="comment">// éç§æœ‰ä»¥ç®€åŒ–åµŒå¥—ç±»è®¿é—®</span></span><br><span class="line"><span class="comment">/** ArrayListåŒ…å«çš„å…ƒç´ ä¸ªæ•° */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">int</span> size;</span><br></pre></td></tr></table></figure><h2 id="æ„é€ å‡½æ•°"><a href="#æ„é€ å‡½æ•°" class="headerlink" title="æ„é€ å‡½æ•°"></a>æ„é€ å‡½æ•°</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">ArrayList</span><span class="params">(<span class="keyword">int</span> initialCapacity)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (initialCapacity &gt; <span class="number">0</span>) &#123; <span class="comment">// æ–°å»º initialCapacity å¤§å°çš„æ•°ç»„</span></span><br><span class="line">        <span class="keyword">this</span>.elementData = <span class="keyword">new</span> Object[initialCapacity];</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (initialCapacity == <span class="number">0</span>) &#123; <span class="comment">// é‡‡ç”¨ EMPTY_ELEMENTDATA</span></span><br><span class="line">        <span class="keyword">this</span>.elementData = EMPTY_ELEMENTDATA;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"Illegal Capacity: "</span>+</span><br><span class="line">                                           initialCapacity);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">ArrayList</span><span class="params">()</span> </span>&#123; <span class="comment">// é‡‡ç”¨ DEFAULTCAPACITY_EMPTY_ELEMENTDATAï¼Œå’Œ EMPTY_ELEMENTDATA åŒºåˆ†å¼€æ¥</span></span><br><span class="line">    <span class="keyword">this</span>.elementData = DEFAULTCAPACITY_EMPTY_ELEMENTDATA;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">ArrayList</span><span class="params">(Collection&lt;? extends E&gt; c)</span> </span>&#123;</span><br><span class="line">    elementData = c.toArray();</span><br><span class="line">    <span class="keyword">if</span> ((size = elementData.length) != <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">// c.toArray might (incorrectly) not return Object[] (see 6260652)</span></span><br><span class="line">        <span class="keyword">if</span> (elementData.getClass() != Object[].class)</span><br><span class="line">            elementData = Arrays.copyOf(elementData, size, Object[].class);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// replace with empty array.</span></span><br><span class="line">        <span class="keyword">this</span>.elementData = EMPTY_ELEMENTDATA;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="c-toArray-might-incorrectly-not-return-Object-see-6260652"><a href="#c-toArray-might-incorrectly-not-return-Object-see-6260652" class="headerlink" title="c.toArray might (incorrectly) not return Object[] (see 6260652)"></a>c.toArray might (incorrectly) not return Object[] (see 6260652)</h2><p>æŸ¥çœ‹ <code>ArrayList(Collection&lt;? extends E&gt; c)</code> æ„é€ å‡½æ•°æ—¶ï¼Œæœ‰ä¸ªæ³¨é‡Š <strong>c.toArray might (incorrectly) not return Object[] (see 6260652)</strong>ï¼Œå…·ä½“ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿå…ˆçœ‹ä¸ªç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">  List&lt;Object&gt; list = <span class="keyword">new</span> ArrayList&lt;Object&gt;(Arrays.asList(<span class="string">"foo"</span>, <span class="string">"bar"</span>));</span><br><span class="line">list.set(<span class="number">0</span>, <span class="keyword">new</span> Object());</span><br></pre></td></tr></table></figure><p>å¦‚æœ ArrayList çš„æ„é€ å‡½æ•°ä¸­æ²¡æœ‰ç±»å‹æ£€æŸ¥çš„ä»£ç  <code>elementData.getClass() != Object[].class</code>ï¼Œä¼šå¯¼è‡´å…¶elementData çš„å®é™…ç±»å‹æ˜¯String[]ï¼Œè€Œä¸æ˜¯ Object[]ï¼Œæ‰€ä»¥å½“ä½ å°†å…¶ä¸­ä¸€ä¸ªå…ƒç´ æ›´æ¢ä¸º Object å…ƒç´ æ—¶ä¼šæŠ¥é”™ï¼Œä½ å¯ä»¥è¯•ä¸‹å¦‚ä¸‹ä»£ç ï¼Œè‚¯å®šä¼šæŠ¥ ArrayStoreException çš„é”™è¯¯ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Object[] arr = <span class="keyword">new</span> String[]&#123;<span class="string">"a"</span>,<span class="string">"b"</span>&#125;;</span><br><span class="line">arr[<span class="number">0</span>]=<span class="keyword">new</span> Object(); <span class="comment">// Causes ArrayStoreException,</span></span><br><span class="line">                     <span class="comment">// because you cannot put arbitrary Object into String[]</span></span><br></pre></td></tr></table></figure><p>ä¸»è¦é—®é¢˜å‡ºåœ¨ <code>Arrays.asList</code> ä¸Šé¢ï¼Œ<code>Arrays.asList</code> è¿”å›çš„ ArrayList å®é™…ä¸Šæ˜¯å†…éƒ¨ç±» ArrayList ï¼Œå¹¶ä¸æ˜¯æˆ‘ä»¬ç»å¸¸ä½¿ç”¨çš„ <code>ArrayList</code>ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">ArrayList</span>&lt;<span class="title">E</span>&gt; <span class="keyword">extends</span> <span class="title">AbstractList</span>&lt;<span class="title">E</span>&gt; </span></span><br><span class="line"><span class="class">    <span class="keyword">implements</span> <span class="title">RandomAccess</span>, <span class="title">java</span>.<span class="title">io</span>.<span class="title">Serializable</span></span></span><br></pre></td></tr></table></figure><p>å†…éƒ¨ç±» ArrayList çš„ <code>toArray()</code> ä½¿ç”¨çš„æ˜¯ <code>clone</code> æ–¹æ³•ï¼Œè€Œæˆ‘ä»¬ç»å¸¸ä½¿ç”¨çš„ <code>ArrayList</code> çš„ <code>toArray()</code> ä½¿ç”¨çš„æ˜¯ <code>Arrays.copyOf()</code> æ–¹æ³•ï¼Œå…·ä½“å·®åˆ«å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Object[] arr = <span class="keyword">new</span> ArrayList&lt;Object&gt;(Arrays.asList(<span class="string">"foo"</span>, <span class="string">"bar"</span>)).toArray();</span><br><span class="line">System.out.println(arr.getClass()); <span class="comment">// class [Ljava.lang.Object; Objectæ•°ç»„</span></span><br><span class="line">Object[] arr1 = Arrays.asList(<span class="string">"foo"</span>, <span class="string">"bar"</span>).toArray();</span><br><span class="line">System.out.println(arr1.getClass()); <span class="comment">// class [Ljava.lang.String; String æ•°ç»„ï¼Œæ“ä½œä¸å½“ä¼šå¼•èµ· ArrayStoreException</span></span><br></pre></td></tr></table></figure><p>å…³äº <code>Arrays.asList</code> çš„ä¸€ä¸ªå‘ <a href="/posts/45d267df/" title="ä½¿ç”¨Javaæ—¶çš„ä¸€äº›å‘">ä½¿ç”¨Javaæ—¶çš„ä¸€äº›å‘</a></p><h2 id="add"><a href="#add" class="headerlink" title="add"></a>add</h2><p>åœ¨è°ƒç”¨ <code>add()</code> æ–¹æ³•çš„æ—¶å€™ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">add</span><span class="params">(E e)</span> </span>&#123;</span><br><span class="line">    ensureCapacityInternal(size + <span class="number">1</span>);  <span class="comment">// Increments modCount!!</span></span><br><span class="line">    elementData[size++] = e;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>é¦–å…ˆè¿›è¡Œæ‰©å®¹æ ¡éªŒã€‚</li><li>å°†æ’å…¥çš„å€¼æ”¾åˆ°å°¾éƒ¨ï¼Œå¹¶å°† size + 1 ã€‚</li></ul><p>å¦‚æœæ˜¯è°ƒç”¨ <code>add(index,e)</code> åœ¨æŒ‡å®šä½ç½®æ·»åŠ çš„è¯ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> index, E element)</span> </span>&#123;</span><br><span class="line">    rangeCheckForAdd(index);</span><br><span class="line"></span><br><span class="line">    ensureCapacityInternal(size + <span class="number">1</span>);  <span class="comment">// Increments modCount!!</span></span><br><span class="line">    <span class="comment">//å¤åˆ¶ï¼Œå‘åç§»åŠ¨</span></span><br><span class="line">    System.arraycopy(elementData, index, elementData, index + <span class="number">1</span>,</span><br><span class="line">                     size - index);</span><br><span class="line">    elementData[index] = element;</span><br><span class="line">    size++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ä¹Ÿæ˜¯é¦–å…ˆæ‰©å®¹æ ¡éªŒã€‚</li><li>æ¥ç€å¯¹æ•°æ®è¿›è¡Œå¤åˆ¶ï¼Œç›®çš„æ˜¯æŠŠ index ä½ç½®ç©ºå‡ºæ¥æ”¾æœ¬æ¬¡æ’å…¥çš„æ•°æ®ï¼Œå¹¶å°†åé¢çš„æ•°æ®å‘åç§»åŠ¨ä¸€ä¸ªä½ç½®ã€‚</li></ul><p>å…¶å®æ‰©å®¹æœ€ç»ˆè°ƒç”¨çš„ä»£ç :</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">grow</span><span class="params">(<span class="keyword">int</span> minCapacity)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// overflow-conscious code</span></span><br><span class="line">    <span class="keyword">int</span> oldCapacity = elementData.length;</span><br><span class="line">    <span class="keyword">int</span> newCapacity = oldCapacity + (oldCapacity &gt;&gt; <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">if</span> (newCapacity - minCapacity &lt; <span class="number">0</span>)</span><br><span class="line">        newCapacity = minCapacity;</span><br><span class="line">    <span class="keyword">if</span> (newCapacity - MAX_ARRAY_SIZE &gt; <span class="number">0</span>)</span><br><span class="line">        newCapacity = hugeCapacity(minCapacity);</span><br><span class="line">    <span class="comment">// minCapacity is usually close to size, so this is a win:</span></span><br><span class="line">    elementData = Arrays.copyOf(elementData, newCapacity);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¹Ÿæ˜¯ä¸€ä¸ªæ•°ç»„å¤åˆ¶çš„è¿‡ç¨‹ã€‚</p><p>ç”±æ­¤å¯è§ <code>ArrayList</code> çš„ä¸»è¦æ¶ˆè€—æ˜¯æ•°ç»„æ‰©å®¹ä»¥åŠåœ¨æŒ‡å®šä½ç½®æ·»åŠ æ•°æ®ï¼Œåœ¨æ—¥å¸¸ä½¿ç”¨æ—¶æœ€å¥½æ˜¯æŒ‡å®šå¤§å°ï¼Œå°½é‡å‡å°‘æ‰©å®¹ã€‚æ›´è¦å‡å°‘åœ¨æŒ‡å®šä½ç½®æ’å…¥æ•°æ®çš„æ“ä½œã€‚</p><h2 id="åºåˆ—åŒ–"><a href="#åºåˆ—åŒ–" class="headerlink" title="åºåˆ—åŒ–"></a>åºåˆ—åŒ–</h2><p>ç”±äº ArrayList æ˜¯åŸºäºåŠ¨æ€æ•°ç»„å®ç°çš„ï¼Œæ‰€ä»¥å¹¶ä¸æ˜¯æ‰€æœ‰çš„ç©ºé—´éƒ½è¢«ä½¿ç”¨ã€‚å› æ­¤ä½¿ç”¨äº† <code>transient</code> ä¿®é¥°ï¼Œå¯ä»¥é˜²æ­¢è¢«è‡ªåŠ¨åºåˆ—åŒ–ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">transient Object[] elementData;</span><br></pre></td></tr></table></figure><p>å› æ­¤ ArrayList è‡ªå®šä¹‰äº†åºåˆ—åŒ–ä¸ååºåˆ—åŒ–ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">writeObject</span><span class="params">(java.io.ObjectOutputStream s)</span></span></span><br><span class="line"><span class="function">    <span class="keyword">throws</span> java.io.IOException</span>&#123;</span><br><span class="line">    <span class="comment">// Write out element count, and any hidden stuff</span></span><br><span class="line">    <span class="keyword">int</span> expectedModCount = modCount;</span><br><span class="line">    s.defaultWriteObject();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Write out size as capacity for behavioural compatibility with clone()</span></span><br><span class="line">    s.writeInt(size);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Write out all elements in the proper order.</span></span><br><span class="line">    <span class="comment">//åªåºåˆ—åŒ–äº†è¢«ä½¿ç”¨çš„æ•°æ®</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;size; i++) &#123;</span><br><span class="line">        s.writeObject(elementData[i]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (modCount != expectedModCount) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> ConcurrentModificationException();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">readObject</span><span class="params">(java.io.ObjectInputStream s)</span></span></span><br><span class="line"><span class="function">    <span class="keyword">throws</span> java.io.IOException, ClassNotFoundException </span>&#123;</span><br><span class="line">    elementData = EMPTY_ELEMENTDATA;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Read in size, and any hidden stuff</span></span><br><span class="line">    s.defaultReadObject();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Read in capacity</span></span><br><span class="line">    s.readInt(); <span class="comment">// ignored</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (size &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">// be like clone(), allocate array based upon size not capacity</span></span><br><span class="line">        ensureCapacityInternal(size);</span><br><span class="line"></span><br><span class="line">        Object[] a = elementData;</span><br><span class="line">        <span class="comment">// Read in all elements in the proper order.</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;size; i++) &#123;</span><br><span class="line">            a[i] = s.readObject();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»å®ç°ä¸­å¯ä»¥çœ‹å‡º ArrayList åªåºåˆ—åŒ–äº†è¢«ä½¿ç”¨çš„æ•°æ®ã€‚</p><h2 id="ArrayList-VS-Vector"><a href="#ArrayList-VS-Vector" class="headerlink" title="ArrayList VS Vector"></a>ArrayList VS Vector</h2><p><code>Vector</code> ä¹Ÿæ˜¯å®ç°äº <code>List</code> æ¥å£ï¼Œåº•å±‚æ•°æ®ç»“æ„å’Œ <code>ArrayList</code> ç±»ä¼¼ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªåŠ¨æ€æ•°ç»„å­˜æ”¾æ•°æ®ã€‚ä¸è¿‡æ˜¯åœ¨ <code>add()</code> æ–¹æ³•çš„æ—¶å€™ä½¿ç”¨ <code>synchronized</code> è¿›è¡ŒåŒæ­¥å†™æ•°æ®ï¼Œä½†æ˜¯å¼€é”€è¾ƒå¤§ï¼Œæ‰€ä»¥ <code>Vector</code> æ˜¯ä¸€ä¸ªåŒæ­¥å®¹å™¨å¹¶ä¸æ˜¯ä¸€ä¸ªå¹¶å‘å®¹å™¨ã€‚</p><p>ä»¥ä¸‹æ˜¯ <code>add()</code> æ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">boolean</span> <span class="title">add</span><span class="params">(E e)</span> </span>&#123;</span><br><span class="line">    modCount++;</span><br><span class="line">    ensureCapacityHelper(elementCount + <span class="number">1</span>);</span><br><span class="line">    elementData[elementCount++] = e;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»¥åŠæŒ‡å®šä½ç½®æ’å…¥æ•°æ®:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> index, E element)</span> </span>&#123;</span><br><span class="line">    insertElementAt(element, index);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">insertElementAt</span><span class="params">(E obj, <span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">    modCount++;</span><br><span class="line">    <span class="keyword">if</span> (index &gt; elementCount) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> ArrayIndexOutOfBoundsException(index</span><br><span class="line">                                                 + <span class="string">" &gt; "</span> + elementCount);</span><br><span class="line">    &#125;</span><br><span class="line">    ensureCapacityHelper(elementCount + <span class="number">1</span>);</span><br><span class="line">    System.arraycopy(elementData, index, elementData, index + <span class="number">1</span>, elementCount - index);</span><br><span class="line">    elementData[index] = obj;</span><br><span class="line">    elementCount++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;code&gt;ArrayList&lt;/code&gt; å®ç°äº &lt;code&gt;List&lt;/code&gt;ã€&lt;code&gt;RandomAccess&lt;/code&gt; æ¥å£ã€‚å¯ä»¥æ’å…¥ç©ºæ•°æ®ï¼Œä¹Ÿæ”¯æŒéšæœºè®¿é—®ã€‚&lt;/p&gt;&lt;p&gt;&lt;code&gt;ArrayList&lt;/code&gt; ç›¸å½“äºåŠ¨æ€æ•°æ®ï¼Œå…¶ä¸­æœ€é‡è¦çš„ä¸¤ä¸ªå±
      
    
    </summary>
    
      <category term="Java" scheme="https://muhouer.github.io/categories/Java/"/>
    
      <category term="æºç å­¦ä¹ " scheme="https://muhouer.github.io/categories/Java/%E6%BA%90%E7%A0%81%E5%AD%A6%E4%B9%A0/"/>
    
    
      <category term="ArrayList" scheme="https://muhouer.github.io/tags/ArrayList/"/>
    
  </entry>
  
  <entry>
    <title>æ­£åˆ™è¡¨è¾¾å¼å¤‡å¿˜</title>
    <link href="https://muhouer.github.io/posts/2c992fa9/"/>
    <id>https://muhouer.github.io/posts/2c992fa9/</id>
    <published>2019-08-17T15:54:00.000Z</published>
    <updated>2019-08-17T16:04:20.975Z</updated>
    
    <content type="html"><![CDATA[<p>æ­£åˆ™è¡¨è¾¾å¼æ˜¯ä¸€ç»„ç”±å­—æ¯å’Œç¬¦å·ç»„æˆçš„ç‰¹æ®Šæ–‡æœ¬, å®ƒå¯ä»¥ç”¨æ¥ä»æ–‡æœ¬ä¸­æ‰¾å‡ºæ»¡è¶³ä½ æƒ³è¦çš„æ ¼å¼çš„å¥å­ã€‚</p><h2 id="å…ƒå­—ç¬¦"><a href="#å…ƒå­—ç¬¦" class="headerlink" title="å…ƒå­—ç¬¦"></a>å…ƒå­—ç¬¦</h2><p>æ­£åˆ™è¡¨è¾¾å¼ä¸»è¦ä¾èµ–äºå…ƒå­—ç¬¦. å…ƒå­—ç¬¦ä¸ä»£è¡¨ä»–ä»¬æœ¬èº«çš„å­—é¢æ„æ€, ä»–ä»¬éƒ½æœ‰ç‰¹æ®Šçš„å«ä¹‰. ä¸€äº›å…ƒå­—ç¬¦å†™åœ¨æ–¹æ‹¬å·ä¸­çš„æ—¶å€™æœ‰ä¸€äº›ç‰¹æ®Šçš„æ„æ€. ä»¥ä¸‹æ˜¯ä¸€äº›å…ƒå­—ç¬¦çš„ä»‹ç»:</p><table><thead><tr><th>å…ƒå­—ç¬¦</th><th>æè¿°</th></tr></thead><tbody><tr><td>.</td><td>å¥å·åŒ¹é…ä»»æ„å•ä¸ªå­—ç¬¦é™¤äº†æ¢è¡Œç¬¦.</td></tr><tr><td>[ ]</td><td>å­—ç¬¦ç§ç±». åŒ¹é…æ–¹æ‹¬å·å†…çš„ä»»æ„å­—ç¬¦.</td></tr><tr><td>[^ ]</td><td>å¦å®šçš„å­—ç¬¦ç§ç±». åŒ¹é…é™¤äº†æ–¹æ‹¬å·é‡Œçš„ä»»æ„å­—ç¬¦</td></tr><tr><td>*</td><td>åŒ¹é…&gt;=0ä¸ªé‡å¤çš„åœ¨*å·ä¹‹å‰çš„å­—ç¬¦.</td></tr><tr><td>+</td><td>åŒ¹é…&gt;=1ä¸ªé‡å¤çš„+å·å‰çš„å­—ç¬¦.</td></tr><tr><td>?</td><td>æ ‡è®°?ä¹‹å‰çš„å­—ç¬¦ä¸ºå¯é€‰.</td></tr><tr><td>{n,m}</td><td>åŒ¹é…numä¸ªå¤§æ‹¬å·ä¹‹å‰çš„å­—ç¬¦ (n &lt;= num &lt;= m).</td></tr><tr><td>(xyz)</td><td>å­—ç¬¦é›†, åŒ¹é…ä¸ xyz å®Œå…¨ç›¸ç­‰çš„å­—ç¬¦ä¸².</td></tr><tr><td>|</td><td>æˆ–è¿ç®—ç¬¦,åŒ¹é…ç¬¦å·å‰æˆ–åçš„å­—ç¬¦.</td></tr><tr><td>\</td><td>è½¬ä¹‰å­—ç¬¦,ç”¨äºåŒ¹é…ä¸€äº›ä¿ç•™çš„å­—ç¬¦ `[ ] ( ) { } . * + ? ^ $ \</td></tr><tr><td>^</td><td>ä»å¼€å§‹è¡Œå¼€å§‹åŒ¹é….</td></tr><tr><td>$</td><td>ä»æœ«ç«¯å¼€å§‹åŒ¹é….</td></tr></tbody></table><h2 id="ç®€å†™å­—ç¬¦é›†"><a href="#ç®€å†™å­—ç¬¦é›†" class="headerlink" title="ç®€å†™å­—ç¬¦é›†"></a>ç®€å†™å­—ç¬¦é›†</h2><p>æ­£åˆ™è¡¨è¾¾å¼æä¾›ä¸€äº›å¸¸ç”¨çš„å­—ç¬¦é›†ç®€å†™. å¦‚ä¸‹:</p><table><thead><tr><th>ç®€å†™</th><th>æè¿°</th></tr></thead><tbody><tr><td>.</td><td>é™¤æ¢è¡Œç¬¦å¤–çš„æ‰€æœ‰å­—ç¬¦</td></tr><tr><td>\w</td><td>åŒ¹é…æ‰€æœ‰å­—æ¯æ•°å­—, ç­‰åŒäº <code>[a-zA-Z0-9_]</code></td></tr><tr><td>\W</td><td>åŒ¹é…æ‰€æœ‰éå­—æ¯æ•°å­—, å³ç¬¦å·, ç­‰åŒäº: <code>[^\w]</code></td></tr><tr><td>\d</td><td>åŒ¹é…æ•°å­—: <code>[0-9]</code></td></tr><tr><td>\D</td><td>åŒ¹é…éæ•°å­—: <code>[^\d]</code></td></tr><tr><td>\s</td><td>åŒ¹é…æ‰€æœ‰ç©ºæ ¼å­—ç¬¦, ç­‰åŒäº: <code>[\t\n\f\r\p{Z}]</code></td></tr><tr><td>\S</td><td>åŒ¹é…æ‰€æœ‰éç©ºæ ¼å­—ç¬¦: <code>[^\s]</code></td></tr><tr><td>\f</td><td>åŒ¹é…ä¸€ä¸ªæ¢é¡µç¬¦</td></tr><tr><td>\n</td><td>åŒ¹é…ä¸€ä¸ªæ¢è¡Œç¬¦</td></tr><tr><td>\r</td><td>åŒ¹é…ä¸€ä¸ªå›è½¦ç¬¦</td></tr><tr><td>\t</td><td>åŒ¹é…ä¸€ä¸ªåˆ¶è¡¨ç¬¦</td></tr><tr><td>\v</td><td>åŒ¹é…ä¸€ä¸ªå‚ç›´åˆ¶è¡¨ç¬¦</td></tr><tr><td>\p</td><td>åŒ¹é… CR/LF (ç­‰åŒäº <code>\r\n</code>)ï¼Œç”¨æ¥åŒ¹é… DOS è¡Œç»ˆæ­¢ç¬¦</td></tr></tbody></table><h2 id="é›¶å®½åº¦æ–­è¨€-å‰åé¢„æŸ¥"><a href="#é›¶å®½åº¦æ–­è¨€-å‰åé¢„æŸ¥" class="headerlink" title="é›¶å®½åº¦æ–­è¨€(å‰åé¢„æŸ¥)"></a>é›¶å®½åº¦æ–­è¨€(å‰åé¢„æŸ¥)</h2><p>å…ˆè¡Œæ–­è¨€å’Œåå‘æ–­è¨€éƒ½å±äº<strong>éæ•è·ç°‡</strong>(ä¸æ•è·æ–‡æœ¬ ï¼Œä¹Ÿä¸é’ˆå¯¹ç»„åˆè®¡è¿›è¡Œè®¡æ•°). å…ˆè¡Œæ–­è¨€ç”¨äºåˆ¤æ–­æ‰€åŒ¹é…çš„æ ¼å¼æ˜¯å¦åœ¨å¦ä¸€ä¸ªç¡®å®šçš„æ ¼å¼ä¹‹å‰, åŒ¹é…ç»“æœä¸åŒ…å«è¯¥ç¡®å®šæ ¼å¼(ä»…ä½œä¸ºçº¦æŸ).</p><p>ä¾‹å¦‚, æˆ‘ä»¬æƒ³è¦è·å¾—æ‰€æœ‰è·Ÿåœ¨ <code>$</code> ç¬¦å·åçš„æ•°å­—, æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ­£åå‘æ–­è¨€ <code>(?&lt;=\$)[0-9\.]*</code>. è¿™ä¸ªè¡¨è¾¾å¼åŒ¹é… <code>$</code> å¼€å¤´, ä¹‹åè·Ÿç€ <code>0,1,2,3,4,5,6,7,8,9,.</code> è¿™äº›å­—ç¬¦å¯ä»¥å‡ºç°å¤§äºç­‰äº 0 æ¬¡.</p><p>é›¶å®½åº¦æ–­è¨€å¦‚ä¸‹:</p><table><thead><tr><th>ç¬¦å·</th><th>æè¿°</th></tr></thead><tbody><tr><td>?=</td><td>æ­£å…ˆè¡Œæ–­è¨€-å­˜åœ¨</td></tr><tr><td>?!</td><td>è´Ÿå…ˆè¡Œæ–­è¨€-æ’é™¤</td></tr><tr><td>?&lt;=</td><td>æ­£åå‘æ–­è¨€-å­˜åœ¨</td></tr><tr><td>?&lt;!</td><td>è´Ÿåå‘æ–­è¨€-æ’é™¤</td></tr></tbody></table><h3 id="æ­£å…ˆè¡Œæ–­è¨€"><a href="#æ­£å…ˆè¡Œæ–­è¨€" class="headerlink" title="?=... æ­£å…ˆè¡Œæ–­è¨€"></a><code>?=...</code> æ­£å…ˆè¡Œæ–­è¨€</h3><p><code>?=...</code> æ­£å…ˆè¡Œæ–­è¨€, è¡¨ç¤ºç¬¬ä¸€éƒ¨åˆ†è¡¨è¾¾å¼ä¹‹åå¿…é¡»è·Ÿç€ <code>?=...</code>å®šä¹‰çš„è¡¨è¾¾å¼.</p><p>è¿”å›ç»“æœåªåŒ…å«æ»¡è¶³åŒ¹é…æ¡ä»¶çš„ç¬¬ä¸€éƒ¨åˆ†è¡¨è¾¾å¼. å®šä¹‰ä¸€ä¸ªæ­£å…ˆè¡Œæ–­è¨€è¦ä½¿ç”¨ <code>()</code>. åœ¨æ‹¬å·å†…éƒ¨ä½¿ç”¨ä¸€ä¸ªé—®å·å’Œç­‰å·: <code>(?=...)</code>.</p><p>æ­£å…ˆè¡Œæ–­è¨€çš„å†…å®¹å†™åœ¨æ‹¬å·ä¸­çš„ç­‰å·åé¢. ä¾‹å¦‚, è¡¨è¾¾å¼ <code>(T|t)he(?=\sfat)</code> åŒ¹é… <code>The</code> å’Œ <code>the</code>, åœ¨æ‹¬å·ä¸­æˆ‘ä»¬åˆå®šä¹‰äº†æ­£å…ˆè¡Œæ–­è¨€ <code>(?=\sfat)</code> ,å³ <code>The</code> å’Œ <code>the</code> åé¢ç´§è·Ÿç€ <code>(ç©ºæ ¼)fat</code>.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;(T|t)he(?=\sfat)&quot; =&gt; The fat cat sat on the mat.</span><br></pre></td></tr></table></figure><h3 id="è´Ÿå…ˆè¡Œæ–­è¨€"><a href="#è´Ÿå…ˆè¡Œæ–­è¨€" class="headerlink" title="?!... è´Ÿå…ˆè¡Œæ–­è¨€"></a><code>?!...</code> è´Ÿå…ˆè¡Œæ–­è¨€</h3><p>è´Ÿå…ˆè¡Œæ–­è¨€ <code>?!</code> ç”¨äºç­›é€‰æ‰€æœ‰åŒ¹é…ç»“æœ, ç­›é€‰æ¡ä»¶ä¸º å…¶åä¸è·Ÿéšç€æ–­è¨€ä¸­å®šä¹‰çš„æ ¼å¼. <code>æ­£å…ˆè¡Œæ–­è¨€</code> å®šä¹‰å’Œ <code>è´Ÿå…ˆè¡Œæ–­è¨€</code> ä¸€æ ·, åŒºåˆ«å°±æ˜¯ <code>=</code> æ›¿æ¢æˆ <code>!</code> ä¹Ÿå°±æ˜¯ <code>(?!...)</code>.</p><p>è¡¨è¾¾å¼ <code>(T|t)he(?!\sfat)</code> åŒ¹é… <code>The</code> å’Œ <code>the</code>, ä¸”å…¶åä¸è·Ÿç€ <code>(ç©ºæ ¼)fat</code>.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;(T|t)he(?!\sfat)&quot; =&gt; The fat cat sat on the mat.</span><br></pre></td></tr></table></figure><h3 id="lt-æ­£åå‘æ–­è¨€"><a href="#lt-æ­£åå‘æ–­è¨€" class="headerlink" title="?&lt;= ... æ­£åå‘æ–­è¨€"></a><code>?&lt;= ...</code> æ­£åå‘æ–­è¨€</h3><p>æ­£åå‘æ–­è¨€ è®°ä½œ<code>(?&lt;=...)</code> ç”¨äºç­›é€‰æ‰€æœ‰åŒ¹é…ç»“æœ, ç­›é€‰æ¡ä»¶ä¸º å…¶å‰è·Ÿéšç€æ–­è¨€ä¸­å®šä¹‰çš„æ ¼å¼. ä¾‹å¦‚, è¡¨è¾¾å¼ <code>(?&lt;=(T|t)he\s)(fat|mat)</code> åŒ¹é… <code>fat</code> å’Œ <code>mat</code>, ä¸”å…¶å‰è·Ÿç€ <code>The</code> æˆ– <code>the</code>.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;(?&lt;=(T|t)he\s)(fat|mat)&quot; =&gt; The fat cat sat on the mat.</span><br></pre></td></tr></table></figure><h3 id="lt-è´Ÿåå‘æ–­è¨€"><a href="#lt-è´Ÿåå‘æ–­è¨€" class="headerlink" title="?&lt;!... è´Ÿåå‘æ–­è¨€"></a><code>?&lt;!...</code> è´Ÿåå‘æ–­è¨€</h3><p>è´Ÿåå‘æ–­è¨€ è®°ä½œ <code>(?&lt;!...)</code> ç”¨äºç­›é€‰æ‰€æœ‰åŒ¹é…ç»“æœ, ç­›é€‰æ¡ä»¶ä¸º å…¶å‰ä¸è·Ÿéšç€æ–­è¨€ä¸­å®šä¹‰çš„æ ¼å¼. ä¾‹å¦‚, è¡¨è¾¾å¼ <code>(?&lt;!(T|t)he\s)(cat)</code> åŒ¹é… <code>cat</code>, ä¸”å…¶å‰ä¸è·Ÿç€ <code>The</code> æˆ– <code>the</code>.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;(?&lt;!(T|t)he\s)(cat)&quot; =&gt; The cat sat on cat.</span><br></pre></td></tr></table></figure><h2 id="æ ‡å¿—"><a href="#æ ‡å¿—" class="headerlink" title="æ ‡å¿—"></a>æ ‡å¿—</h2><p>æ ‡å¿—ä¹Ÿå«æ¨¡å¼ä¿®æ­£ç¬¦, å› ä¸ºå®ƒå¯ä»¥ç”¨æ¥ä¿®æ”¹è¡¨è¾¾å¼çš„æœç´¢ç»“æœ. è¿™äº›æ ‡å¿—å¯ä»¥ä»»æ„çš„ç»„åˆä½¿ç”¨, å®ƒä¹Ÿæ˜¯æ•´ä¸ªæ­£åˆ™è¡¨è¾¾å¼çš„ä¸€éƒ¨åˆ†.</p><table><thead><tr><th>æ ‡å¿—</th><th>æè¿°</th></tr></thead><tbody><tr><td>i</td><td>å¿½ç•¥å¤§å°å†™.</td></tr><tr><td>g</td><td>å…¨å±€æœç´¢.</td></tr><tr><td>m</td><td>å¤šè¡Œçš„: é”šç‚¹å…ƒå­—ç¬¦ <code>^</code> <code>$</code> å·¥ä½œèŒƒå›´åœ¨æ¯è¡Œçš„èµ·å§‹.</td></tr></tbody></table><h2 id="è´ªå©ªåŒ¹é…ä¸æƒ°æ€§åŒ¹é…-Greedy-vs-lazy-matching"><a href="#è´ªå©ªåŒ¹é…ä¸æƒ°æ€§åŒ¹é…-Greedy-vs-lazy-matching" class="headerlink" title="è´ªå©ªåŒ¹é…ä¸æƒ°æ€§åŒ¹é… (Greedy vs lazy matching)"></a>è´ªå©ªåŒ¹é…ä¸æƒ°æ€§åŒ¹é… (Greedy vs lazy matching)</h2><p>æ­£åˆ™è¡¨è¾¾å¼é»˜è®¤é‡‡ç”¨è´ªå©ªåŒ¹é…æ¨¡å¼ï¼Œåœ¨è¯¥æ¨¡å¼ä¸‹æ„å‘³ç€ä¼šåŒ¹é…å°½å¯èƒ½é•¿çš„å­ä¸²ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>?</code> å°†è´ªå©ªåŒ¹é…æ¨¡å¼è½¬åŒ–ä¸ºæƒ°æ€§åŒ¹é…æ¨¡å¼ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;/(.*at)/&quot; =&gt; The fat cat sat on the mat.</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;/(.*?at)/&quot; =&gt; The fat cat sat on the mat.</span><br></pre></td></tr></table></figure><h2 id="æ¥æº"><a href="#æ¥æº" class="headerlink" title="æ¥æº"></a>æ¥æº</h2><p>ç‚¹å‡»<a href="https://github.com/ziishaned/learn-regex" target="_blank" rel="noopener">learn-regex</a>å³å¯å»æŸ¥çœ‹æ›´è¯¦ç»†ä¿¡æ¯ã€‚</p><p><a href="https://jex.im/regulex/" target="_blank" rel="noopener">Regulex</a>æ˜¯ä¸€ä¸ªJavaScript æ­£åˆ™è¡¨è¾¾å¼è§£æå’Œå¯è§†åŒ–ç½‘ç«™ã€‚å…·ä½“æ•ˆæœå‚çœ‹ğŸ‘‡ç¤ºä¾‹ã€‚</p><h2 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h2><h3 id="é‚®ç®±"><a href="#é‚®ç®±" class="headerlink" title="é‚®ç®±"></a>é‚®ç®±</h3><p>åªå…è®¸è‹±æ–‡å­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿ã€è‹±æ–‡å¥å·ã€ä»¥åŠä¸­åˆ’çº¿ç»„æˆã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$</span><br></pre></td></tr></table></figure><img src="/images/201908171144.png" width="900px" height="300px" align="center"><h3 id="æ±‰å­—"><a href="#æ±‰å­—" class="headerlink" title="æ±‰å­—"></a>æ±‰å­—</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">^[\u4e00-\u9fa5]&#123;0,&#125;$</span><br></pre></td></tr></table></figure><img src="/images/201908171151.png" width="900px" height="300px" align="center"><h3 id="æµ®ç‚¹æ•°"><a href="#æµ®ç‚¹æ•°" class="headerlink" title="æµ®ç‚¹æ•°"></a>æµ®ç‚¹æ•°</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">^-?([1-9]\d*\.\d*|0\.\d*[1-9]\d*|0?\.0+|0)$</span><br></pre></td></tr></table></figure><img src="/images/201908171153.png" width="900px" height="300px" align="center">]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;æ­£åˆ™è¡¨è¾¾å¼æ˜¯ä¸€ç»„ç”±å­—æ¯å’Œç¬¦å·ç»„æˆçš„ç‰¹æ®Šæ–‡æœ¬, å®ƒå¯ä»¥ç”¨æ¥ä»æ–‡æœ¬ä¸­æ‰¾å‡ºæ»¡è¶³ä½ æƒ³è¦çš„æ ¼å¼çš„å¥å­ã€‚&lt;/p&gt;&lt;h2 id=&quot;å…ƒå­—ç¬¦&quot;&gt;&lt;a href=&quot;#å…ƒå­—ç¬¦&quot; class=&quot;headerlink&quot; title=&quot;å…ƒå­—ç¬¦&quot;&gt;&lt;/a&gt;å…ƒå­—ç¬¦&lt;/h2&gt;&lt;p&gt;æ­£åˆ™è¡¨è¾¾å¼ä¸»è¦ä¾èµ–äºå…ƒå­—ç¬¦
      
    
    </summary>
    
      <category term="å¤‡å¿˜" scheme="https://muhouer.github.io/categories/%E5%A4%87%E5%BF%98/"/>
    
    
      <category term="æ­£åˆ™è¡¨è¾¾å¼" scheme="https://muhouer.github.io/tags/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>æ‹¾å¥-ç©ç¬‘</title>
    <link href="https://muhouer.github.io/posts/25a3a536/"/>
    <id>https://muhouer.github.io/posts/25a3a536/</id>
    <published>2019-08-16T15:16:00.000Z</published>
    <updated>2019-08-16T15:19:54.027Z</updated>
    
    <content type="html"><![CDATA[<h3 id="001"><a href="#001" class="headerlink" title="001"></a>001</h3><hr><ol><li><strong>å¥³å¤§ä¸‰æŠ±é‡‘ç –ã€‚å¥³å¤§ä¸‰åé€æ±Ÿå±±ã€‚å¥³å¤§ä¸‰ç™¾é€ä»™ä¸¹ã€‚</strong></li><li><strong>ä¸Šå¸æ˜¯å…¬å¹³çš„ï¼Œä¸æ˜¯å…¬çš„å°±æ˜¯å¹³çš„ã€‚</strong></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;001&quot;&gt;&lt;a href=&quot;#001&quot; class=&quot;headerlink&quot; title=&quot;001&quot;&gt;&lt;/a&gt;001&lt;/h3&gt;&lt;hr&gt;&lt;ol&gt;&lt;li&gt;&lt;strong&gt;å¥³å¤§ä¸‰æŠ±é‡‘ç –ã€‚å¥³å¤§ä¸‰åé€æ±Ÿå±±ã€‚å¥³å¤§ä¸‰ç™¾é€ä»™ä¸¹ã€‚&lt;/strong&gt;&lt;/li&gt;&lt;li&gt;&lt;strong&gt;
      
    
    </summary>
    
      <category term="æ‹¾å¥" scheme="https://muhouer.github.io/categories/%E6%8B%BE%E5%8F%A5/"/>
    
    
      <category term="ç©ç¬‘" scheme="https://muhouer.github.io/tags/%E7%8E%A9%E7%AC%91/"/>
    
  </entry>
  
  <entry>
    <title>ä¸€äº›åè¯</title>
    <link href="https://muhouer.github.io/posts/6bf34d15/"/>
    <id>https://muhouer.github.io/posts/6bf34d15/</id>
    <published>2019-08-12T13:45:00.000Z</published>
    <updated>2019-08-19T15:55:05.960Z</updated>
    
    <content type="html"><![CDATA[<h2 id="é£é…¸"><a href="#é£é…¸" class="headerlink" title="é£é…¸"></a>é£é…¸</h2><p>é£é…¸ç³»ç”±äº”å€å­ä¸­å¾—åˆ°çš„ä¸€ç§é£è´¨ã€‚ä¸ºé»„è‰²æˆ–æ·¡æ£•è‰²è½»è´¨æ— æ™¶æ€§ç²‰æœ«æˆ–é³ç‰‡ï¼›æ— è‡­ï¼Œå¾®æœ‰ç‰¹æ®Šæ°”å‘³ï¼Œå‘³ææ¶©ã€‚æº¶äºæ°´åŠä¹™é†‡ï¼Œæ˜“æº¶äºç”˜æ²¹ï¼Œå‡ ä¹ä¸æº¶äºä¹™é†šã€æ°¯ä»¿æˆ–è‹¯ã€‚å…¶æ°´æº¶æ¶²ä¸é“ç›æº¶æ¶²ç›¸é‡å˜è“é»‘è‰²ï¼ŒåŠ äºšç¡«é…¸é’ å¯å»¶ç¼“å˜è‰²ã€‚åœ¨å·¥ä¸šä¸Šï¼Œé£é…¸è¢«å¤§é‡åº”ç”¨äºé£é©ä¸åˆ¶é€ è“å¢¨æ°´ã€‚é£é…¸èƒ½ä½¿è›‹ç™½è´¨å‡å›ºã€‚äººä»¬æŠŠç”ŸçŒªçš®ã€ç”Ÿç‰›çš®ç”¨é£é…¸è¿›è¡ŒåŒ–å­¦å¤„ç†ï¼Œèƒ½ä½¿ç”Ÿçš®ä¸­çš„å¯æº¶æ€§è›‹ç™½è´¨å‡å›ºã€‚äºæ˜¯ï¼Œæœ¬æ¥æ”¾ä¸Šå‡ å¤©å°±ä¼šå‘è‡­è…çƒ‚çš„ç”Ÿçš®ï¼Œå˜æˆäº†æ¼‚äº®ã€å¹²å‡€ã€æŸ”éŸ§ã€ç»ä¹…è€ç”¨çš„çš®é©ã€‚</p><h2 id="é€‰æ‹”è€ƒè¯•ä¸è¯Šæ–­è€ƒè¯•"><a href="#é€‰æ‹”è€ƒè¯•ä¸è¯Šæ–­è€ƒè¯•" class="headerlink" title="é€‰æ‹”è€ƒè¯•ä¸è¯Šæ–­è€ƒè¯•"></a>é€‰æ‹”è€ƒè¯•ä¸è¯Šæ–­è€ƒè¯•</h2><p>é€‰æ‹”è€ƒè¯•ï¼Œç±»ä¼¼äºä¸­è€ƒé«˜è€ƒï¼Œä½ è€ƒå¤šå°‘åˆ†ä¸é‡è¦ï¼Œ59åˆ†ç®—é«˜è¿˜æ˜¯ä½æ— æ‰€è°“ï¼Œå…³é”®å–å†³äºåˆ«äººè€ƒçš„æ€ä¹ˆæ ·ï¼Œä½ è€ƒ59åˆ†ï¼Œåˆ«äººéƒ½åœ¨58åˆ†ä»¥ä¸‹ï¼Œä½ å°±æœ‰æœºä¼šè¯»åæ ¡ï¼›ä½ è€ƒ59åˆ†ï¼Œäººå®¶è€ƒ95åˆ†ï¼Œå¯¹ä¸èµ·ï¼Œä½ å°±å›å®¶å¹²æ´»ï¼Œè¿™å«é€‰æ‹”è€ƒè¯•ã€‚</p><p>é™¤äº†ä¸­è€ƒé«˜è€ƒä»¥å¤–ï¼Œæ‰€æœ‰çš„è€ƒè¯•éƒ½å«è¯Šæ–­è€ƒè¯•ï¼ˆæµ‹éªŒï¼‰ï¼Œå³è€å¸ˆæ•™äº†ä¸€ä¸ªçŸ¥è¯†ç‚¹ï¼Œå‡ºä¸€é“é¢˜çœ‹çœ‹å­¦ç”ŸæŒæ¡å¾—æ€ä¹ˆæ ·äº†ã€‚</p><h2 id="æµ·å§†ç«‹å…‹æ€¥æ•‘æ³•"><a href="#æµ·å§†ç«‹å…‹æ€¥æ•‘æ³•" class="headerlink" title="æµ·å§†ç«‹å…‹æ€¥æ•‘æ³•"></a>æµ·å§†ç«‹å…‹æ€¥æ•‘æ³•</h2><p>æµ·å§†ç«‹å…‹æ•™æˆæ˜¯ç¾å›½ä¸€ä½å¤šå¹´ä»äº‹å¤–ç§‘çš„åŒ»ç”Ÿã€‚åœ¨ä¸´åºŠå®è·µä¸­ï¼Œä»–è¢«å¤§é‡çš„é£Ÿç‰©ã€å¼‚ç‰©çª’æ¯é€ æˆå‘¼å¸é“æ¢—é˜»è‡´æ­»çš„ç—…ä¾‹éœ‡æƒŠäº†ã€‚åœ¨æ€¥æ•‘æ€¥è¯Šä¸­ï¼ŒåŒ»ç”Ÿå¸¸å¸¸é‡‡ç”¨æ‹æ‰“ç—…äººèƒŒéƒ¨ï¼Œæˆ–å°†æ‰‹æŒ‡ä¼¸è¿›å£è…”å’½å–‰å»å–çš„åŠæ³•æ’é™¤å¼‚ç‰©ï¼Œå…¶ç»“æœä¸ä»…æ— æ•ˆåè€Œä½¿å¼‚ç‰©æ›´æ·±å…¥å‘¼å¸é“ã€‚ä»–ç»è¿‡åå¤ç ”ç©¶å’Œå¤šæ¬¡çš„åŠ¨ç‰©å®éªŒï¼Œç»ˆäºå‘æ˜äº†åˆ©ç”¨è‚ºéƒ¨æ®‹ç•™æ°”ä½“ï¼Œå½¢æˆæ°”æµå†²å‡ºå¼‚ç‰©çš„æ€¥æ•‘æ–¹æ³•ã€‚1974å¹´ï¼Œä»–ä½œäº†å…³äºè…¹éƒ¨å†²å‡»æ³•è§£é™¤æ°”ç®¡å¼‚ç‰©çš„é¦–æ¬¡æŠ¥å‘Šã€‚</p><p>å¼‚ç‰©å µå¡åœ¨å‘¼å¸é“ä¸­çš„äº‹æƒ…åœ¨æˆ‘ä»¬çš„ç”Ÿæ´»ä¸­å¹¶ä¸å°‘è§ï¼Œå‰æ®µæ—¶é—´å°±å‡ºç°äº†ç±»ä¼¼çš„æ¡ˆåˆ—ã€‚æ‰€ä»¥ç”±äºå¼‚ç‰©å µå¡åœ¨å‘¼å¸é“ä¸­å¼•èµ·çš„åæœè¿˜æ˜¯å¾ˆä¸¥é‡çš„ã€‚æµ·å§†ç«‹å…‹æ€¥æ•‘æ³•ä¹Ÿå«æµ·å§†é‡Œå…‹è…¹éƒ¨å†²å‡»æ³•ï¼ˆHeimlich Maneuverï¼‰ï¼Œæ˜¯ç¾å›½åŒ»ç”Ÿæµ·å§†é‡Œå…‹å…ˆç”Ÿå‘æ˜çš„ï¼Œä¹Ÿç§°ä¸ºæµ·æ°æ‰‹æŠ€ã€‚</p><h3 id="æˆäºº"><a href="#æˆäºº" class="headerlink" title="æˆäºº"></a>æˆäºº</h3><p>å¦‚æœæ˜¯æˆäººï¼Œæ•‘æŠ¤è€…ç«™åœ¨å—å®³è€…èº«åï¼Œä»èƒŒåæŠ±ä½å…¶è…¹éƒ¨ï¼ŒåŒè‡‚å›´ç¯å…¶è…°è…¹éƒ¨ï¼Œä¸€æ‰‹æ¡æ‹³ï¼Œæ‹³å¿ƒå‘å†…æŒ‰å‹äºå—å®³äººçš„è‚šè„å’Œè‚‹éª¨ä¹‹é—´çš„éƒ¨ä½ï¼›å¦ä¸€æ‰‹æˆæŒæ‚æŒ‰åœ¨æ‹³å¤´ä¹‹ä¸Šï¼ŒåŒæ‰‹æ€¥é€Ÿç”¨åŠ›å‘é‡Œå‘ä¸ŠæŒ¤å‹ï¼Œåå¤å®æ–½ï¼Œç›´è‡³é˜»å¡ç‰©åå‡ºä¸ºæ­¢ã€‚</p><h3 id="3å²ä»¥ä¸‹å­©å­"><a href="#3å²ä»¥ä¸‹å­©å­" class="headerlink" title="3å²ä»¥ä¸‹å­©å­"></a>3å²ä»¥ä¸‹å­©å­</h3><p>å¦‚æœæ˜¯3å²ä»¥ä¸‹å­©å­ï¼Œåº”è¯¥é©¬ä¸ŠæŠŠå­©å­æŠ±èµ·æ¥ï¼Œä¸€åªæ‰‹æä½å­©å­é¢§éª¨ä¸¤ä¾§ï¼Œæ‰‹è‡‚è´´ç€å­©å­çš„å‰èƒ¸ï¼Œå¦ä¸€åªæ‰‹æ‰˜ä½å­©å­åé¢ˆéƒ¨ï¼Œè®©å…¶è„¸æœä¸‹ï¼Œè¶´åœ¨æ•‘æŠ¤äººè†ç›–ä¸Šã€‚åœ¨å­©å­èƒŒä¸Šæ‹1-5æ¬¡ï¼Œå¹¶è§‚å¯Ÿå­©å­æ˜¯å¦å°†å¼‚ç‰©åå‡ºã€‚</p><h3 id="å©´å„¿"><a href="#å©´å„¿" class="headerlink" title="å©´å„¿"></a>å©´å„¿</h3><ol><li><strong>5æ¬¡æ‹èƒŒæ³•</strong>ï¼šå°†æ‚£è€…çš„èº«ä½“æ‰¶äºæ•‘æŠ¤å‘˜çš„å‰è‡‚ä¸Šï¼Œå¤´éƒ¨æœä¸‹ï¼Œæ•‘æŠ¤å‘˜ç”¨æ‰‹æ”¯æ’‘ä¼¤ç—…è€…å¤´éƒ¨åŠé¢ˆéƒ¨ï¼›ç”¨å¦ä¸€æ‰‹æŒæŒæ ¹åœ¨ä¼¤ç—…è€…èƒŒéƒ¨ä¸¤è‚©èƒ›éª¨ä¹‹é—´æ‹å‡»5æ¬¡ã€‚</li><li><strong>5æ¬¡å‹èƒ¸æ³•</strong>ï¼šå¦‚æœå µå¡ç‰©ä»æœªæ’é™¤ï¼Œå®æ–½5æ¬¡å‹èƒ¸æ³•ã€‚ä½¿æ‚£å„¿å¹³å§ï¼Œé¢å‘ä¸Šï¼Œèººåœ¨åšç¡¬çš„åœ°é¢æˆ–åºŠæ¿ä¸Šï¼ŒæŠ¢æ•‘è€…è·ªä¸‹æˆ–ç«‹äºå…¶è¶³ä¾§,æˆ–å–åä½ï¼Œå¹¶ä½¿æ‚£å„¿éª‘åœ¨æŠ¢æ•‘è€…çš„ä¸¤å¤§è…¿ä¸Šï¼Œé¢æœå‰ã€‚æŠ¢æ•‘è€…ä»¥ä¸¤æ‰‹çš„ä¸­æŒ‡æˆ–é£ŸæŒ‡ï¼Œæ”¾åœ¨æ‚£å„¿èƒ¸å»“ä¸‹å’Œè„ä¸Šçš„è…¹éƒ¨ï¼Œå¿«é€Ÿå‘ä¸Šé‡å‡»å‹è¿«ï¼Œä½†è¦åˆšä¸­å¸¦æŸ”ã€‚é‡å¤ä¹‹ï¼Œç›´è‡³å¼‚ç‰©æ’å‡ºã€‚</li></ol><h2 id="åƒåœ¾DNA"><a href="#åƒåœ¾DNA" class="headerlink" title="åƒåœ¾DNA"></a>åƒåœ¾DNA</h2><p>äººç±»å¤§çº¦æœ‰95%çš„DNAå¹¶ä¸ç¼–ç è›‹ç™½è´¨ï¼Œå¦å¤–5%çš„DNAå¯ä»¥åˆ†æˆå¤§çº¦åä¸‡ä¸ªåŠŸèƒ½å•ä½ï¼Œå®ƒä»¬è¢«ç§°ä¸ºåŸºå› ã€‚</p><p>ç ”ç©¶äººå‘˜ä»å¯¹æ¯”ç»“æœä¸­å¾—åˆ°äº†ä¸€ä¸ªæƒŠäººçš„æ¨¡å¼ï¼šç”Ÿç‰©è¶Šå¤æ‚ï¼Œåƒåœ¾DNAä¼¼ä¹å°±è¶Šé‡è¦ã€‚ä»–ä»¬å°†é…µæ¯ä¸æ›´ä¸ºå¤æ‚çš„è •è™«è¿›è¡Œäº†æ¯”è¾ƒï¼Œåè€…æ˜¯ä¸€ç§å¤šç»†èƒç”Ÿç‰©ï¼Œå‘ç°æœ‰40%çš„å…±æœ‰DNAæ²¡æœ‰è¢«ç¼–ç ã€‚éšåï¼Œç ”ç©¶äººå‘˜åˆå°†è„Šæ¤åŠ¨ç‰©ä¸æ˜†è™«è¿›è¡Œäº†å¯¹æ¯”ï¼Œè¿™äº›ç”Ÿç‰©æ¯”è •è™«æ›´ä¸ºå¤æ‚ï¼Œç»“æœå‘ç°ï¼Œæœ‰è¶…è¿‡66%çš„å…±æœ‰DNAåŒ…å«æœ‰æ²¡æœ‰ç¼–ç çš„DNAã€‚</p><p>å¦‚æœè¿™äº›â€œåƒåœ¾DNAâ€åºåˆ—èƒ½åœ¨ç”µè„‘å±å¹•ä¸Šå±•ç°å‡ºä¸€ä¸ªåƒç´ æ•°ç»„æˆ–ä¸€ä¸ªç®€å•çš„å›¾åƒï¼Œé‚£ä¹ˆï¼Œå¤–æ˜Ÿç”Ÿç‰©æ›¾å¹²é¢„äººç±»DNAçš„è®¾æƒ³å°±æå¯èƒ½æ˜¯çœŸçš„ã€‚äººç±»DNAå¯å®¹çº³â€œå¤–æ˜Ÿå…´è¡°å²â€ç¼–ç æˆ´ç»´æ–¯ç§°ï¼Œäººç±»çš„DNAç¼–ç è¶³å¤Ÿå®¹çº³ä¸€éƒ¨åƒæ ·çš„å°è¯´ï¼Œæˆ–è€…ä¸€æ®µå¤–æ˜Ÿæ–‡æ˜çš„å…´ç››å’Œè¡°è½ç®€å²ã€‚</p><p>åƒåœ¾DNAå¯ä»¥è¯´æ˜¯åŸºå› ç»„çš„æš—é¢ï¼Œå®ƒå°†æ”¹å˜ç”Ÿç‰©å­¦çš„é¢è²Œï¼Œå°±åƒæš—ç‰©è´¨å’Œæš—èƒ½é‡æ”¹å˜å®‡å®™å­¦çš„é¢è²Œé‚£æ ·ã€‚å®ƒæ—¢ä¸èƒ½ç»™è›‹ç™½è´¨ç¼–ç ã€å……å½“åŸºå› ï¼Œä¹Ÿä¸èƒ½ç»™RNAç¼–ç ï¼Œä¹Ÿæ²¡æœ‰æ‰¾åˆ°æ˜æ˜¾çš„ä¸è›‹ç™½è´¨ç­‰å…¶ä»–åˆ†å­å‘ç”Ÿç›¸äº’ä½œç”¨çš„è¿¹è±¡ã€‚å½“ç„¶ï¼Œå®Œå…¨æœ‰å¯èƒ½å®ƒæ˜¯è¡Œä½¿äº†æŸç§åŠŸèƒ½çš„ï¼Œåªä¸è¿‡æ˜¯åœ¨â€œæš—åœ°ä¸‹â€è¿›è¡Œï¼Œè€Œæˆ‘ä»¬è¿˜æ²¡æœ‰èƒ½åŠ›çœ‹åˆ°å®ƒè¡Œä½¿åŠŸèƒ½çš„èº«å½±ç½¢äº†ã€‚</p><p>è¿™äº›åŒæ—¶å­˜åœ¨äºä¸åŒå“ºä¹³åŠ¨ç‰©DNAåºåˆ—å½“ä¸­çš„ä¿å®ˆéåŸºå› åºåˆ—çš„ç›¸ä¼¼æ€§ï¼Œç”šè‡³æ¯”åŒæºçš„ç¼–ç è›‹ç™½è´¨ã€æˆ–è€…æ˜¯ç¼–ç RNAçš„åŸºå› è¿˜å¼ºã€‚å¯¹äºå…¶ä¸­åŒæ—¶åœ¨è‡³å°‘12ç§ç‰©ç§å½“ä¸­å‘ç°çš„ä¿å®ˆéåŸºå› åºåˆ—ï¼Œå¦‚æœæ¯”è¾ƒå®ƒä»¬çš„æ ¸è‹·é…¸æ’åˆ—å·®å¼‚çš„è¯ï¼Œè¿˜ä¸åŠå®ƒä»¬çš„è›‹ç™½è´¨ç¼–ç åºåˆ—çš„æ ¸è‹·é…¸æ’åˆ—å·®å¼‚çš„ä¸€åŠï¼</p><p>å¾ˆå¤šçš„â€œåƒåœ¾â€ DNAåŒ…å«äº†å›æ–‡ç»“æ„ï¼Œä»¥æ­¤ç»´æŒäº’è¡¥é“¾ä¹‹é—´çš„å¯¹ç§°ã€‚åœ¨æœè‡å’Œå®¶èš•é‡Œï¼Œå¯¹è¿™äº›åºåˆ—çš„åˆ†æè¡¨æ˜ï¼Œè¿™äº›è½¬åº§å’Œæ•£å¼€çš„é‡å¤åºåˆ—æ˜¯é«˜åº¦ééšæœºæ¨¡å¼ã€‚è¿™äº›æ¨¡å¼åæ˜ å‡ºè¿™äº›åºåˆ—æ˜¯åœ¨ç»†èƒè°ƒæ§ä¹‹ä¸‹ï¼Œè€Œä¸æ˜¯æ— ç”¨æˆ–è‡ªç§çš„åƒåœ¾DNAã€‚ åœ¨å…³ç³»å¾ˆè¿œçš„ç‰©ç§ä¹‹é—´ï¼Œä¾‹å¦‚å¤§å‹å¶è¹„ç±»å“ºä¹³åŠ¨ç‰©å’Œäººï¼Œåœ¨ä¸»è¦ç»„ç»‡ç›¸å®¹æ€§å¤åˆMHC-DRBåŸºå› é‡Œéƒ½æœ‰è¿™äº›ç®€å•é‡å¤çš„(gt)n(ga)m DNAåºåˆ—ã€‚å¦‚æœè¿™äº›åºåˆ—çœŸæ˜¯åƒåœ¾ï¼Œåœ¨æ•°ç™¾ä¸‡å¹´çš„è¿›åŒ–è¿‡ç¨‹ä¸­å°±ä¸å¯èƒ½ä¿å­˜ä¸‹æ¥ã€‚</p><p>å¦ä¸€ä¸ªç ”ç©¶è¡¨æ˜ï¼ŒDNAåŒ…å«äº†å¤§èŒƒå›´çš„ä¸å¯è§£é‡Šæ¨¡å¼ã€‚Eugene Stanleyåšå£«æŠ¥é“è¿™äº›æ¨¡å¼ä¸æ˜¯éšæœºæ”¹å˜çš„ç»“æœã€‚ä¸€ä¸ªåŸºå› ä¸Šçš„ä¸€ä¸ªä½ç½®å°†å½±å“åˆ°100ä¸‡ç¢±åŸºä¹‹å¤–çš„æ ¸è‹·é…¸ï¼Œè¿™çœŸæ˜¯è®©äººéš¾ä»¥ç½®ä¿¡ã€‚å› è€Œé—ä¼ å­¦å®¶Moranè®¤ä¸ºï¼ŒL1åœ¨äººç±»è¿›åŒ–ä¸­æ‰®æ¼”ç€é‡è¦è§’è‰²â€”â€”å¢åŠ é—ä¼ å¤šæ ·æ€§ã€‚åœ¨å—œé…¸ç²’ç»†èƒè¡ç”Ÿç¥ç»æ¯’ç´ ã€å—œé…¸ç»†èƒé˜³ç¦»å­è›‹ç™½ã€IgMé‡æ’åŸºå› çš„å¯å˜åŒºåŸŸã€Î±-çƒè›‹ç™½åŸºå› ã€å¾®ç®¡è›‹ç™½åŸºå› ã€4-N-ä¹™é…°åŠä¹³ç³–æ°¨åŸºè½¬ç§»é…¶ã€é†›ç¼©é…¶BåŸºå› ã€ä¹™é†›è¿˜åŸé…¶åŸºå› kè½»é“¾åŸºå› ç­‰ç­‰,éƒ½æœ‰åŸºå› å…§å¢å¼ºä½œç”¨çš„æè¿°ã€‚</p><p>å¦ä¸€äº›ç ”ç©¶è¯å®éç¼–ç DNAä½œä¸ºæ²‰é»˜åŸºå› ,å¯¹ä¸´è¿‘åŸºå› çš„è½¬å½•èµ·æŠ‘åˆ¶ä½œç”¨ã€‚åœ¨æˆéª¨ç´ åŸºå› ã€2-æ™¶ä½“è›‹ç™½åŸºå› ã€CD4åŸºå› ã€Î²-ç è›‹ç™½åŸºå› ã€ç¥ç»èƒ¶è´¨ç»†èƒç²˜è¿åˆ†å­ã€ç¥ç»å…ƒ-ç¥ç»èƒ¶è´¨ç»†èƒç²˜è¿åˆ†å­ã€è¡€å°æ¿è¡ç”Ÿçš„ç”Ÿé•¿å› å­Aé“¾åŸºå› ã€è‚¾ç´ åŸºå› ç­‰ç­‰çš„ç ”ç©¶ä¸­å¯¹æ­¤æœ‰æè¿°ã€‚</p><h2 id="å†’å……è€…ç»¼åˆå¾"><a href="#å†’å……è€…ç»¼åˆå¾" class="headerlink" title="å†’å……è€…ç»¼åˆå¾"></a>å†’å……è€…ç»¼åˆå¾</h2><p>å†’å……è€…ç»¼åˆå¾æ˜¯æŒ‡æœ‰äº›äººå³ä½¿è·å¾—äº†ä¸€äº›æˆç»©ä¸æˆæœï¼Œä½†å´ç‰¹åˆ«ä¸è‡ªä¿¡ï¼Œç”šè‡³è®¤ä¸ºè¿™ä¸æ˜¯è‡ªå·±åº”å¾—çš„ï¼Œè€Œæ˜¯å†’å……é‚£äº›çœŸæ­£å‰å®³çš„äººè€Œå¾—åˆ°çš„ã€‚</p><h3 id="è§£å†³åŠæ³•"><a href="#è§£å†³åŠæ³•" class="headerlink" title="è§£å†³åŠæ³•"></a>è§£å†³åŠæ³•</h3><ol><li>å¤§å£°è¯´å‡ºè¿™ç§ â€œå†’åé¡¶æ›¿â€ çš„æ„Ÿå—ã€‚</li><li>è®°ä¸‹ä½ çš„åŠªåŠ›ä¸æˆå°±ã€‚</li><li>è®¾ç½®åˆç†çš„ç›®æ ‡ä¸æœŸæœ›ã€‚</li></ol><h2 id="åŠ³ä¼¦æ–¯é­”å’’"><a href="#åŠ³ä¼¦æ–¯é­”å’’" class="headerlink" title="åŠ³ä¼¦æ–¯é­”å’’"></a>åŠ³ä¼¦æ–¯é­”å’’</h2><p>1999å¹´ï¼Œç»æµå­¦å®¶åŠ³ä¼¦æ–¯æ€»ç»“å‡ºäº†ä¸€ä¸ªâ€œæ‘©å¤©å¤§æ¥¼æŒ‡æ•°â€ã€‚ä»–å‘ç°ï¼Œä¸–ç•Œä¸Šæ‰€æœ‰çš„æ‘©å¤©å¤§æ¥¼éƒ½ä¸ç»æµå‘¨æœŸçš„æ³¢åŠ¨æœ‰ç€ç´§å¯†è”ç³»ã€‚æ‘©å¤©å¤§å¦çš„å¼€å·¥æ—¶é—´é€šå¸¸éƒ½æ˜¯ç»æµå‘å±•çš„é¼ç››æ—¶æœŸï¼Œè€Œä¸€æ—¦å¤§å¦å»ºæˆï¼Œç»æµå±æœºä¾¿éšä¹‹å¸­å·è€Œæ¥ã€‚è¿™ä¸€è§„å¾‹ä¼¼ä¹å±¡è¯•ä¸çˆ½ï¼Œå› æ­¤ä¹Ÿè¢«ç§°ä¸ºâ€œåŠ³ä¼¦æ–¯é­”å’’â€ã€‚</p><h2 id="åŒç›²è¯•éªŒ"><a href="#åŒç›²è¯•éªŒ" class="headerlink" title="åŒç›²è¯•éªŒ"></a>åŒç›²è¯•éªŒ</h2><p>åœ¨è¯•éªŒè¿‡ç¨‹ä¸­ï¼Œæµ‹éªŒè€…ä¸è¢«æµ‹éªŒè€…éƒ½ä¸çŸ¥é“è¢«æµ‹è€…æ‰€å±çš„ç»„åˆ«ï¼ˆå®éªŒç»„æˆ–å¯¹ç…§ç»„ï¼‰ï¼Œåˆ†æè€…åœ¨åˆ†æèµ„æ–™æ—¶ï¼Œé€šå¸¸ä¹Ÿä¸çŸ¥é“æ­£åœ¨åˆ†æçš„èµ„æ–™å±äºå“ªä¸€ç»„ã€‚æ—¨åœ¨æ¶ˆé™¤å¯èƒ½å‡ºç°åœ¨å®éªŒè€…å’Œå‚ä¸è€…æ„è¯†å½“ä¸­çš„ä¸»è§‚åå·®å’Œä¸ªäººåå¥½ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼ŒåŒç›²å®éªŒè¦æ±‚è¾¾åˆ°éå¸¸é«˜çš„ç§‘å­¦ä¸¥æ ¼ç¨‹åº¦ã€‚</p><h2 id="æ³¡æ–‡åŒ–"><a href="#æ³¡æ–‡åŒ–" class="headerlink" title="æ³¡æ–‡åŒ–"></a>æ³¡æ–‡åŒ–</h2><p>ä¸­å›½ç¤¾ä¼šæ˜¯ä¸€ä¸ªäººæƒ…ç¤¾ä¼šï¼Œä¸­å›½æœ‰ä¸€ä¸ªå¾ˆå‡ºåçš„è¯ï¼Œå°±æ˜¯ã€Œæ³¡ã€ã€‚æ³¡å§ã€æ³¡å¦ï¼Œå¥½å…„å¼Ÿã€Œæ³¡ã€åœ¨ä¸€èµ·ç­‰ç­‰ã€‚ã€Œæ³¡ã€è¿™ä¸ªå­—çš„åæ—æ˜¯ä¸‰æ»´æ°´ï¼Œè¿™ä¸‰æ»´æ°´åˆ†åˆ«æ˜¯æ—¶é—´ã€é‡‘é’±å’Œæ„Ÿæƒ…ã€‚ä¸­å›½äººåŠäº‹å–œæ¬¢åƒé¥­ï¼Œéœ€è¦å…ˆè·Ÿä»–ä»¬ã€Œæ³¡ã€åœ¨ä¸€èµ·,è€Œä¸”è¿™ä»…ä»…æ˜¯ä¸€ä¸ªå¼€å§‹ï¼Œè¯´æ˜ä½ çš„äº‹æƒ…æœ‰äº†å¯èƒ½æ€§ã€‚æœ‰æ—¶å€™ï¼Œåªæ˜¯ä¸ºäº†è§è§ï¼Œå°±è·‘å¾ˆè¿œçš„è·¯å»å’Œå¯¹æ–¹ä¸€èµ·åƒä¸€é¡¿é¥­ã€‚æ²¡æœ‰åˆ«çš„ç›®çš„ï¼Œå°±æ˜¯ä¸ºäº†å–æ‚¦å¯¹æ–¹ï¼Œè®©ä»–é«˜å…´ï¼Œè¿™æ ·æ²Ÿé€šæ‰é¡ºç•…ã€‚</p><h2 id="è¾¾å…‹æ•ˆåº”"><a href="#è¾¾å…‹æ•ˆåº”" class="headerlink" title="è¾¾å…‹æ•ˆåº”"></a>è¾¾å…‹æ•ˆåº”</h2><p>è¾¾å…‹æ•ˆåº”ï¼ˆD-Keffectï¼‰ï¼Œå…¨ç§°ä¸ºé‚“å®-å…‹é²æ ¼æ•ˆåº”ï¼ˆDunning-Krugereffectï¼‰ï¼ŒæŒ‡çš„æ˜¯èƒ½åŠ›æ¬ ç¼ºçš„äººåœ¨è‡ªå·±æ¬ è€ƒè™‘çš„å†³å®šçš„åŸºç¡€ä¸Šå¾—å‡ºé”™è¯¯ç»“è®ºã€‚ é€šä¿—ç‚¹è§£é‡Šï¼Œå°±æ˜¯è°¢åšå¾·åšå£«è¯´çš„ï¼šâ€œæ€»æœ‰ä¸€äº›äººè®¤ä¸ºè‡ªå·±ä»€ä¹ˆéƒ½æ‡‚ï¼Œæˆ–è€…ä½ä¼°è‡ªå·±ä¸æ‡‚çš„äº‹æƒ…ã€‚â€</p><p>è¿™ä¸ªæ•ˆåº”æ˜¯ç”±ç¤¾ä¼šå¿ƒç†å­¦å®¶é‚“å®å’Œå…‹é²æ ¼è”åˆå‘ç°çš„ï¼Œä»–ä»¬é€šè¿‡å¯¹äººä»¬é˜…è¯»ã€é©¾é©¶ã€ä¸‹æ£‹æˆ–æ‰“ç½‘çƒç­‰å„ç§æŠ€èƒ½çš„ç ”ç©¶å‘ç°ï¼š åœ¨å¹½é»˜æ„Ÿã€æ–‡å­—èƒ½åŠ›å’Œé€»è¾‘èƒ½åŠ›ä¸Šæœ€æ¬ ç¼ºçš„é‚£éƒ¨åˆ†äººæ€»æ˜¯é«˜ä¼°è‡ªå·±ï¼Œå½“ä»–ä»¬å®é™…å¾—åˆ†åªæœ‰12%æ—¶ï¼Œå´è®¤ä¸ºè‡ªå·±çš„å¾—åˆ†åœ¨60%ä»¥ä¸Šã€‚</p><h2 id="è®¤çŸ¥å¤±è°ƒ"><a href="#è®¤çŸ¥å¤±è°ƒ" class="headerlink" title="è®¤çŸ¥å¤±è°ƒ"></a>è®¤çŸ¥å¤±è°ƒ</h2><p>è°¢åšå¾·åšå£«åœ¨æ¼”è®²ä¸­è¯´äº†ä¸€ä¸ªæ•…äº‹ï¼š2017å¹´é£“é£å“ˆç»´ç™»é™†ç¾å›½å¾—å…‹è¨æ–¯å·ä¼‘æ–¯é¡¿å¸‚ï¼Œ3å¤©ä¹‹å†…é™é›¨50è‹±å¯¸ï¼Œæ•´ä¸ªåŸå¸‚éƒ½é™·å…¥äº†ä¸€ç‰‡æ±ªæ´‹ä¹‹ä¸­ã€‚</p><p>ä½†åœ¨é£“é£ç™»å½•å‰ä¸€å‘¨ï¼Œè°¢åšå¾·åšå£«å°±å·²ç»åå¤æé†’ä¼‘æ–¯é¡¿å¸‚æ°‘ï¼šæ ¹æ®è§‚å¯Ÿï¼Œè¿™æ¬¡é£“é£åˆ°æ¥å¯èƒ½ä¼šé€ æˆ40åˆ°50è‹±å¯¸çš„é™é›¨é‡ã€‚å³ä¾¿å¦‚æ­¤ï¼Œå¸‚æ°‘ä»¬ä¾ç„¶æ— æ‰€ä½œä¸ºï¼Œå¹¶åœ¨ä¸€å‘¨åè¿æ¥äº†æ´ªç¾ï¼Œé€ æˆäº†é‡å¤§æŸå¤±ã€‚ä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Ÿä¼‘æ–¯é¡¿å½“åœ°è™½ç„¶ç»å¸¸ä¸‹é›¨ï¼Œä½†ä¹‹å‰å…¨å¹´çš„é™é›¨é‡ä¹Ÿæ‰34è‹±å¯¸ã€‚è°¢åšå¾·åšå£«æ‰€é¢„è¨€çš„â€œçŸ­æ—¶é—´å†…é™é›¨40åˆ°50è‹±å¯¸â€ï¼Œå·²ç»è¶…è¿‡äº†ä¼‘æ–¯é¡¿å¸‚æ°‘èƒ½å¤Ÿç†è§£çš„èŒƒå›´â€”â€”å‡ å¤©ä¹‹å†…å°±ä¸‹å®Œä¸€æ•´å¹´çš„é›¨ï¼Ÿè¿™æ€ä¹ˆå¯èƒ½ï¼å› ä¸ºå’Œè‡ªå·±è¿‡å»çš„ç»éªŒå‘ç”Ÿå†²çªï¼Œæ‰€ä»¥ä¼‘æ–¯é¡¿å¸‚æ°‘è¯´å¾—æœ€å¤šçš„ä¸€å¥è¯å°±æ˜¯ï¼šæˆ‘çœ‹åˆ°äº†é¢„è­¦ï¼Œä½†æ²¡æƒ³åˆ°çœŸçš„ä¼šè¿™ä¹ˆç³Ÿç³•ã€‚</p><p>è¿™å°±æ˜¯è°¢åšå¾·åšå£«è¯´çš„â€œè®¤çŸ¥å¤±è°ƒâ€ï¼šæ–°ä¿¡æ¯ä¸å·²æœ‰çš„ä¿¡å¿µç›¸çŸ›ç›¾ï¼Œæ— æ³•ç†è§£ç°æœ‰ç»éªŒå¤–çš„äº‹ç‰©çš„æ—¶å€™ï¼Œä¼šè®©äººäº§ç”Ÿå¤±è°ƒçš„æ„Ÿè§‰ï¼Œè¿™ç§æ„Ÿè§‰ä¼šé©±ä½¿ä¸€ä¸ªäººå»å¯»æ‰¾åˆç†åŒ–çš„è§£é‡Šï¼Œè®©è‡ªå·±çš„è®¤çŸ¥è¾¾åˆ°ä¸€è‡´ã€‚ä¼‘æ–¯é¡¿çš„å¸‚æ°‘å°±æ˜¯è¿™æ ·ï¼Œä»–ä»¬é¢å¯¹æ— æ³•ç†è§£çš„æ–°ä¿¡æ¯ï¼Œå°±å»æ‰¾ä¸€ä¸ªåˆç†åŒ–çš„è§£é‡Šï¼Œè§‰å¾—ç¾æƒ…ä¸ä¼šé‚£ä¹ˆç³Ÿç³•ï¼Œå¿½è§†ç§‘å­¦å®¶çš„è­¦å‘Šï¼Œæœ€åé€ æˆé‡å¤§æŸå¤±ã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;é£é…¸&quot;&gt;&lt;a href=&quot;#é£é…¸&quot; class=&quot;headerlink&quot; title=&quot;é£é…¸&quot;&gt;&lt;/a&gt;é£é…¸&lt;/h2&gt;&lt;p&gt;é£é…¸ç³»ç”±äº”å€å­ä¸­å¾—åˆ°çš„ä¸€ç§é£è´¨ã€‚ä¸ºé»„è‰²æˆ–æ·¡æ£•è‰²è½»è´¨æ— æ™¶æ€§ç²‰æœ«æˆ–é³ç‰‡ï¼›æ— è‡­ï¼Œå¾®æœ‰ç‰¹æ®Šæ°”å‘³ï¼Œå‘³ææ¶©ã€‚æº¶äºæ°´åŠä¹™é†‡ï¼Œæ˜“æº¶äºç”˜æ²¹ï¼Œå‡ ä¹ä¸æº¶äºä¹™é†šã€æ°¯
      
    
    </summary>
    
      <category term="æ—¥å¸¸è®°å½•" scheme="https://muhouer.github.io/categories/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/"/>
    
    
      <category term="åè¯" scheme="https://muhouer.github.io/tags/%E5%90%8D%E8%AF%8D/"/>
    
  </entry>
  
  <entry>
    <title>å¦‚ä½•ä¼˜åŒ–ç¼“å­˜ä¸­ç™¾ä¸‡çº§å¹¶å‘çš„key</title>
    <link href="https://muhouer.github.io/posts/2bc946e8/"/>
    <id>https://muhouer.github.io/posts/2bc946e8/</id>
    <published>2019-08-09T14:53:35.000Z</published>
    <updated>2019-08-09T15:15:30.491Z</updated>
    
    <content type="html"><![CDATA[<blockquote><h2 id="å¼•è¨€"><a href="#å¼•è¨€" class="headerlink" title="å¼•è¨€"></a>å¼•è¨€</h2><p>è¿™ä¸ªé—®é¢˜å®é™…ä¸Šå°±æ˜¯çƒ­ç‚¹keyé—®é¢˜ï¼Œå…¶å®çƒ­ç‚¹keyé—®é¢˜è¯´æ¥ä¹Ÿå¾ˆç®€å•ï¼Œå°±æ˜¯ç¬é—´æœ‰å‡ åä¸‡ä¸Šç™¾ä¸‡ï¼Œç”šè‡³æ›´å¤§çš„è¯·æ±‚å»è®¿é—®redisä¸ŠæŸä¸ªå›ºå®šçš„keyï¼Œä»è€Œå‹å®ç¼“å­˜æœåŠ¡çš„æƒ…æƒ…å†µã€‚<br>å…¶å®ç”Ÿæ´»ä¸­ä¹Ÿæ˜¯æœ‰ä¸å°‘è¿™æ ·çš„ä¾‹å­ï¼Œæ¯”å¦‚XXæ˜æ˜Ÿç»“å©šã€‚é‚£ä¹ˆå…³äºXXæ˜æ˜Ÿçš„Keyå°±ä¼šç¬é—´å¢å¤§ï¼Œå°±ä¼šå‡ºç°çƒ­ç‚¹æ•°æ®é—®é¢˜ã€‚</p><blockquote><p>PS:hot keyå’Œbig keyé—®é¢˜ï¼Œå¤§å®¶ä¸€å®šè¦æœ‰æ‰€äº†è§£ï¼Œéå¸¸é‡è¦ã€‚</p></blockquote><h2 id="çƒ­ç‚¹Keyé—®é¢˜"><a href="#çƒ­ç‚¹Keyé—®é¢˜" class="headerlink" title="çƒ­ç‚¹Keyé—®é¢˜"></a>çƒ­ç‚¹Keyé—®é¢˜</h2><p>ä¸Šé¢æåˆ°ï¼Œæ‰€è°“çƒ­ç‚¹keyé—®é¢˜å°±æ˜¯ï¼Œçªç„¶æœ‰å‡ åä¸‡ç”šè‡³æ›´å¤§çš„è¯·æ±‚å»è®¿é—®redisä¸Šçš„æŸä¸ªç‰¹å®škeyã€‚é‚£ä¹ˆï¼Œè¿™æ ·ä¼šé€ æˆæµé‡è¿‡äºé›†ä¸­ï¼Œè¾¾åˆ°Rediså•å®ä¾‹ç“¶é¢ˆï¼ˆä¸€èˆ¬æ˜¯10W OPSçº§åˆ«ï¼‰ï¼Œæˆ–è€…ç‰©ç†ç½‘å¡ä¸Šé™ï¼Œä»è€Œå¯¼è‡´è¿™å°redisçš„æœåŠ¡å™¨Holdä¸ä½ã€‚</p><p>é‚£æ¥ä¸‹æ¥è¿™ä¸ªkeyçš„è¯·æ±‚ï¼Œå°±ä¼šå‹å®ä½ çš„æœåŠ¡ã€‚</p><h3 id="æ€ä¹ˆå‘ç°çƒ­key"><a href="#æ€ä¹ˆå‘ç°çƒ­key" class="headerlink" title="æ€ä¹ˆå‘ç°çƒ­key"></a>æ€ä¹ˆå‘ç°çƒ­key</h3><h4 id="æ–¹æ³•ä¸€-å‡­å€Ÿä¸šåŠ¡ç»éªŒï¼Œè¿›è¡Œé¢„ä¼°å“ªäº›æ˜¯çƒ­key"><a href="#æ–¹æ³•ä¸€-å‡­å€Ÿä¸šåŠ¡ç»éªŒï¼Œè¿›è¡Œé¢„ä¼°å“ªäº›æ˜¯çƒ­key" class="headerlink" title="æ–¹æ³•ä¸€:å‡­å€Ÿä¸šåŠ¡ç»éªŒï¼Œè¿›è¡Œé¢„ä¼°å“ªäº›æ˜¯çƒ­key"></a>æ–¹æ³•ä¸€:å‡­å€Ÿä¸šåŠ¡ç»éªŒï¼Œè¿›è¡Œé¢„ä¼°å“ªäº›æ˜¯çƒ­key</h4><p>å…¶å®è¿™ä¸ªæ–¹æ³•è¿˜æ˜¯æŒºæœ‰å¯è¡Œæ€§çš„ã€‚æ¯”å¦‚æŸå•†å“åœ¨åšç§’æ€ï¼Œé‚£è¿™ä¸ªå•†å“çš„keyå°±å¯ä»¥åˆ¤æ–­å‡ºæ˜¯çƒ­keyã€‚ç¼ºç‚¹å¾ˆæ˜æ˜¾ï¼Œå¹¶éæ‰€æœ‰ä¸šåŠ¡éƒ½èƒ½é¢„ä¼°å‡ºå“ªäº›keyæ˜¯çƒ­keyã€‚</p><h4 id="æ–¹æ³•äºŒ-åœ¨å®¢æˆ·ç«¯è¿›è¡Œæ”¶é›†"><a href="#æ–¹æ³•äºŒ-åœ¨å®¢æˆ·ç«¯è¿›è¡Œæ”¶é›†" class="headerlink" title="æ–¹æ³•äºŒ:åœ¨å®¢æˆ·ç«¯è¿›è¡Œæ”¶é›†"></a>æ–¹æ³•äºŒ:åœ¨å®¢æˆ·ç«¯è¿›è¡Œæ”¶é›†</h4><p>è¿™ä¸ªæ–¹å¼å°±æ˜¯åœ¨æ“ä½œredisä¹‹å‰ï¼ŒåŠ å…¥ä¸€è¡Œä»£ç è¿›è¡Œæ•°æ®ç»Ÿè®¡ã€‚é‚£ä¹ˆè¿™ä¸ªæ•°æ®ç»Ÿè®¡çš„æ–¹å¼æœ‰å¾ˆå¤šç§ï¼Œä¹Ÿå¯ä»¥æ˜¯ç»™å¤–éƒ¨çš„é€šè®¯ç³»ç»Ÿå‘é€ä¸€ä¸ªé€šçŸ¥ä¿¡æ¯ã€‚ç¼ºç‚¹å°±æ˜¯å¯¹å®¢æˆ·ç«¯ä»£ç é€ æˆå…¥ä¾µã€‚</p><h4 id="æ–¹æ³•ä¸‰-åœ¨Proxyå±‚åšæ”¶é›†"><a href="#æ–¹æ³•ä¸‰-åœ¨Proxyå±‚åšæ”¶é›†" class="headerlink" title="æ–¹æ³•ä¸‰:åœ¨Proxyå±‚åšæ”¶é›†"></a>æ–¹æ³•ä¸‰:åœ¨Proxyå±‚åšæ”¶é›†</h4><p>æœ‰äº›é›†ç¾¤æ¶æ„æ˜¯ä¸‹é¢è¿™æ ·çš„ï¼ŒProxyå¯ä»¥æ˜¯Twemproxyï¼Œæ˜¯ç»Ÿä¸€çš„å…¥å£ã€‚å¯ä»¥åœ¨Proxyå±‚åšæ”¶é›†ä¸ŠæŠ¥ï¼Œä½†æ˜¯ç¼ºç‚¹å¾ˆæ˜æ˜¾ï¼Œå¹¶éæ‰€æœ‰çš„redisé›†ç¾¤æ¶æ„éƒ½æœ‰proxyã€‚</p><p><img src="/images/201908091100.png" alt="upload successful"></p><h4 id="æ–¹æ³•å››-ç”¨redisè‡ªå¸¦å‘½ä»¤"><a href="#æ–¹æ³•å››-ç”¨redisè‡ªå¸¦å‘½ä»¤" class="headerlink" title="æ–¹æ³•å››:ç”¨redisè‡ªå¸¦å‘½ä»¤"></a>æ–¹æ³•å››:ç”¨redisè‡ªå¸¦å‘½ä»¤</h4><p>(1)monitorå‘½ä»¤ï¼Œè¯¥å‘½ä»¤å¯ä»¥å®æ—¶æŠ“å–å‡ºredisæœåŠ¡å™¨æ¥æ”¶åˆ°çš„å‘½ä»¤ï¼Œç„¶åå†™ä»£ç ç»Ÿè®¡å‡ºçƒ­keyæ˜¯å•¥ã€‚å½“ç„¶ï¼Œä¹Ÿæœ‰ç°æˆçš„åˆ†æå·¥å…·å¯ä»¥ç»™ä½ ä½¿ç”¨ï¼Œæ¯”å¦‚redis-fainaã€‚ä½†æ˜¯è¯¥å‘½ä»¤åœ¨é«˜å¹¶å‘çš„æ¡ä»¶ä¸‹ï¼Œæœ‰å†…å­˜å¢æš´å¢çš„éšæ‚£ï¼Œè¿˜ä¼šé™ä½redisçš„æ€§èƒ½ã€‚</p><p>(2)hotkeyså‚æ•°ï¼Œredis 4.0.3æä¾›äº†redis-cliçš„çƒ­ç‚¹keyå‘ç°åŠŸèƒ½ï¼Œæ‰§è¡Œredis-cliæ—¶åŠ ä¸Šâ€“hotkeysé€‰é¡¹å³å¯ã€‚ä½†æ˜¯è¯¥å‚æ•°åœ¨æ‰§è¡Œçš„æ—¶å€™ï¼Œå¦‚æœkeyæ¯”è¾ƒå¤šï¼Œæ‰§è¡Œèµ·æ¥æ¯”è¾ƒæ…¢ã€‚</p><h4 id="æ–¹æ³•äº”-è‡ªå·±æŠ“åŒ…è¯„ä¼°"><a href="#æ–¹æ³•äº”-è‡ªå·±æŠ“åŒ…è¯„ä¼°" class="headerlink" title="æ–¹æ³•äº”:è‡ªå·±æŠ“åŒ…è¯„ä¼°"></a>æ–¹æ³•äº”:è‡ªå·±æŠ“åŒ…è¯„ä¼°</h4><p>Rediså®¢æˆ·ç«¯ä½¿ç”¨TCPåè®®ä¸æœåŠ¡ç«¯è¿›è¡Œäº¤äº’ï¼Œé€šä¿¡åè®®é‡‡ç”¨çš„æ˜¯RESPã€‚è‡ªå·±å†™ç¨‹åºç›‘å¬ç«¯å£ï¼ŒæŒ‰ç…§RESPåè®®è§„åˆ™è§£ææ•°æ®ï¼Œè¿›è¡Œåˆ†æã€‚ç¼ºç‚¹å°±æ˜¯å¼€å‘æˆæœ¬é«˜ï¼Œç»´æŠ¤å›°éš¾ï¼Œæœ‰ä¸¢åŒ…å¯èƒ½æ€§ã€‚</p><p>ä»¥ä¸Šäº”ç§æ–¹æ¡ˆï¼Œå„æœ‰ä¼˜ç¼ºç‚¹ã€‚æ ¹æ®è‡ªå·±ä¸šåŠ¡åœºæ™¯è¿›è¡ŒæŠ‰æ‹©å³å¯ã€‚é‚£ä¹ˆå‘ç°çƒ­keyåï¼Œå¦‚ä½•è§£å†³å‘¢ï¼Ÿ</p><h2 id="å¦‚ä½•è§£å†³"><a href="#å¦‚ä½•è§£å†³" class="headerlink" title="å¦‚ä½•è§£å†³"></a>å¦‚ä½•è§£å†³</h2><p>ç›®å‰ä¸šå†…çš„æ–¹æ¡ˆæœ‰ä¸¤ç§ï¼š</p><h3 id="äºŒçº§ç¼“å­˜ï¼ˆæ¨èï¼‰"><a href="#äºŒçº§ç¼“å­˜ï¼ˆæ¨èï¼‰" class="headerlink" title="äºŒçº§ç¼“å­˜ï¼ˆæ¨èï¼‰"></a>äºŒçº§ç¼“å­˜ï¼ˆæ¨èï¼‰</h3><p>æ¯”å¦‚åˆ©ç”¨ehcacheï¼Œæˆ–è€…guava-cacheï¼Œæˆ–è€…ä¸€ä¸ªHashMapæˆ–è€…Listéƒ½å¯ä»¥ã€‚åœ¨ä½ å‘ç°çƒ­keyä»¥åï¼ŒæŠŠçƒ­keyåŠ è½½åˆ°JVMä¸­ï¼ˆå¯ä»¥æ˜¯å †å†…ï¼Œä¹Ÿå¯ä»¥æ˜¯å †å¤–ï¼‰ã€‚é’ˆå¯¹è¿™ç§çƒ­keyè¯·æ±‚ï¼Œä¼šç›´æ¥ä»JVMä¸­å–ï¼Œè€Œä¸ä¼šèµ°åˆ°rediså±‚ã€‚</p><p>å‡è®¾æ­¤æ—¶æœ‰åä¸‡ä¸ªé’ˆå¯¹åŒä¸€ä¸ªkeyçš„è¯·æ±‚è¿‡æ¥,å¦‚æœæ²¡æœ‰æœ¬åœ°ç¼“å­˜ï¼Œè¿™åä¸‡ä¸ªè¯·æ±‚å°±ç›´æ¥æ€¼åˆ°åŒä¸€å°redisä¸Šäº†ã€‚ç°åœ¨å‡è®¾ï¼Œä½ çš„åº”ç”¨å±‚æœ‰10å°æœºå™¨ï¼ŒOKï¼Œä½ ä¹Ÿæœ‰jvmç¼“å­˜äº†ã€‚è¿™åä¸‡ä¸ªè¯·æ±‚å¹³å‡åˆ†æ•£å¼€æ¥ï¼Œæ¯ä¸ªæœºå™¨æœ‰10000ä¸ªè¯·æ±‚ï¼Œä¼šä»JVMä¸­å–åˆ°valueå€¼ï¼Œç„¶åè¿”å›æ•°æ®ã€‚é¿å…äº†åä¸‡ä¸ªè¯·æ±‚æ€¼åˆ°åŒä¸€å°redisä¸Šçš„æƒ…å½¢ã€‚</p><h3 id="å¤‡ä»½çƒ­ç‚¹key"><a href="#å¤‡ä»½çƒ­ç‚¹key" class="headerlink" title="å¤‡ä»½çƒ­ç‚¹key"></a>å¤‡ä»½çƒ­ç‚¹key</h3><p>è¿™ä¸ªæ–¹æ¡ˆä¹Ÿå¾ˆç®€å•ã€‚ä¸è¦è®©keyèµ°åˆ°åŒä¸€å°redisä¸Šä¸å°±è¡Œäº†ã€‚æˆ‘ä»¬æŠŠè¿™ä¸ªkeyï¼Œåœ¨å¤šä¸ªredisä¸Šéƒ½å­˜ä¸€ä»½ä¸å°±å¥½äº†ã€‚æ¥ä¸‹æ¥ï¼Œæœ‰çƒ­keyè¯·æ±‚è¿›æ¥çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±åœ¨æœ‰å¤‡ä»½çš„redisä¸Šéšæœºé€‰å–ä¸€å°ï¼Œè¿›è¡Œè®¿é—®å–å€¼ï¼Œè¿”å›æ•°æ®ã€‚<br>å‡è®¾redisçš„é›†ç¾¤æ•°é‡ä¸ºNï¼Œæ­¥éª¤å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br><img src="/images/201908091101.png" alt="upload successful"></p><p>è¯´æ˜: ä¸ä¸€å®šæ˜¯2Nï¼Œä½ æƒ³å–4Nï¼Œ8Néƒ½å¯ä»¥ï¼Œçœ‹è¦æ±‚ã€‚ä¼ªä»£ç å¦‚ä¸‹:</p><p>è¯´æ˜ï¼šè¿™ç§æ–¹æ¡ˆæœ‰ä¸€ä¸ªå¾ˆæ˜æ˜¾çš„ç¼ºç‚¹ï¼Œå°±æ˜¯ç¼“å­˜çš„ç»´æŠ¤ä»£ä»·éå¸¸å¤§ã€‚å‡è®¾æœ‰100ä¸ªå¤‡ä»½KEYï¼Œé‚£ä¹ˆåœ¨åˆ é™¤æˆ–è€…æ›´æ–°æ—¶ï¼Œä¹Ÿéœ€è¦æ›´æ–°100ä¸ªKEYï¼Œæ‰€ä»¥è¿™ç§æ–¹æ¡ˆä¸æ˜¯å¾ˆæ¨èã€‚<br>ä¸šå†…æ–¹æ¡ˆ</p><p>OKï¼Œå…¶å®çœ‹å®Œä¸Šé¢çš„å†…å®¹ï¼Œå¤§å®¶å¯èƒ½ä¼šæœ‰ä¸€ä¸ªç–‘é—®ã€‚</p><h3 id="è‡ªåŠ¨å‘ä¿¡çƒ­ç‚¹keyï¼Œç¨‹åºè‡ªåŠ¨å¤„ç†"><a href="#è‡ªåŠ¨å‘ä¿¡çƒ­ç‚¹keyï¼Œç¨‹åºè‡ªåŠ¨å¤„ç†" class="headerlink" title="è‡ªåŠ¨å‘ä¿¡çƒ­ç‚¹keyï¼Œç¨‹åºè‡ªåŠ¨å¤„ç†"></a>è‡ªåŠ¨å‘ä¿¡çƒ­ç‚¹keyï¼Œç¨‹åºè‡ªåŠ¨å¤„ç†</h3><p>æœ‰åŠæ³•åœ¨é¡¹ç›®è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œè‡ªåŠ¨å‘ç°çƒ­ç‚¹keyï¼Œç„¶åç¨‹åºè‡ªåŠ¨å¤„ç†ä¹ˆï¼Ÿ<br>å—¯ï¼Œå¥½é—®é¢˜ï¼Œé‚£æˆ‘ä»¬æ¥è®²è®²ä¸šå†…æ€ä¹ˆåšçš„ã€‚å…¶å®åªæœ‰ä¸¤æ­¥ï¼š</p><ol><li>ç›‘æ§çƒ­ç‚¹key</li><li>é€šçŸ¥ç³»ç»Ÿåšå¤„ç†</li></ol><p>æ­£å·§ï¼Œå‰å‡ å¤©æœ‰èµå‡ºäº†ä¸€ç¯‡ã€Šæœ‰èµé€æ˜å¤šçº§ç¼“å­˜è§£å†³æ–¹æ¡ˆï¼ˆTMCï¼‰ã€‹ï¼Œé‡Œå¤´ä¹Ÿæœ‰æåˆ°çƒ­ç‚¹keyé—®é¢˜ï¼Œæˆ‘ä»¬åˆšå¥½å€Ÿæ­¤è¯´æ˜ã€‚</p><p>(1) ç›‘æ§çƒ­ç‚¹key<br>åœ¨ç›‘æ§çƒ­ç‚¹keyæ–¹é¢ï¼Œæœ‰èµç”¨çš„æ˜¯æ–¹å¼äºŒï¼šåœ¨å®¢æˆ·ç«¯è¿›è¡Œæ”¶é›†ã€‚</p><p>åœ¨<a href="https://segmentfault.com/a/1190000017142556?utm_source=tag-newest" target="_blank" rel="noopener">ã€Šæœ‰èµé€æ˜å¤šçº§ç¼“å­˜è§£å†³æ–¹æ¡ˆï¼ˆTMCï¼‰ã€‹</a>ä¸­æœ‰ä¸€å¥è¯æåˆ°</p><blockquote><p>TMC å¯¹åŸç”ŸjedisåŒ…çš„JedisPoolå’ŒJedisç±»åšäº†æ”¹é€ ï¼Œåœ¨JedisPoolåˆå§‹åŒ–è¿‡ç¨‹ä¸­é›†æˆTMCâ€œçƒ­ç‚¹å‘ç°â€+â€œæœ¬åœ°ç¼“å­˜â€åŠŸèƒ½Hermes-SDKåŒ…çš„åˆå§‹åŒ–é€»è¾‘ã€‚<br>ä¹Ÿå°±è¯´äººå®¶æ”¹å†™äº†jedisåŸç”Ÿçš„jaråŒ…ï¼ŒåŠ å…¥äº†Hermes-SDKåŒ…ã€‚</p></blockquote><p>é‚£Hermes-SDKåŒ…ç”¨æ¥å¹²å˜›ï¼ŸOKï¼Œå°±æ˜¯åšçƒ­ç‚¹å‘ç°å’Œæœ¬åœ°ç¼“å­˜ã€‚</p><p>ä»ç›‘æ§çš„è§’åº¦çœ‹ï¼Œè¯¥åŒ…å¯¹äºJedis-Clientçš„æ¯æ¬¡keyå€¼è®¿é—®è¯·æ±‚ï¼ŒHermes-SDK éƒ½ä¼šé€šè¿‡å…¶é€šä¿¡æ¨¡å—å°†keyè®¿é—®äº‹ä»¶å¼‚æ­¥ä¸ŠæŠ¥ç»™HermesæœåŠ¡ç«¯é›†ç¾¤ï¼Œä»¥ä¾¿å…¶æ ¹æ®ä¸ŠæŠ¥æ•°æ®è¿›è¡Œâ€œçƒ­ç‚¹æ¢æµ‹â€ã€‚</p><p>å½“ç„¶ï¼Œè¿™åªæ˜¯å…¶ä¸­ä¸€ç§æ–¹å¼ï¼Œæœ‰çš„å…¬å¸åœ¨ç›‘æ§æ–¹é¢ç”¨çš„æ˜¯æ–¹å¼äº”: è‡ªå·±æŠ“åŒ…è¯„ä¼°ã€‚å…·ä½“æ˜¯è¿™ä¹ˆåšçš„ï¼Œå…ˆåˆ©ç”¨flinkæ­å»ºä¸€å¥—æµå¼è®¡ç®—ç³»ç»Ÿã€‚ç„¶åè‡ªå·±å†™ä¸€ä¸ªæŠ“åŒ…ç¨‹åºæŠ“redisç›‘å¬ç«¯å£çš„æ•°æ®ï¼ŒæŠ“åˆ°æ•°æ®åå¾€kafkaé‡Œä¸¢ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæµå¼è®¡ç®—ç³»ç»Ÿæ¶ˆè´¹kafkaé‡Œçš„æ•°æ®ï¼Œè¿›è¡Œæ•°æ®ç»Ÿè®¡å³å¯ï¼Œä¹Ÿèƒ½è¾¾åˆ°ç›‘æ§çƒ­keyçš„ç›®çš„ã€‚</p><p>(2) é€šçŸ¥ç³»ç»Ÿåšå¤„ç†<br>åœ¨è¿™ä¸ªè§’åº¦ï¼Œæœ‰èµç”¨çš„æ˜¯ä¸Šé¢çš„è§£å†³æ–¹æ¡ˆä¸€:åˆ©ç”¨äºŒçº§ç¼“å­˜è¿›è¡Œå¤„ç†ã€‚<br>æœ‰èµåœ¨ç›‘æ§åˆ°çƒ­keyåï¼ŒHermesæœåŠ¡ç«¯é›†ç¾¤ä¼šé€šè¿‡å„ç§æ‰‹æ®µé€šçŸ¥å„ä¸šåŠ¡ç³»ç»Ÿé‡Œçš„Hermes-SDKï¼Œå‘Šè¯‰ä»–ä»¬:â€è€å¼Ÿï¼Œè¿™ä¸ªkeyæ˜¯çƒ­keyï¼Œè®°å¾—åšæœ¬åœ°ç¼“å­˜ã€‚â€</p><p>äºæ˜¯Hermes-SDKå°±ä¼šå°†è¯¥keyç¼“å­˜åœ¨æœ¬åœ°ï¼Œå¯¹äºåé¢çš„è¯·æ±‚ã€‚Hermes-SDKå‘ç°è¿™ä¸ªæ˜¯ä¸€ä¸ªçƒ­keyï¼Œç›´æ¥ä»æœ¬åœ°ä¸­æ‹¿ï¼Œè€Œä¸ä¼šå»è®¿é—®é›†ç¾¤ã€‚</p><p>é™¤äº†è¿™ç§é€šçŸ¥æ–¹å¼ä»¥å¤–ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥è¿™ä¹ˆåšï¼Œæ¯”å¦‚ä½ çš„æµå¼è®¡ç®—ç³»ç»Ÿç›‘æ§åˆ°çƒ­keyäº†ï¼Œå¾€zookeeperé‡Œå¤´çš„æŸä¸ªèŠ‚ç‚¹é‡Œå†™ã€‚ç„¶åä½ çš„ä¸šåŠ¡ç³»ç»Ÿç›‘å¬è¯¥èŠ‚ç‚¹ï¼Œå‘ç°èŠ‚ç‚¹æ•°æ®å˜åŒ–äº†ï¼Œå°±ä»£è¡¨å‘ç°çƒ­keyã€‚æœ€åå¾€æœ¬åœ°ç¼“å­˜é‡Œå†™ï¼Œä¹Ÿæ˜¯å¯ä»¥çš„ã€‚</p><p>é€šçŸ¥æ–¹å¼å„ç§å„æ ·ï¼Œå¤§å®¶å¯ä»¥è‡ªç”±å‘æŒ¥ã€‚æœ¬æ–‡åªæ˜¯æä¾›ä¸€ä¸ªæ€è·¯ã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>å¸Œæœ›é€šè¿‡æœ¬æ–‡ï¼Œå¤§å®¶æ˜ç™½å¦‚ä½•å¤„ç†ç”Ÿäº§ä¸Šé‡åˆ°çš„çƒ­keyé—®é¢˜ã€‚</p><footer><strong>å­¤ç‹¬çƒŸ</strong><cite><a href="https://mp.weixin.qq.com/s/cipWMjkBprbuRxZEb3a3vQ" target="_blank" rel="noopener">å¦‚ä½•ä¼˜åŒ–ç¼“å­˜ä¸­ç™¾ä¸‡çº§å¹¶å‘çš„key</a></cite></footer></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;&lt;h2 id=&quot;å¼•è¨€&quot;&gt;&lt;a href=&quot;#å¼•è¨€&quot; class=&quot;headerlink&quot; title=&quot;å¼•è¨€&quot;&gt;&lt;/a&gt;å¼•è¨€&lt;/h2&gt;&lt;p&gt;è¿™ä¸ªé—®é¢˜å®é™…ä¸Šå°±æ˜¯çƒ­ç‚¹keyé—®é¢˜ï¼Œå…¶å®çƒ­ç‚¹keyé—®é¢˜è¯´æ¥ä¹Ÿå¾ˆç®€å•ï¼Œå°±æ˜¯ç¬é—´æœ‰å‡ åä¸‡ä¸Šç™¾ä¸‡ï¼Œç”šè‡³æ›´å¤§çš„è¯·æ±‚å»è®¿é—®red
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨Javaæ—¶çš„ä¸€äº›å‘</title>
    <link href="https://muhouer.github.io/posts/45d267df/"/>
    <id>https://muhouer.github.io/posts/45d267df/</id>
    <published>2019-08-09T14:27:00.000Z</published>
    <updated>2019-08-09T14:46:16.957Z</updated>
    
    <content type="html"><![CDATA[<h3 id="Arrays-asList-å­˜åœ¨çš„å‘"><a href="#Arrays-asList-å­˜åœ¨çš„å‘" class="headerlink" title="Arrays.asList å­˜åœ¨çš„å‘"></a>Arrays.asList å­˜åœ¨çš„å‘</h3><p>é˜¿é‡Œå·´å·´javaå¼€å‘è§„èŒƒè¯´åˆ°ä½¿ç”¨å·¥å…·ç±»<code>Arrays.asList()</code>æ–¹æ³•æŠŠæ•°ç»„è½¬æ¢æˆé›†åˆæ—¶ï¼Œä¸èƒ½ä½¿ç”¨å…¶ä¿®æ”¹é›†åˆç›¸å…³çš„æ–¹æ³•ï¼Œå®ƒçš„<code>add</code>/<code>remove</code>/<code>clear</code>æ–¹æ³•ä¼šæŠ›å‡º<code>UnsupportedOperationException</code>ã€‚</p><h4 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public static void main(String[] args) &#123;</span><br><span class="line">    List&lt;String&gt; list = Arrays.asList(&quot;F&quot;, &quot;r&quot;, &quot;e&quot;, &quot;y&quot;, &quot;a&quot;);</span><br><span class="line">//    list.clear();</span><br><span class="line">//    list.remove(&quot;a&quot;);</span><br><span class="line">      list.add(&quot;h&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œä»¥ä¸Šä¸‰ä¸ªæ–¹æ³•ä¸­ä»»ä½•ä¸€ä¸ªéƒ½ä¼šæŠ¥ä»¥ä¸‹å¼‚å¸¸</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Exception in thread &quot;main&quot; java.lang.UnsupportedOperationException</span><br><span class="line">at java.util.AbstractList.add(AbstractList.java:148)</span><br><span class="line">at java.util.AbstractList.add(AbstractList.java:108)</span><br><span class="line"> Â  Â â€¦â€¦</span><br></pre></td></tr></table></figure><h4 id="åŸå› "><a href="#åŸå› " class="headerlink" title="åŸå› "></a>åŸå› </h4><p>ç‚¹è¿›å»<code>Arrays.asList</code>ï¼Œå®ç°å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@SafeVarargs</span><br><span class="line">@SuppressWarnings(&quot;varargs&quot;)</span><br><span class="line">public static &lt;T&gt; List&lt;T&gt; asList(T... a) &#123;</span><br><span class="line">    return new ArrayList&lt;&gt;(a);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ª <code>ArrayList</code> å¹¶ä¸æ˜¯æˆ‘ä»¬å¹³æ—¶ç”¨çš„<code>ArrayList</code>ã€‚è€Œæ˜¯<code>Arrays</code>é‡Œé¢çš„ä¸€ä¸ªå†…éƒ¨ç±»ã€‚å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line">private static class ArrayList&lt;E&gt; extends AbstractList&lt;E&gt; implements RandomAccess, java.io.Serializable</span><br><span class="line">&#123;</span><br><span class="line">    private static final long serialVersionUID = -2764017481108945198L;</span><br><span class="line">    private final E[] a;</span><br><span class="line"></span><br><span class="line">    ArrayList(E[] array) &#123;</span><br><span class="line">        a = Objects.requireNonNull(array);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public int size() &#123;</span><br><span class="line">        return a.length;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public Object[] toArray() &#123;</span><br><span class="line">        return a.clone();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    @SuppressWarnings(&quot;unchecked&quot;)</span><br><span class="line">    public &lt;T&gt; T[] toArray(T[] a) &#123;</span><br><span class="line">        int size = size();</span><br><span class="line">        if (a.length &lt; size)</span><br><span class="line">            return Arrays.copyOf(this.a, size,</span><br><span class="line">                                 (Class&lt;? extends T[]&gt;) a.getClass());</span><br><span class="line">        System.arraycopy(this.a, 0, a, 0, size);</span><br><span class="line">        if (a.length &gt; size)</span><br><span class="line">            a[size] = null;</span><br><span class="line">        return a;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public E get(int index) &#123;</span><br><span class="line">        return a[index];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public E set(int index, E element) &#123;</span><br><span class="line">        E oldValue = a[index];</span><br><span class="line">        a[index] = element;</span><br><span class="line">        return oldValue;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public int indexOf(Object o) &#123;</span><br><span class="line">        E[] a = this.a;</span><br><span class="line">        if (o == null) &#123;</span><br><span class="line">            for (int i = 0; i &lt; a.length; i++)</span><br><span class="line">                if (a[i] == null)</span><br><span class="line">                    return i;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            for (int i = 0; i &lt; a.length; i++)</span><br><span class="line">                if (o.equals(a[i]))</span><br><span class="line">                    return i;</span><br><span class="line">        &#125;</span><br><span class="line">        return -1;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public boolean contains(Object o) &#123;</span><br><span class="line">        return indexOf(o) != -1;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public Spliterator&lt;E&gt; spliterator() &#123;</span><br><span class="line">        return Spliterators.spliterator(a, Spliterator.ORDERED);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void forEach(Consumer&lt;? super E&gt; action) &#123;</span><br><span class="line">        Objects.requireNonNull(action);</span><br><span class="line">        for (E e : a) &#123;</span><br><span class="line">            action.accept(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void replaceAll(UnaryOperator&lt;E&gt; operator) &#123;</span><br><span class="line">        Objects.requireNonNull(operator);</span><br><span class="line">        E[] a = this.a;</span><br><span class="line">        for (int i = 0; i &lt; a.length; i++) &#123;</span><br><span class="line">            a[i] = operator.apply(a[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void sort(Comparator&lt;? super E&gt; c) &#123;</span><br><span class="line">        Arrays.sort(a, c);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå†…éƒ¨ç±»æ²¡æœ‰<code>add</code>ï¼Œ<code>clear</code>ï¼Œ<code>remove</code>æ–¹æ³•ï¼Œæ‰€ä»¥æŠ›å‡ºçš„å¼‚å¸¸å…¶å®æ¥è‡ªäº<code>AbstractList</code>ã€‚ç‚¹è¿›å»å°±ä¼šå‘ç°æŠ›å‡ºå¼‚å¸¸çš„åœ°æ–¹ï¼Œclearåº•å±‚ä¹Ÿä¼šè°ƒç”¨åˆ°removeæ‰€ä»¥ä¹Ÿä¼šæŠ›å‡ºå¼‚å¸¸ã€‚å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">public void add(int index, E element) &#123;</span><br><span class="line">    throw new UnsupportedOperationException();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public E remove(int index) &#123;</span><br><span class="line">    throw new UnsupportedOperationException();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å¡«å‘"><a href="#å¡«å‘" class="headerlink" title="å¡«å‘"></a>å¡«å‘</h4><p><code>Arrays.asList()</code>åº•å±‚å…¶å®è¿˜æ˜¯æ•°ç»„ã€‚å¦‚æœä½¿ç”¨äº†<code>Arrays.asList()</code>çš„è¯ï¼Œæœ€å¥½ä¸è¦ä½¿ç”¨å…¶é›†åˆçš„æ“ä½œæ–¹æ³•ã€‚å¦‚æœæƒ³è¦ä½¿ç”¨ï¼Œ<code>List&lt;String&gt; list = new ArrayList&lt;&gt;(Arrays.asList(&quot;F&quot;, &quot;r&quot;, &quot;e&quot;, &quot;y&quot;, &quot;a&quot;))</code>å¯ä»¥åœ¨å¤–é¢è¿™æ ·åŒ…ä¸€å±‚çœŸæ­£çš„ArrayListã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;Arrays-asList-å­˜åœ¨çš„å‘&quot;&gt;&lt;a href=&quot;#Arrays-asList-å­˜åœ¨çš„å‘&quot; class=&quot;headerlink&quot; title=&quot;Arrays.asList å­˜åœ¨çš„å‘&quot;&gt;&lt;/a&gt;Arrays.asList å­˜åœ¨çš„å‘&lt;/h3&gt;&lt;p&gt;é˜¿é‡Œå·´å·´ja
      
    
    </summary>
    
      <category term="Java" scheme="https://muhouer.github.io/categories/Java/"/>
    
    
  </entry>
  
  <entry>
    <title>ä¸€äº›é‡‘èæ¦‚å¿µ</title>
    <link href="https://muhouer.github.io/posts/6b8c9691/"/>
    <id>https://muhouer.github.io/posts/6b8c9691/</id>
    <published>2019-08-09T14:11:00.000Z</published>
    <updated>2019-08-11T04:36:38.652Z</updated>
    
    <content type="html"><![CDATA[<h3 id="Q-ä»€ä¹ˆæ˜¯æˆ´ç»´æ–¯åŒå‡»å’Œæˆ´ç»´æ–¯åŒæ€ï¼Ÿ"><a href="#Q-ä»€ä¹ˆæ˜¯æˆ´ç»´æ–¯åŒå‡»å’Œæˆ´ç»´æ–¯åŒæ€ï¼Ÿ" class="headerlink" title="Q: ä»€ä¹ˆæ˜¯æˆ´ç»´æ–¯åŒå‡»å’Œæˆ´ç»´æ–¯åŒæ€ï¼Ÿ"></a>Q: ä»€ä¹ˆæ˜¯æˆ´ç»´æ–¯åŒå‡»å’Œæˆ´ç»´æ–¯åŒæ€ï¼Ÿ</h3><ol><li>æˆ´ç»´æ–¯åŒå‡»: åœ¨æ™¯æ°”å‘¨æœŸé‡Œï¼Œä¸Šå¸‚å…¬å¸çš„ä¸šç»©å’Œä¼°å€¼åŒæ­¥ä¸Šå‡ã€‚</li><li>æˆ´ç»´æ–¯åŒæ€: åœ¨ä¸æ™¯æ°”å‘¨æœŸé‡Œï¼Œä¸Šå¸‚å…¬å¸çš„ä¸šç»©å’Œä¼°å€¼åŒæ­¥ä¸‹é™ã€‚</li></ol><h3 id="Q-ä»€ä¹ˆæ˜¯LOFåŸºé‡‘ï¼Ÿ"><a href="#Q-ä»€ä¹ˆæ˜¯LOFåŸºé‡‘ï¼Ÿ" class="headerlink" title="Q: ä»€ä¹ˆæ˜¯LOFåŸºé‡‘ï¼Ÿ"></a>Q: ä»€ä¹ˆæ˜¯LOFåŸºé‡‘ï¼Ÿ</h3><p>LOFåŸºé‡‘ï¼ˆListed Open-Ended Fundï¼‰ï¼Œä¹Ÿç§°ä¸ºâ€œä¸Šå¸‚å‹å¼€æ”¾å¼åŸºé‡‘â€ã€‚æŠ•èµ„è€…æ—¢å¯ä»¥é€šè¿‡ä¸€çº§å¸‚åœºå¼€æ”¾å¼åŸºé‡‘è´¦æˆ·ç”³è´­ä¸èµå›åŸºé‡‘ä»½é¢ï¼Œä¹Ÿå¯ä»¥åœ¨è¯åˆ¸äº¤æ˜“æ‰€äºŒçº§å¸‚åœºä¹°å–åŸºé‡‘ã€‚ä¸è¿‡ï¼ŒæŠ•èµ„è€…å¦‚æœæ˜¯é€šè¿‡ä¸€çº§å¸‚åœºå¼€æ”¾å¼åŸºé‡‘è´¦æˆ·ç”³è´­çš„åŸºé‡‘ä»½é¢ï¼Œæƒ³è¦åœ¨äº¤æ˜“æ‰€äºŒçº§å¸‚åœºå–å‡ºï¼Œåˆ™é¡»åŠç†è½¬æ‰˜ç®¡æ‰‹ç»­ï¼›åŒæ ·ï¼Œå¦‚æœæ˜¯åœ¨äº¤æ˜“æ‰€äºŒçº§å¸‚åœºä¹°è¿›çš„åŸºé‡‘ä»½é¢ï¼Œæƒ³è¦åœ¨ä¸€çº§å¸‚åœºèµå›ï¼Œä¹Ÿè¦åŠç†è½¬æ‰˜ç®¡æ‰‹ç»­ã€‚</p><h3 id="Q-å…³äºç†Šå¸‚å¤§è·Œ"><a href="#Q-å…³äºç†Šå¸‚å¤§è·Œ" class="headerlink" title="Q: å…³äºç†Šå¸‚å¤§è·Œ"></a>Q: å…³äºç†Šå¸‚å¤§è·Œ</h3><p>â€œåœ¨è¿‡å»70å¤šå¹´å†å²ä¸Šå‘ç”Ÿçš„40æ¬¡è‚¡å¸‚æš´è·Œä¸­ï¼Œå³ä½¿å…¶ä¸­39æ¬¡æˆ‘æå‰é¢„æµ‹åˆ°ï¼Œè€Œä¸”åœ¨æš´è·Œå‰å–æ‰äº†æ‰€æœ‰çš„è‚¡ç¥¨ï¼Œæˆ‘æœ€åä¹Ÿä¼šåæ‚”ä¸‡åˆ†çš„ã€‚å› ä¸ºå³ä½¿æ˜¯è·Œå¹…æœ€å¤§çš„é‚£æ¬¡è‚¡ç¾ï¼Œè‚¡ä»·æœ€ç»ˆä¹Ÿæ¶¨å›æ¥äº†ï¼Œè€Œä¸”æ¶¨å¾—æ›´é«˜ã€‚â€â€”â€”åŸºé‡‘ç»ç†ï¼Œå½¼å¾—æ—å¥‡</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;Q-ä»€ä¹ˆæ˜¯æˆ´ç»´æ–¯åŒå‡»å’Œæˆ´ç»´æ–¯åŒæ€ï¼Ÿ&quot;&gt;&lt;a href=&quot;#Q-ä»€ä¹ˆæ˜¯æˆ´ç»´æ–¯åŒå‡»å’Œæˆ´ç»´æ–¯åŒæ€ï¼Ÿ&quot; class=&quot;headerlink&quot; title=&quot;Q: ä»€ä¹ˆæ˜¯æˆ´ç»´æ–¯åŒå‡»å’Œæˆ´ç»´æ–¯åŒæ€ï¼Ÿ&quot;&gt;&lt;/a&gt;Q: ä»€ä¹ˆæ˜¯æˆ´ç»´æ–¯åŒå‡»å’Œæˆ´ç»´æ–¯åŒæ€ï¼Ÿ&lt;/h3&gt;&lt;ol&gt;&lt;li&gt;æˆ´ç»´æ–¯
      
    
    </summary>
    
      <category term="ç†è´¢" scheme="https://muhouer.github.io/categories/%E7%90%86%E8%B4%A2/"/>
    
    
      <category term="é‡‘èæ¦‚å¿µ" scheme="https://muhouer.github.io/tags/%E9%87%91%E8%9E%8D%E6%A6%82%E5%BF%B5/"/>
    
  </entry>
  
  <entry>
    <title>æ‹¾å¥ç³»åˆ—</title>
    <link href="https://muhouer.github.io/posts/53e650a7/"/>
    <id>https://muhouer.github.io/posts/53e650a7/</id>
    <published>2019-08-09T14:02:00.000Z</published>
    <updated>2019-08-09T14:09:30.961Z</updated>
    
    <content type="html"><![CDATA[<h2 id="æ‹¾å¥ç³»åˆ—1"><a href="#æ‹¾å¥ç³»åˆ—1" class="headerlink" title="æ‹¾å¥ç³»åˆ—1"></a>æ‹¾å¥ç³»åˆ—1</h2><p>æ‹¾å¥ç³»åˆ—ä¸»è¦è®°å½•å¹³å¸¸ç”Ÿæ´»å’Œå·¥ä½œä¸­é‡åˆ°çš„ä¸€äº›å¥å­ï¼Œå½“æ—¶æœ‰ç‚¹æ„Ÿè§¦ï¼Œç‰¹æ­¤è®°å½•ä¸€ä¸‹ã€‚è®°å½•è¿˜ä¼šç»§ç»­ï¼Œä¸è¿‡ï¼Œéšç€æ—¶é—´çš„æµé€ï¼Œå¯èƒ½ä¹Ÿä¼šåˆ é™¤ä¸€éƒ¨åˆ†æˆ–åšä¸€äº›ä¿®æ”¹ã€‚</p><ol><li><a href="/posts/922764cc/" title="æ‹¾å¥-æƒŠè‰³">æ‹¾å¥-æƒŠè‰³</a></li><li><a href="/posts/497a5083/" title="æ‹¾å¥-çˆ±">æ‹¾å¥-çˆ±</a></li><li><a href="/posts/60ae6d78/" title="æ‹¾å¥-ä¸§">æ‹¾å¥-ä¸§</a></li><li><a href="/posts/4be8e193/" title="æ‹¾å¥-å¼€è§£è‡ªå·±">æ‹¾å¥-å¼€è§£è‡ªå·±</a></li><li><a href="/posts/70b9f430/" title="æ‹¾å¥-ä¹è¯„">æ‹¾å¥-ä¹è¯„</a></li><li><a href="/posts/a9bf165e/" title="æ‹¾å¥-ç°å®">æ‹¾å¥-ç°å®</a></li><li><a href="/posts/ef52fadf/" title="æ‹¾å¥-æ€è€ƒ">æ‹¾å¥-æ€è€ƒ</a></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;æ‹¾å¥ç³»åˆ—1&quot;&gt;&lt;a href=&quot;#æ‹¾å¥ç³»åˆ—1&quot; class=&quot;headerlink&quot; title=&quot;æ‹¾å¥ç³»åˆ—1&quot;&gt;&lt;/a&gt;æ‹¾å¥ç³»åˆ—1&lt;/h2&gt;&lt;p&gt;æ‹¾å¥ç³»åˆ—ä¸»è¦è®°å½•å¹³å¸¸ç”Ÿæ´»å’Œå·¥ä½œä¸­é‡åˆ°çš„ä¸€äº›å¥å­ï¼Œå½“æ—¶æœ‰ç‚¹æ„Ÿè§¦ï¼Œç‰¹æ­¤è®°å½•ä¸€ä¸‹ã€‚è®°å½•è¿˜ä¼šç»§ç»­ï¼Œä¸è¿‡ï¼Œéšç€æ—¶é—´çš„æµé€ï¼Œå¯èƒ½
      
    
    </summary>
    
      <category term="æ‹¾å¥" scheme="https://muhouer.github.io/categories/%E6%8B%BE%E5%8F%A5/"/>
    
    
      <category term="æ±‡æ€»" scheme="https://muhouer.github.io/tags/%E6%B1%87%E6%80%BB/"/>
    
  </entry>
  
  <entry>
    <title>æ‹¾å¥-æ€è€ƒ</title>
    <link href="https://muhouer.github.io/posts/ef52fadf/"/>
    <id>https://muhouer.github.io/posts/ef52fadf/</id>
    <published>2019-08-09T13:58:00.000Z</published>
    <updated>2019-08-19T15:53:57.693Z</updated>
    
    <content type="html"><![CDATA[<h3 id="001"><a href="#001" class="headerlink" title="001"></a>001</h3><hr><ol><li><strong>ç›¸æ¯”æ¬§æ´²å‡ ä¸ªå‘è¾¾å›½å®¶ï¼Œç¾å›½åœ¨å¯ç‰©ç†æ„ŸçŸ¥çš„å¾ˆå¤šç»†èŠ‚ä¸Šéƒ½å¯ä»¥ç”¨ç²—ç ºæ¥å½¢å®¹ï¼Œä½†è¿™æ˜¯ç”±ç¾å›½çš„å®å¤§ä»¥åŠæŒç»­å˜åŒ–çš„ç‰¹æ€§æ‰€å†³å®šçš„ã€‚ç›¸åï¼Œç¾å›½é‚£ä¸å¯è§çš„æ ¸å¿ƒæ˜¯é«˜åº¦ç²¾è‡´çš„ï¼Œ state-of-the-art.</strong>â€”â€”é¥­å¦</li><li><strong>ç»è¥ä¸€æ®µæ„Ÿæƒ…éœ€è¦ä»˜å‡ºè¶³å¤Ÿçš„æ—¶é—´å’Œç²¾åŠ›ï¼Œè€ŒæŠŠæ¡ä½ä¸€ä¸ªç¨çºµå³é€çš„æœºä¼šï¼ŒåŒæ ·éœ€è¦æ‹¿å‡ºå…¨åŠ›ä»¥èµ´çš„å§¿æ€ï¼Œå¦åˆ™ï¼Œæˆ‘ä»¬å¾ˆæœ‰å¯èƒ½å› ä¸ºé”™å¤±è¿™ä¸€æ­¥ï¼Œè€Œé”™å¤±æ•´ä¸ªå‘ä¸Šå‘å±•çš„æœºä¼šã€‚</strong></li><li><strong>å’Œèº«è¾¹çš„95åèŠå¤©ï¼Œä»–ä»¬ä¸çº¦è€ŒåŒåœ°æåˆ°æœªæ¥å¸Œæœ›èƒ½å®ç°ä¸¤ç‚¹ï¼šè´¢åŠ¡è‡ªç”±ã€åšè‡ªå·±å–œæ¬¢çš„äº‹ã€‚æˆ‘é—®ä»–ä»¬ï¼Œä»€ä¹ˆæ˜¯ä½ ä»¬å–œæ¬¢çš„äº‹ï¼Ÿç„¶åå°±å†·åœºäº†ã€‚</strong>â€”â€”ä¹é¼ è€äºº</li><li><strong>æŸå…ˆæ£®å¤„äºèŒä¸šè‰°éš¾æ—¶æœŸï¼Œå‹åŠ›æå¤§ï¼Œæ‹¼å°½å…¨åŠ›ã€‚ä½†ä»–è¯´ï¼Œç°åœ¨æˆ‘åšçš„å·¥ä½œæ˜¯æˆ‘ä»å¤§ä¸€å¼€å§‹å°±æ¢¦å¯ä»¥æ±‚çš„å·¥ä½œã€‚é‚£å°±å¥½ã€‚</strong>â€”â€”Rena518</li><li><strong>å¹¶ä¸æ˜¯è¯´é¸¿è’™OSç°åœ¨æœ‰å¤šå¼ºå¤§å¤šå®Œå–„å¤šç‰›é€¼ï¼Œè€Œæ˜¯é¸¿è’™OSçš„æƒ³è±¡ç©ºé—´å¤ªå¤§äº†ï¼Œæ˜¯çœŸæ­£çš„æ˜Ÿè¾°å¤§æµ·ã€‚</strong></li><li><strong>å®¶åº­æ‰€çŒè¾“çš„ç†å¿µï¼Œå°†åœ¨ä¸ªä½“æˆé•¿è¿‡ç¨‹ä¸­ä¸æ–­åœ°é‡å¤å’Œå¼ºåŒ–ï¼Œä»¥è‡´äºæˆä¸ºä¸€ç§é›†ä½“ä¿¡å¿µã€‚</strong></li><li><strong>è¢«ç¤¾ä¼šæ‰€è¿œç¦»çš„ç¾¤ä½“/äººï¼Œéœ²å‡ºçœŸå®èº«ä»½æ—¶é­é‡åˆ°çš„å¾€å¾€æ˜¯ææ…Œå’Œæ’æ–¥ã€‚</strong></li><li><strong>åªè¦ä¸è¦è„¸ï¼Œéåœ°æ˜¯é‡‘é’±ã€‚</strong></li><li><strong>åˆ˜é‚¦æ­¤äººå¥½åæš‚ä¸”ä¸è¯´ï¼Œå°±è¿™ä»½å¿ƒæ€§ï¼Œçš„ç¡®å°‘æœ‰ã€‚åšé»‘ä¹Ÿç½¢å‡‰è–„ä¹Ÿç½¢ï¼Œèˆå¾—äºŒå­—åœ¨ä»–è¿™é‡Œè§£é‡Šçš„å†æ¸…æ¥šä¸è¿‡ã€‚</strong></li></ol><hr><h3 id="002"><a href="#002" class="headerlink" title="002"></a>002</h3><ol><li>*<em>Some youngster has signs said â€œmake love, not warâ€, trouble is they donâ€™t look like they were capable doing either. *</em>â€”â€”é‡Œæ ¹</li><li><strong>Freedom is not free.</strong></li><li><strong>War is an ugly thing, but not the ugliest of things: the decayed and degraded state of moral and patriotic feeling which thinks that nothing is worth a war, is much worse.</strong>â€”â€”çº¦ç¿°Â·æ–¯å›¾å°”ç‰¹Â·å¯†å°”</li><li><strong>é—®é¢˜æ¥äº†ï¼šä»€ä¹ˆæ˜¯æ‰€è°“çš„â€œæ ‡å‡†å¯†ç â€å‘¢ï¼Ÿ</strong></li><li><strong>äººç±»æ˜¯åœ°çƒçš„â€œè¶…çº§ç—…æ¯’â€ï¼Œè€Œåœ°çƒæ­£åœ¨å¯åŠ¨å¯¹äººç±»çš„å…ç–«ååº”ã€‚æ­£å¦‚ã€Šè¡€ç–«ã€‹ä¸­æ‰€è¯´çš„é‚£æ ·ï¼Œå¤§è‡ªç„¶æœ‰è‡ªæˆ‘å¹³è¡¡çš„æ‰‹æ®µï¼Œå®ƒå¯èƒ½åœ¨è¯•å›¾é™¤æ‰äººç±»è¿™ç§å¯„ç”Ÿç”Ÿç‰©çš„æ„ŸæŸ“ã€‚</strong></li><li><strong>ä»é•¿åº¦æ¥çœ‹ï¼Œè‡³å°‘æœ‰ä¸‰ç§è¾ƒé•¿çš„å‘¨æœŸï¼Œä¸­çš„æ˜¯äººä¸€è¾ˆå­å¯ä»¥ç»å†è‹¥å¹²è½®çš„ï¼Œé•¿çš„æ˜¯äººä¸€è¾ˆå­å¤§æ¦‚æ­£å¥½ç»å†ä¸€è½®ï¼Œè¶…é•¿çš„æ˜¯äººä¸€è¾ˆå­åªèƒ½ç»å†ä¸€ä¸ªå®Œæ•´å‘¨æœŸä¸­çš„æŸä¸ªç‰‡æ–­ã€‚</strong></li><li><strong>å½“ä»–å®Œæˆäº†è‡ªå·±çš„å’Œè§£ï¼Œä¹Ÿå°±å®Œæˆäº†å’Œä¸–äººçš„å’Œè§£ã€‚</strong></li><li><strong>æœ€ç‰›é€¼çš„å•†ä¸šå†³ç­–ä¸èƒ½ç®—å°è´¦ï¼Œè€ƒè™‘æŠ•å…¥äº§å‡ºæ¯”æ—¶ä¸èƒ½å—é™äºå±€éƒ¨çš„æ‰€è°“ç†æ€§ï¼Œå› ä¸ºå®ƒæœ€åä¸ä»…å½±å“ä½ è¿™ä¸ªå…¬å¸èƒ½èµšå¤šå°‘é’±ï¼Œè€Œä¸”å½±å“ä½ è¿™ä¸ªå›½å®¶çš„é’±èƒ½å€¼å¤šå°‘é’±ã€‚</strong>â€”â€”é¥­å¦</li><li><strong>æ ¼ç‰¹é²å¾·Â·æ–¯æ³°å› ï¼ˆGertrude Steinï¼‰ä¸´æ­»å‰çš„é—®é¢˜ï¼šâ€œç­”æ¡ˆæ˜¯ä»€ä¹ˆï¼Ÿâ€â€”â€”å¥¹æ²¡æœ‰å¾—åˆ°ä»»ä½•å›ç­”ï¼Œç„¶ååˆé—®é“ï¼šâ€œæ—¢ç„¶è¿™æ ·ï¼Œé—®é¢˜æ˜¯ä»€ä¹ˆï¼Ÿâ€</strong></li></ol><hr><h3 id="003"><a href="#003" class="headerlink" title="003"></a>003</h3><hr><ol><li><strong>æ¼”åŒ–ç”Ÿç‰©å­¦è¯ç”Ÿäº1859å¹´ï¼Œä»¥è¾¾å°”æ–‡çš„ã€Šç‰©ç§èµ·æºã€‹å‘è¡¨ä¸ºæ ‡å¿—ã€‚ä½†æ˜¯ï¼Œä¸ºä»€ä¹ˆé•¿ä¹…ä»¥æ¥æŠŠæ¼”åŒ–ç”Ÿç‰©å­¦åº”ç”¨åˆ°åŒ»å­¦å’Œå…¶ä»–ä¸äººç±»æœ‰å…³çš„ç§‘å­¦ä¸­çš„è¿›å±•å¦‚æ­¤è¿Ÿç¼“ï¼Ÿ</strong></li><li><strong>1941å¹´ï¼Œæ‰€æœ‰è¿™ç§ç»†èŒéƒ½å¯ä»¥è¢«é’éœ‰ç´ æ€æ­»ã€‚åˆ°1944å¹´ï¼Œå·²ç»å‡ºç°äº†ä¸€äº›çªå˜æ ªèƒ½åˆ†è§£é’éœ‰ç´ ã€‚åˆ°ä»Šå¤©ï¼Œ95%çš„è‘¡è„çƒèŒéƒ½å¯¹é’éœ‰ç´ æœ‰ä¸€å®šç¨‹åº¦çš„è€è¯æ€§ã€‚</strong></li><li><strong>å¯¹å…¬ä¼—è¿›è¡Œå–„æ„çš„é“å¾·åŠè¯«å³ä¾¿å—åˆ°æ¬¢è¿ï¼Œä¹Ÿå¾ˆå°‘æœ‰äººä¼šå½“çœŸã€‚è¦ä½¿äººä»¬ä¸ºäº†å…¬ä¼—åˆ©ç›Šåˆä½œï¼Œå¿…é¡»è®©ä¸åˆä½œè€…ä»˜å‡ºä»£ä»·ã€‚</strong>â€”â€”è¿ˆç‰¹Â·ç‘å¾·åˆ©ï¼ˆMatt Ridleyï¼‰å’Œé²æ¯”Â·å¨„ï¼ˆBobbi Lowï¼‰</li><li><strong>åŒ»å­¦å²åå¤è¯æ˜ï¼Œæœ€å®¹æ˜“æŸ“ä¸Šè‡´å‘½æ€§ç—…åŸä½“çš„åœ°æ–¹ï¼Œä¸æ˜¯å¦“é™¢ï¼Œä¹Ÿä¸æ˜¯æ‹¥æŒ¤çš„è¡€æ±—å·¥å‚ï¼Œè€Œæ˜¯åŒ»é™¢ã€‚</strong></li><li><strong>ä¼ªè£…ï¼ˆmimicï¼‰ç§å’Œæ¨¡å‹ï¼ˆmodelï¼‰ç§ä¹‹é—´çš„ä¸€åœºç«èµ›ï¼šä¼ªè£…ç§å˜å¾—æ›´åƒæ¨¡å‹ç§ï¼Œè€Œæ¨¡å‹ç§åˆ™å˜å¾—å°½å¯èƒ½ä¸ä¼ªè£…ç§æœ‰åŒºåˆ«ã€‚</strong></li><li><strong>å¾ˆå°‘æ¥è§¦æ¯’ç´ ï¼Œé‚£ä¹ˆä¸€æ—¦é­é‡æ­£å¸¸å‰‚é‡çš„æ¯’ç´ ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šæªæ‰‹ä¸åŠã€‚</strong></li><li><strong>åœ¨é›¶æ˜Ÿçš„çŸ¥è¯†å²›å±¿å‘¨å›´ï¼Œè¿˜æ˜¯èŒ«èŒ«æ— é™…çš„æœªçŸ¥æµ·åŸŸã€‚</strong></li><li><strong>æˆ‘ä»¬éµå¾ªé‚£äº›çœ‹ä¼¼æ²¡æœ‰ä»€ä¹ˆé“ç†å¯è¨€çš„æ–‡åŒ–ä¹ ä¿—å¯èƒ½æ˜¯ååˆ†æ˜æ™ºçš„ã€‚</strong></li><li><strong>è®¸å¤šå‡è‚¥é£Ÿè°±çš„åŸç†å°±æ˜¯ï¼šåœ¨åªæœ‰å°‘æ•°å‡ ç§é£Ÿç‰©ä¾›åº”æ—¶ï¼Œæˆ‘ä»¬åƒå¾—è¦æ¯”å“ç§ä¸°å¯Œæ—¶å°‘ä¸€äº›ã€‚</strong></li></ol><hr><h3 id="004"><a href="#004" class="headerlink" title="004"></a>004</h3><hr><ol><li><strong>ç”Ÿæ´»çœŸæ­£æ®‹é…·çš„åœ°æ–¹ï¼Œä¸åœ¨äºå®ƒçš„æ­£é¢è§’è‰²æ²¡æœ‰æ•…äº‹ä¸­é‚£ä¹ˆå¥½ï¼Œè€Œæ˜¯å®ƒçš„åæ´¾è§’è‰²å¹¶æ²¡æœ‰æ•…äº‹ä¸­é‚£ä¹ˆåã€‚</strong></li><li><strong>æ€æƒ³ä¸Šçš„å®Œç¾ä¸»ä¹‰è€…ï¼Œå¤§å¤šæ˜¯æ€æƒ³ä¸Šçš„å·¨äººï¼Œè¡ŒåŠ¨ä¸Šçš„çŸ®å­ï¼Œå¦‚æœä½ æ˜¯ä¸ªå®Œç¾ä¸»ä¹‰è€…ï¼Œè‡³å°‘è¦å…ˆè·¨å‡ºç¬¬ä¸€æ­¥ã€‚</strong></li><li><strong>è®¤è¯†äº†ä¸€ä¸ªå¤§ç‰ŒæŠ•èµ„å…¬å¸é‡Œè›®ä¸é”™çš„å¹´è½»äººï¼Œä»–è¯´å°†æ¥å¦‚æœå‡ºæ¥åˆ›ä¸šï¼Œä»–ä¼šåŒæ—¶æ³¨å†Œä¸‰ä¸ªå®ä½“ï¼šç¬¬ä¸€ä¸ªæ‹ç”µå½±ï¼Œç¬¬äºŒä¸ªæç¤¾åŒºï¼Œç¬¬ä¸‰ä¸ªæ‰æ˜¯åšæŠ•èµ„ã€‚ä¸è¦é˜¿çŒ«é˜¿ç‹—ä¹‹ç±»çš„æ¡ˆå­éƒ½æŠ•ï¼ŒåªæŠ•é‚£äº›å°†æ¥å€¼å¾—æ‹æˆç”µå½±çš„å…¬å¸ã€‚</strong>â€”â€”é¥­å¦</li><li><strong>æ­£æ‰€è°“â€œå°½äººäº‹ï¼Œå¾…å¤©å‘½â€ã€‚ä½ æ˜¯å¦å·²ç»ç”¨å°½äº†å…¨éƒ¨åŠ›é‡ï¼Ÿ</strong></li><li><strong>ä¸€æœ¬ç§‘å¹»å°è¯´ã€‚ä¸»è¦æƒ…èŠ‚æ˜¯äººç±»å¯ä»¥æ§åˆ¶å±€éƒ¨æ—¶é—´æµé€Ÿï¼Œä¸ºäº†ç”Ÿäº§æ›´å¤šç²®é£Ÿï¼Œåœ¨ä¸€ä¸ªå°é—­çš„ç©ºé—´é‡Œä½¿æ—¶é—´åŠ é€Ÿæ¥ç”Ÿäº§ç²®é£Ÿï¼Œç»“æœé‡Œè¾¹çš„ç”Ÿç‰©å¼€å§‹åŠ é€Ÿè¿›åŒ–å½±å“äººç±»ã€‚</strong></li><li><strong>å‡è®¾ä¸€å¹´æœ‰<code>365</code>å¤©ï¼Œæ¯å¤©æ¯”å‰ä¸€å¤©è¿›æ­¥<code>1/365</code>ï¼Œä¸€å¹´åå°±ä» <code>1</code> å˜æˆ <code>2.714567482021973</code>ï¼Œåå¹´åå°±ä¼šä» <code>1</code> å˜æˆ<code>21727.333146076744</code>ï¼Œåè€…å¤§æ¦‚æ˜¯å‰è€…çš„ <code>8004</code> å€ã€‚è¿™å¤§æ¦‚æ˜¯æˆ‘èƒ½æƒ³åˆ°çš„â€œä½ æ€»æ˜¯é«˜ä¼°ä¸€å¹´å†…å¯ä»¥åšçš„äº‹ï¼Œä¹Ÿæ€»æ˜¯ä½ä¼°åå¹´å†…èƒ½åšåˆ°çš„äº‹ã€‚â€çš„æ•°å­—åŒ–è§£é‡Šã€‚</strong>â€”â€”Muhouer</li><li><strong>â€œç¥–å›½ç»ˆå°†é€‰æ‹©é‚£äº›é€‰æ‹©äº†ç¥–å›½çš„äººâ€ã€‚</strong>â€”â€”ã€Šå¦‚ä½•åœ¨äººç”Ÿçš„é©¬æ‹‰æ¾ä¸­è·‘å¥½æ¸…åè¿™ä¸€ç¨‹ã€‹ï¼Œç”µæœºç³»æ•™æˆäºæ­†æ°åœ¨æ¸…å2019çº§æœ¬ç§‘ç”Ÿå¼€å­¦å…¸ç¤¼ä¸Šçš„å‘è¨€</li><li><strong>æ¯”ã€Œç‰ºç‰²å“ªä¸ªäººã€æˆ–ã€Œç‰ºç‰²å“ªä¸ªç¾¤ä½“ã€æ›´æ®‹é…·çš„é—®é¢˜æ˜¯ã€Œç‰ºç‰²å“ªä»£äººã€ï¼Ÿ</strong></li><li><strong>å¤±åˆ©ä¸ä»…æ˜¯ä¸€ä¸ªç»“æœï¼Œè¿˜æ˜¯ä¸€ä¸ªè¿‡ç¨‹ã€‚</strong></li></ol><hr><h3 id="005"><a href="#005" class="headerlink" title="005"></a>005</h3><hr><ol><li><strong>æœºä¼šä¸ç¾éš¾æ€»æ˜¯ç›¸ä¼´è€Œç”Ÿï¼Œæœ‰äººæŠŠæœºä¼šåšæˆäº†ç¾éš¾ï¼Œä¹Ÿæœ‰äººæŠŠç¾éš¾åšæˆäº†æœºä¼šã€‚</strong></li><li><strong>ç”Ÿæ´»çš„è¿›ç¨‹æ€»æ˜¯é ä¸¤ç±»äº‹ä»¶ä¸æ–­ç§¯ç´¯èµ·æ¥çš„â€”â€”å¯æ§äº‹ä»¶å’Œä¸å¯æ§äº‹ä»¶ã€‚è€Œæ‰€è°“è§„åˆ’ï¼Œå°±æ˜¯æŠŠç²¾åŠ›çš„å¤§éƒ¨åˆ†èšç„¦äºå¯æ§çš„éƒ¨åˆ†ï¼ŒæŠŠè¿™éƒ¨åˆ†åšå¥½ï¼›è€Œæ‰€è°“æˆåŠŸï¼Œæ— éå°±æ˜¯åœ¨è¿™ä¸ªåŸºç¡€ä¸ŠåŠ ä¸Šä¸å¯æ§å› ç´ çš„è¿æ°”ã€‚</strong></li><li><strong>ç”µè¯ï¼Œé‚®ä»¶ï¼Œç°åœºçº¦è§ï¼Œæ²™é›•è¯æœ¯å°±æ˜¯å››ä¸ªæ¼æ–—ï¼Œæ¯ä¸€å±‚éƒ½è¿‡æ»¤æ‰æ™ºå•†æ­£å¸¸çš„äººï¼Œæœ€åç•™ä¸‹çš„å°±æ˜¯æ¬ æ•™è‚²çš„ã€‚</strong></li><li><strong>äººä¸€æ—¦èµ·äº†è´ªå¿µï¼Œæ™ºå•†å°±ä¼šè¢«æŒ‰åœ¨åœ°ä¸Šæ‘©æ“¦ï¼Œä¸ç®¡æ™ºå•†å†é«˜ä¹Ÿæ²¡ç”¨ï¼Œè´ªå¿ƒå±äºé™ç»´æ‰“å‡»ã€‚</strong></li><li><strong>é£é™©å’Œæ”¶ç›Šä»æ¥å°±ä¸æˆæ­£æ¯”ã€‚æ—¶é—´å’Œæ—¶é—´æ˜¯ä¸å¹³ç­‰çš„ã€‚</strong></li><li><strong>æˆ‘è®¤è¯†ä¸€ä¸ªäººï¼Œä»–æ¯åšä¸€ä»¶å°äº‹éƒ½åƒæŠ“ä½æœ€åä¸€æ ¹æ•‘å‘½ç¨»è‰ï¼Œæœ‰ä¸€å¤©æˆ‘å›å¤´çœ‹ä»–ï¼Œåš¯ï¼Œå¥½å®¶ä¼™ï¼Œä»–å·²ç»æ€€æŠ±ç€ä¸€æ£µè®©æˆ‘ä»°æœ›çš„è‹å¤©å¤§æ ‘äº†ï¼</strong></li><li><strong>ç§‘æŠ€è¡Œä¸šæœ‰ä¸€ä¸ªå¸¸è¯†ï¼Œä½ æ— æ³•å‡­å€ŸåŒæ ·çš„ä¸œè¥¿æ‰“è´¥å¯¹æ‰‹ï¼Œå–ä»£å®‰å“çš„ä¹Ÿä¸æ˜¯å¦å¤–ä¸€ä¸ªå®‰å“ã€‚</strong></li><li><strong>åœ¨æ±‰å­—é‡Œï¼Œåæ˜¯10ï¼Œå»¿æ˜¯20ï¼Œå…æ˜¯30ã€‚å¦‚æœâ€œå…â€å­—æ·»ä¸Šä¸€æ¨ªï¼Œå°±æˆäº†â€œä¸—â€ï¼Œè¡¨ç¤º30å¹´ã€‚â€œä¸—â€å­—è¿˜æœ‰å¦ä¸€ä¸ªå†™æ³•â€”â€”â€œä¸–â€ï¼Œä¸€ä¸–å°±æ˜¯30å¹´ã€‚æ‰€ä»¥å¤äººè¯´æå¦‚éš”ä¸–ï¼Œå…¶å®æ˜¯å¦‚éš”30å¹´ï¼Œå³ä¾¿åœ¨â€œè½¦ã€é©¬ã€é‚®ä»¶éƒ½æ…¢â€çš„ä»å‰ï¼Œ30å¹´çš„å˜åŒ–ä¹Ÿè¶³ä»¥è®©äººæç„¶ã€‚</strong></li><li><strong>æˆ‘éå¸¸åå¯¹å©šå§»é‡Œï¼ŒæŠŠçˆ±äººå½“äº²äººã€‚æˆ‘çš„äº²äººåªæœ‰çˆ¶æ¯å’Œå¥³å„¿ï¼Œè€Œæˆ‘çš„å¦»å­ï¼Œå°±æ˜¯æˆ‘çš„çˆ±äººï¼Œè¿™ä¸ªä¸€ç›´éƒ½ä¸ä¼šå˜ã€‚</strong>â€”â€”é»„ç£Š</li><li><strong>å°†çˆ±æƒ…å˜ä¸ºäº²æƒ…ï¼Œæ˜¯é˜´é™©çš„æ½œæ„è¯†è¯¡è®¡ã€‚</strong></li></ol><hr><h3 id="006"><a href="#006" class="headerlink" title="006"></a>006</h3><hr><ol><li><strong>æ•°æ®ä¸ä¼šéª—äººï¼Œä½†æ˜¯çœ‹åˆ°æ•°æ®å¾—åˆ°çš„ç»“è®ºä¼šéª—äººã€‚æ­£ç¡®çš„å‰æï¼Œé”™è¯¯çš„æ–­è¨€ï¼Œä¾ç„¶ä¼šæ˜¯æ— æ•ˆçš„æ¨è®ºã€‚</strong></li><li><strong>å½“æ•°æ®æ¶‰åŠäººä»¬çš„é€‰æ‹©æ—¶ï¼ˆæ¯”å¦‚å½“äººä»¬é€‰æ‹©ä¸Šå¤§å­¦ã€ç»“å©šæˆ–è€…è¦å­©å­æ—¶ï¼‰ï¼Œå°±ä¼šå‡ºç°â€œè‡ªé€‰æ‹©åå·®â€ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯¹äºåšå‡ºä¸åŒé€‰æ‹©çš„äººè¿›è¡Œæ¯”è¾ƒçš„åšæ³•æ˜¯é ä¸ä½çš„ã€‚</strong></li><li><strong>æˆ·æ¢ä¸è ¹ï¼Œæµæ°´ä¸è…ã€‚</strong></li><li><strong>æˆ·æ¢æµæ°´ï¼Œä¸ç¡®æ°¸ç”Ÿã€‚</strong></li><li><strong>åˆ·å‰§æ—¶å¸¸ä¼´éšç€ï¼šç¤¾äº¤å­¤ç«‹ã€åƒåƒåœ¾é£Ÿå“ã€ç¼ºä¹è¿åŠ¨å’Œç¡çœ ï¼Œç–¯ç‹‚åˆ·å‰§å¯¹å¤§è„‘çš„å½±å“ä¸èµŒåšç›¸ä¼¼</strong>â€”â€”å…°å¾·å°”Â·æ€€ç‰¹</li><li><strong>æˆ‘ä»¬çš„è°¦å‘ã€æ²‰é»˜æ›¾åŠ©é•¿äº†åè§å’Œæ­§è§†çš„å­˜åœ¨ã€‚</strong></li><li><strong>å¾ˆå¤šäººæ²¡æœ‰è‡ªä¿¡ï¼Œå…¶å®æ˜¯åœ¨é€ƒé¿è´£ä»»ï¼Œäººç”Ÿé‚£äº›è¯¥åƒçš„è‹¦ï¼Œä»–ä¸æƒ³åƒï¼Œä»–ä¸€å®šè¦å¤©åœ°è®¸è¯ºä»–ä¸€ä¸ªè½»æ¾çš„å¯Œè¶³äººç”Ÿï¼Œå¦åˆ™å°±æ˜¯å¤©åœ°ä¸å¯¹ï¼Œè¦æ­»ç»™å®ƒçœ‹ã€‚å¤©åœ°ä¼šæ€ä¹ˆå›åº”ï¼Ÿåº”è¯¥æ˜¯ï¼šä½ çˆ±å“­å°±å“­ï¼Œçˆ±æ­»å°±æ­»ã€‚å…¶å®å¤©åœ°ä¸ä»ï¼Œæ°¸è¿œæŒ‰è§„å¾‹è¿è¡Œï¼Œè¿å›åº”éƒ½ä¸ä¼šç»™ä½ ã€‚</strong>â€”â€”è¿å²³</li><li><strong>è¿™ä¸ªä¸–ç•Œçš„å¤§éƒ¨åˆ†åœ°å¸¦æ˜¯ç°è‰²çš„ï¼Œä¸å­˜åœ¨ä¸€ä¸ªç®€å•ç­”æ¡ˆã€‚ä¸åº”è¯¥æœ‰å¤æ‚çš„é—®é¢˜ï¼Œä¹Ÿä¸åº”è¯¥æœ‰ç®€å•çš„ç­”æ¡ˆã€‚</strong></li><li><strong>å…¨çƒå»‰ä»·æœé¥°æ¯å¹´çš„æµè¡Œæ¬¾å¼å…¶å®éƒ½æ˜¯åœ¨æŠ„è¢­ä½äºé¡¶ç«¯çš„æ—¶å°šï¼Œæ—¶å°šç•Œçš„é¡¶ç«¯å¼•é¢†ç€æ½®æµï¼Œæ™®é€šäººè®¤ä¸ºè‡ªå·±çš„è¡£ç€è¿œç¦»è¿™äº›é¡¶ç«¯ï¼Œä½†äº‹å®ä¸Šï¼Œæ—©è¢«è¿™äº›é¡¶ç«¯æ‰€å†³å®šã€‚æˆ‘ä»¬çš„æ€æƒ³è§‚å¿µä½•å°ä¸æ˜¯å¦‚æ­¤å‘¢ï¼Ÿ</strong>â€”â€”é¥­å¦</li></ol><hr><h3 id="007"><a href="#007" class="headerlink" title="007"></a>007</h3><hr>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;001&quot;&gt;&lt;a href=&quot;#001&quot; class=&quot;headerlink&quot; title=&quot;001&quot;&gt;&lt;/a&gt;001&lt;/h3&gt;&lt;hr&gt;&lt;ol&gt;&lt;li&gt;&lt;strong&gt;ç›¸æ¯”æ¬§æ´²å‡ ä¸ªå‘è¾¾å›½å®¶ï¼Œç¾å›½åœ¨å¯ç‰©ç†æ„ŸçŸ¥çš„å¾ˆå¤šç»†èŠ‚ä¸Šéƒ½å¯ä»¥ç”¨ç²—ç ºæ¥å½¢å®¹ï¼Œä½†è¿™æ˜¯ç”±ç¾å›½çš„å®å¤§ä»¥åŠæŒç»­å˜
      
    
    </summary>
    
      <category term="æ‹¾å¥" scheme="https://muhouer.github.io/categories/%E6%8B%BE%E5%8F%A5/"/>
    
    
      <category term="æ€è€ƒ" scheme="https://muhouer.github.io/tags/%E6%80%9D%E8%80%83/"/>
    
  </entry>
  
  <entry>
    <title>å †å†…å­˜å’Œæ ˆå†…å­˜</title>
    <link href="https://muhouer.github.io/posts/e896e76f/"/>
    <id>https://muhouer.github.io/posts/e896e76f/</id>
    <published>2019-08-07T15:12:00.000Z</published>
    <updated>2019-08-08T15:18:48.773Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨<code>Java</code>ä¸­ï¼Œæ‚¨ä¼šçœ‹åˆ°å¤§é‡å…³äºå †å†…å­˜å’Œæ ˆå†…å­˜çš„å¼•ç”¨ï¼Œ<code>Java</code>æŠŠå†…å­˜åˆ†æˆä¸¤ç§ï¼Œä¸€ç§å«åšæ ˆå†…å­˜ï¼Œä¸€ç§å«åšå †å†…å­˜ã€‚</p><h2 id="Java-å †å†…å­˜-Heap-Memory"><a href="#Java-å †å†…å­˜-Heap-Memory" class="headerlink" title="Java å †å†…å­˜(Heap Memory)"></a>Java å †å†…å­˜(Heap Memory)</h2><p><code>Java</code>è¿è¡Œæ—¶ä¼šåœ¨å †å†…å­˜ä¸­å°†å†…å­˜åˆ†é…ç»™å¯¹è±¡å’Œå­ç±»ã€‚æ¯å½“æˆ‘ä»¬åˆ›å»ºä»»ä½•å¯¹è±¡æ—¶ï¼Œå®ƒæ€»æ˜¯åœ¨å †ç©ºé—´ä¸­åˆ›å»ºçš„ã€‚</p><p>åƒåœ¾æ”¶é›†åœ¨å †å†…å­˜ä¸Šè¿è¡Œï¼Œä»¥é‡Šæ”¾æ²¡æœ‰ä»»ä½•å¼•ç”¨çš„å¯¹è±¡ä½¿ç”¨çš„å†…å­˜ã€‚å †ç©ºé—´ä¸­åˆ›å»ºçš„ä»»ä½•å¯¹è±¡éƒ½å…·æœ‰å…¨å±€è®¿é—®æƒé™ï¼Œå¯ä»¥ä»åº”ç”¨ç¨‹åºçš„ä»»ä½•ä½ç½®å¼•ç”¨ã€‚</p><h2 id="Java-æ ˆå†…å­˜-Stack-Memory"><a href="#Java-æ ˆå†…å­˜-Stack-Memory" class="headerlink" title="Java æ ˆå†…å­˜(Stack Memory)"></a>Java æ ˆå†…å­˜(Stack Memory)</h2><p>Javaæ ˆå†…å­˜ç”¨äºæ‰§è¡Œçº¿ç¨‹ã€‚å®ƒä»¬åŒ…å«çŸ­æœŸå­˜æ´»çš„æ–¹æ³•çš„ç‰¹å®šå€¼ï¼Œä»¥åŠå †ä¸­æ–¹æ³•å¯¹å…¶ä»–å¯¹è±¡çš„å¼•ç”¨ã€‚</p><p>æ ˆå†…å­˜æ€»æ˜¯æŒ‰åè¿›å…ˆå‡ºé¡ºåºå¼•ç”¨ã€‚æ¯å½“è°ƒç”¨ä¸€ä¸ªæ–¹æ³•æ—¶ï¼Œéƒ½ä¼šåœ¨æ ˆå†…å­˜ä¸­åˆ›å»ºä¸€ä¸ªæ–°å—ï¼Œä»¥ä¾¿è¯¥æ–¹æ³•ä¿å­˜æœ¬åœ°åŸºå…ƒå€¼ä»¥åŠè¯¥æ–¹æ³•å¯¹å…¶ä»–å¯¹è±¡çš„å¼•ç”¨ã€‚</p><p>ä¸€æ—¦æ–¹æ³•ç»“æŸï¼Œè¯¥å—å°±ä¸å†ä½¿ç”¨ï¼Œå°±å¯ç”¨äºä¸‹ä¸€ä¸ªæ–¹æ³•ã€‚ä¸å †å†…å­˜ç›¸æ¯”ï¼Œæ ˆå†…å­˜éå¸¸å°ã€‚</p><h2 id="Java-ç¨‹åºä¸­çš„å †å†…å­˜å’Œæ ˆå†…å­˜"><a href="#Java-ç¨‹åºä¸­çš„å †å†…å­˜å’Œæ ˆå†…å­˜" class="headerlink" title="Java ç¨‹åºä¸­çš„å †å†…å­˜å’Œæ ˆå†…å­˜"></a>Java ç¨‹åºä¸­çš„å †å†…å­˜å’Œæ ˆå†…å­˜</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Memory</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123; <span class="comment">// Line 1</span></span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">1</span>; <span class="comment">// Line 2</span></span><br><span class="line">        Object obj = <span class="keyword">new</span> Object(); <span class="comment">// Line 3</span></span><br><span class="line">        Memory mem = <span class="keyword">new</span> Memory(); <span class="comment">// Line 4</span></span><br><span class="line">        mem.foo(obj); <span class="comment">// Line 5</span></span><br><span class="line">    &#125; <span class="comment">// Line 9</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">foo</span><span class="params">(Object param)</span> </span>&#123; <span class="comment">// Line 6</span></span><br><span class="line">        String str = param.toString(); <span class="comment">//// Line 7</span></span><br><span class="line">        System.out.println(str);</span><br><span class="line">    &#125; <span class="comment">// Line 8</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸‹å›¾å±•ç¤ºäº†ä¸Šè¿°ç¨‹åºçš„å †æ ˆå†…å­˜çš„å¼•ç”¨</p><p><img src="https://cdn.journaldev.com/wp-content/uploads/2014/08/Java-Heap-Stack-Memory.png" alt="img"></p><p>ç¨‹åºæ‰§è¡Œçš„è¿‡ç¨‹å¦‚ä¸‹ï¼š</p><ul><li>ä¸€æ—¦ç¨‹åºå¼€å§‹è¿è¡Œï¼Œå®ƒå°†ä¼šåŠ è½½æ‰€æœ‰è¿è¡Œæ—¶ç±»åˆ°å †å†…å­˜ï¼Œç¬¬1è¡Œå‘ç°äº†mainæ–¹æ³•ï¼ŒJava Runtime åˆ›å»ºäº†æ ˆå†…å­˜ç»™mainæ–¹æ³•çº¿ç¨‹ä½¿ç”¨ã€‚</li><li>ç¬¬2è¡Œï¼Œæˆ‘ä»¬åˆ›å»ºäº†intå‹æœ¬åœ°å˜é‡ï¼Œå®ƒè¢«åˆ›å»ºå¹¶å­˜å‚¨åœ¨æ ˆå†…å­˜çš„mainæ–¹æ³•é‡Œã€‚</li><li>ç¬¬3è¡Œï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒåˆ›å»ºåœ¨å †å†…å­˜ï¼Œæ ˆå†…å­˜ä¿å­˜å®ƒçš„å¼•ç”¨ã€‚Memory å¯¹è±¡ç±»ä¼¼ã€‚</li><li>ç¬¬5è¡Œï¼Œæˆ‘ä»¬è°ƒç”¨fooæ–¹æ³•ï¼Œåœ¨æ ˆå†…å­˜å¤´éƒ¨åˆ›å»ºä¸€ä¸ªå†…å­˜å—ç»™fooæ–¹æ³•ä½¿ç”¨ï¼Œæ—¢ç„¶Javaé€šè¿‡å€¼ä¼ é€’ï¼Œç¬¬6è¡Œï¼Œå¯¹è±¡çš„æ–°å¼•ç”¨å°†åœ¨fooæ–¹æ³•çš„æ ˆå†…å­˜å—å†…åˆ›å»ºã€‚</li><li>ç¬¬7è¡Œï¼Œåˆ›å»ºäº†å­—ç¬¦ä¸²ï¼Œå®ƒå°†ä¼šè¿›å…¥å †ä¸­çš„å­—ç¬¦ä¸²å¸¸é‡æ± ï¼Œfooæ–¹æ³•çš„æ ˆç©ºé—´å†…å°†åˆ›å»ºä¸€ä¸ªå®ƒçš„å¼•ç”¨ã€‚</li><li>fooæ–¹æ³•åœ¨ç¬¬8è¡Œç»ˆæ­¢ã€‚æ ˆä¸­åˆ†é…çš„å†…å­˜å—å°†ä¼šè¢«é‡Šæ”¾ã€‚</li><li>åœ¨ç¬¬9è¡Œï¼Œmainæ–¹æ³•ç»ˆæ­¢ï¼Œåˆ†é…ç»™mainæ–¹æ³•çš„æ ˆå†…å­˜å°†ä¼šè¢«é”€æ¯ã€‚åŒæ—¶ï¼Œç¨‹åºä¹Ÿåœ¨è¿™ä¸€è¡Œç»“æŸï¼Œå› æ­¤ Java Runtimeå°†ä¼šé‡Šæ”¾æ‰€æœ‰å†…å­˜ï¼Œç„¶åç»“æŸç¨‹åºçš„æ‰§è¡Œã€‚</li></ul><h2 id="å †å†…å­˜å’Œæ ˆå†…å­˜çš„åŒºåˆ«"><a href="#å †å†…å­˜å’Œæ ˆå†…å­˜çš„åŒºåˆ«" class="headerlink" title="å †å†…å­˜å’Œæ ˆå†…å­˜çš„åŒºåˆ«"></a>å †å†…å­˜å’Œæ ˆå†…å­˜çš„åŒºåˆ«</h2><ol><li>åº”ç”¨ç¨‹åºçš„æ‰€æœ‰åœ°æ–¹éƒ½ä¼šä½¿ç”¨å †å†…å­˜ï¼Œè€Œåªæœ‰çº¿ç¨‹çš„æ‰§è¡Œä¼šä½¿ç”¨æ ˆå†…å­˜ã€‚</li><li>å½“ä¸€ä¸ªå¯¹è±¡åˆ›å»ºæ—¶ï¼Œå®ƒå­˜æ”¾åœ¨å †å†…å­˜ä¸­ï¼Œå¼•ç”¨æ”¾åœ¨æ ˆå†…å­˜ä¸­ã€‚æ ˆå†…å­˜åªåŒ…å«æœ¬åœ°åŸå§‹å˜é‡å’Œå¼•ç”¨å˜é‡ã€‚</li><li>å­˜æ”¾åœ¨å †å†…å­˜çš„å¯¹è±¡æ˜¯å…¨å±€çš„ï¼Œè€Œæ ˆå†…å­˜ä¸­çš„ä¸èƒ½è¢«å…¶ä»–çº¿ç¨‹è·å–ã€‚</li><li>æ ˆä¸­çš„å†…å­˜ç®¡ç†æ˜¯ä»¥åè¿›å…ˆå‡ºçš„æ–¹å¼å®Œæˆçš„ï¼Œè€Œå †å†…å­˜ä¸­çš„å†…å­˜ç®¡ç†æ›´å¤æ‚ï¼Œå› ä¸ºå®ƒæ˜¯å…¨å±€ä½¿ç”¨çš„ã€‚å †å†…å­˜åˆ†ä¸ºæ–°ç”Ÿä»£ã€è€å¹´ä»£ç­‰ï¼Œæ›´å¤šä¿¡æ¯å¯ä»¥å‚è€ƒJava åƒåœ¾å›æ”¶ã€‚</li><li>æ ˆå†…å­˜æ˜¯çŸ­æš‚å­˜åœ¨çš„ï¼Œè€Œå †å†…å­˜ä»åº”ç”¨ç¨‹åºæ‰§è¡Œçš„å¼€å§‹åˆ°ç»“æŸéƒ½æ˜¯å­˜åœ¨çš„ã€‚</li><li>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>-Xms</code>å’Œ<code>-Xmx</code>æ¥å®šä¹‰å †å†…å­˜å¯åŠ¨æ—¶çš„å¤§å°å’Œå†…å­˜æœ€å¤§å€¼ã€‚å¯ä»¥ä½¿ç”¨<code>-Xss</code>å»å®šä¹‰æ ˆå†…å­˜å¤§å°ã€‚</li><li>å½“æ ˆå†…å­˜è¢«å¡«æ»¡çš„æ—¶å€™ï¼Œå°†ä¼šæŠ›å‡º <code>java.lang.StackOverFlowError</code>ï¼Œç„¶è€Œï¼Œå½“å †å†…å­˜è¢«å¡«æ»¡çš„æ—¶å€™ï¼Œå®ƒä¼šæŠ›å‡º <code>java.lang.OutOfMemoryError: Java Heap Space</code> é”™è¯¯ã€‚</li><li>å’Œå †å†…å­˜å¤§å°ç›¸æ¯”ï¼Œæ ˆå†…å­˜å¤§å°éå¸¸å°ã€‚ç”±äºå†…å­˜åˆ†é…ï¼ˆLIFOï¼‰çš„ç®€å•æ€§ï¼Œä¸å †å†…å­˜ç›¸æ¯”ï¼Œæ ˆå†…å­˜éå¸¸å¿«ã€‚</li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;åœ¨&lt;code&gt;Java&lt;/code&gt;ä¸­ï¼Œæ‚¨ä¼šçœ‹åˆ°å¤§é‡å…³äºå †å†…å­˜å’Œæ ˆå†…å­˜çš„å¼•ç”¨ï¼Œ&lt;code&gt;Java&lt;/code&gt;æŠŠå†…å­˜åˆ†æˆä¸¤ç§ï¼Œä¸€ç§å«åšæ ˆå†…å­˜ï¼Œä¸€ç§å«åšå †å†…å­˜ã€‚&lt;/p&gt;&lt;h2 id=&quot;Java-å †å†…å­˜-Heap-Memory&quot;&gt;&lt;a href=&quot;#Java-å †å†…å­˜-Heap
      
    
    </summary>
    
      <category term="å­¦ä¹ ç¬”è®°" scheme="https://muhouer.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
      <category term="Java" scheme="https://muhouer.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/Java/"/>
    
    
      <category term="å †æ ˆå†…å­˜" scheme="https://muhouer.github.io/tags/%E5%A0%86%E6%A0%88%E5%86%85%E5%AD%98/"/>
    
  </entry>
  
  <entry>
    <title>Javaå†…å­˜æ¨¡å‹ä¸å†…å­˜ç®¡ç†</title>
    <link href="https://muhouer.github.io/posts/1f8d140b/"/>
    <id>https://muhouer.github.io/posts/1f8d140b/</id>
    <published>2019-08-06T15:06:00.000Z</published>
    <updated>2019-08-08T15:22:40.009Z</updated>
    
    <content type="html"><![CDATA[<p>å¦‚æœæ‚¨æƒ³å¼„æ¸…æ¥š<code>Java</code>åƒåœ¾å›æ”¶çš„çš„å·¥ä½œåŸç†ï¼Œé‚£ä¹ˆç†è§£<code>JVM</code>å†…å­˜æ¨¡å‹ä»¥åŠ<code>Java</code>å†…å­˜ç®¡ç†éå¸¸é‡è¦ã€‚ ä»Šå¤©æˆ‘ä»¬å°†æ¢è®¨ä¸€ä¸‹<code>Java</code>ä¸­çš„å†…å­˜ç®¡ç†ã€<code>JVM</code>å†…å­˜çš„ç»„æˆä»¥åŠå¦‚ä½•ç›‘æ§å’Œè¿›è¡Œåƒåœ¾å›æ”¶è°ƒä¼˜ã€‚</p><h2 id="Javaï¼ˆJVMï¼‰å†…å­˜æ¨¡å‹"><a href="#Javaï¼ˆJVMï¼‰å†…å­˜æ¨¡å‹" class="headerlink" title="Javaï¼ˆJVMï¼‰å†…å­˜æ¨¡å‹"></a>Javaï¼ˆJVMï¼‰å†…å­˜æ¨¡å‹</h2><p><img src="https://cdn.journaldev.com/wp-content/uploads/2014/05/Java-Memory-Model-450x186.png" alt="Java Memory Model, JVM Memory Model, Memory Management in Java, Java Memory Management"></p><p>æ­£å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œ<code>JVM</code>å†…å­˜åˆ’åˆ†ä¸ºå¤šä¸ªä¸åŒéƒ¨åˆ†ã€‚ ä»å¹¿ä¹‰ä¸Šè®²ï¼Œ<code>JVM</code>å †å†…å­˜å†…å­˜åœ¨ç‰©ç†ä¸Šåˆ†ä¸ºä¸¤éƒ¨åˆ†â€”â€”æ–°ç”Ÿä»£(<strong>Young Generation</strong>)å’Œè€å¹´ä»£(<strong>Old Generation</strong>)ã€‚</p><h2 id="Java-å†…å­˜ç®¡ç†â€”â€”å¹´è½»ä»£"><a href="#Java-å†…å­˜ç®¡ç†â€”â€”å¹´è½»ä»£" class="headerlink" title="Java å†…å­˜ç®¡ç†â€”â€”å¹´è½»ä»£"></a>Java å†…å­˜ç®¡ç†â€”â€”å¹´è½»ä»£</h2><p>å¹´è½»ä»£æ˜¯åˆ›å»ºæ–°å¯¹è±¡çš„åœ°æ–¹ã€‚ å½“å¹´è½»ä»£è¢«å¡«æ»¡æ—¶ï¼Œå°†ä¼šè¿›è¡Œåƒåœ¾å›æ”¶ï¼Œç§°ä¸º<code>Minor GC</code>ã€‚ <code>Young Generation</code>åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†â€”â€”<code>Eden</code>å†…å­˜ç©ºé—´å’Œä¸¤ä¸ª<code>Survivor</code>å†…å­˜ç©ºé—´ã€‚</p><p>å…³äºæ–°ç”Ÿä»£(<strong>Young Generation</strong>)çš„è¦ç‚¹ï¼š</p><ul><li>å¤§å¤šæ•°æ–°åˆ›å»ºçš„å¯¹è±¡éƒ½ä½äº<code>Eden</code>å†…å­˜ç©ºé—´ä¸­ã€‚</li><li>å½“<code>Eden</code>ç©ºé—´å¡«æ»¡å¯¹è±¡æ—¶ï¼Œæ‰§è¡Œ<code>Minor GC</code>å¹¶å°†æ‰€æœ‰å¹¸å­˜è€…å¯¹è±¡ç§»åŠ¨åˆ°å…¶ä¸­ä¸€ä¸ª<code>Survivor</code>å†…å­˜ç©ºé—´ã€‚</li><li><code>Minor GC</code>è¿˜ä¼šæ£€æŸ¥å¹¸å­˜è€…å¯¹è±¡å¹¶å°†å…¶ç§»åŠ¨åˆ°å…¶ä»–<code>Survivor</code>å†…å­˜ç©ºé—´ã€‚ æ‰€ä»¥ï¼Œåœ¨åŒä¸€æ—¶é—´å†…ï¼Œæ€»æœ‰ä¸€ä¸ª<code>Survivor</code>å†…å­˜ç©ºé—´æ˜¯ç©ºçš„ã€‚</li><li>åœ¨å¤šæ¬¡<code>GC</code>å¾ªç¯åå¹¸å­˜çš„å¯¹è±¡å°†è¢«ç§»åŠ¨åˆ°è€å¹´ä»£(<strong>Old Generation</strong>)ã€‚ é€šå¸¸ï¼Œæ–°ç”Ÿä»£(<strong>Young Generation</strong>)å¯¹è±¡è¾¾åˆ°è®¾å®šçš„å¹´é¾„é˜ˆå€¼åæ‰æœ‰èµ„æ ¼æ™‹å‡åˆ°è€å¹´ä»£(<strong>Old Generation</strong>)ã€‚</li></ul><h2 id="Java-å†…å­˜ç®¡ç†â€”â€”è€å¹´ä»£"><a href="#Java-å†…å­˜ç®¡ç†â€”â€”è€å¹´ä»£" class="headerlink" title="Java å†…å­˜ç®¡ç†â€”â€”è€å¹´ä»£"></a>Java å†…å­˜ç®¡ç†â€”â€”è€å¹´ä»£</h2><p>è€å¹´ä»£(<strong>Old Generation</strong>)åŒ…å«åœ¨å¤šæ¬¡<code>Minor GC</code>å¾ªç¯ä¹‹åé•¿æœŸå­˜åœ¨å¹¶å­˜æ´»ä¸‹æ¥çš„å¯¹è±¡ã€‚é€šå¸¸ï¼Œå½“è€å¹´ä»£(<strong>Old Generation</strong>)è¢«å¡«æ»¡åï¼Œä¹Ÿä¼šæ‰§è¡Œåƒåœ¾å›æ”¶ï¼Œç§°ä¸º<code>Major GC</code>ï¼Œé€šå¸¸èŠ±è´¹æ—¶é—´è¾ƒé•¿ã€‚</p><h3 id="åœé¡¿-Stop-the-World-Event"><a href="#åœé¡¿-Stop-the-World-Event" class="headerlink" title="åœé¡¿(Stop the World Event)"></a>åœé¡¿(Stop the World Event)</h3><p>æ‰€æœ‰åƒåœ¾å›æ”¶éƒ½æ˜¯â€œ<strong>Stop the World</strong>â€äº‹ä»¶ï¼Œå› ä¸ºæ‰€æœ‰åº”ç”¨ç¨‹åºçº¿ç¨‹éƒ½ä¼šåœæ­¢ï¼Œç›´åˆ°æ“ä½œå®Œæˆã€‚ç”±äºæ–°ç”Ÿä»£(<strong>Young Generation</strong>)ä¸»è¦ä¿å­˜çŸ­æš‚å­˜æ´»çš„å¯¹è±¡ï¼Œå› æ­¤<code>Minor GC</code>éå¸¸å¿«ï¼Œåº”ç”¨ç¨‹åºä¸ä¼šå—æ­¤å½±å“ã€‚</p><p>ç„¶è€Œï¼Œ<code>Major GC</code>éœ€è¦èŠ±è´¹å¾ˆé•¿æ—¶é—´ï¼Œå› ä¸ºå®ƒä¼šæ£€æŸ¥æ‰€æœ‰æ´»åŠ¨å¯¹è±¡ã€‚ <code>Major GC</code>åº”è¯¥æœ€å°åŒ–ï¼Œå› ä¸ºå®ƒä¼šä½¿æ‚¨çš„åº”ç”¨ç¨‹åºåœ¨åƒåœ¾å›æ”¶æœŸé—´æ²¡æœ‰å“åº”ã€‚ å› æ­¤ï¼Œå¦‚æœæ‚¨æœ‰å“åº”å¼åº”ç”¨ç¨‹åºè€Œä¸”è¿›è¡Œäº†å¤§é‡<code>Major GC</code>ï¼Œæ‚¨ä¼šæ³¨æ„åˆ°è¶…æ—¶é”™è¯¯ã€‚</p><p>åƒåœ¾æ”¶é›†å™¨è¿›è¡Œåƒåœ¾å›æ”¶æ—¶æŒç»­çš„æ—¶é—´å–å†³äºé‡‡ç”¨çš„åƒåœ¾å›æ”¶ç­–ç•¥ã€‚ä¸ºäº†é¿å…é«˜å“åº”åº”ç”¨ç¨‹åºä¸­çš„è¶…æ—¶ï¼Œå¾ˆæœ‰å¿…è¦å»ç›‘æ§ã€è°ƒæ•´åƒåœ¾æ”¶é›†å™¨ã€‚</p><h3 id="Java-å†…å­˜æ¨¡å‹â€”â€”æ°¸ä¹…ä»£"><a href="#Java-å†…å­˜æ¨¡å‹â€”â€”æ°¸ä¹…ä»£" class="headerlink" title="Java å†…å­˜æ¨¡å‹â€”â€”æ°¸ä¹…ä»£"></a>Java å†…å­˜æ¨¡å‹â€”â€”æ°¸ä¹…ä»£</h3><p>æ°¸ä¹…ä»£(<strong>Permanent Generation</strong>æˆ–<strong>Perm Gen</strong>)åŒ…å«<code>JVM</code>æè¿°åº”ç”¨ç¨‹åºä¸­ç±»å’Œæ–¹æ³•æ‰€éœ€çš„åº”ç”¨ç¨‹åºå…ƒæ•°æ®ã€‚ è¯·æ³¨æ„ï¼Œ<strong>Perm Gen</strong>ä¸æ˜¯<code>Java</code>å †å†…å­˜çš„ä¸€éƒ¨åˆ†ã€‚</p><p><strong>Perm Gen</strong>åœ¨è¿è¡Œæ—¶ï¼Œç”±<code>JVM</code>æ ¹æ®åº”ç”¨ç¨‹åºä½¿ç”¨çš„ç±»å¡«å……ã€‚ <strong>Perm Gen</strong>è¿˜åŒ…å«Java SEåº“ä¸­çš„ç±»å’Œæ–¹æ³•ã€‚ <strong>Perm Gen</strong>ä¸­çš„å¯¹è±¡åœ¨å®Œå…¨åƒåœ¾å›æ”¶(<strong>full garbage collection</strong>)ä¸­å°†ä¼šè¢«å›æ”¶ã€‚</p><h3 id="Java-å†…å­˜æ¨¡å‹â€”â€”æ–¹æ³•åŒº"><a href="#Java-å†…å­˜æ¨¡å‹â€”â€”æ–¹æ³•åŒº" class="headerlink" title="Java å†…å­˜æ¨¡å‹â€”â€”æ–¹æ³•åŒº"></a>Java å†…å­˜æ¨¡å‹â€”â€”æ–¹æ³•åŒº</h3><p>æ–¹æ³•åŒº(<strong>Method Area</strong>)å±äº<strong>Perm Gen</strong>ä¸€éƒ¨åˆ†ï¼Œç”¨äºå­˜å‚¨ç±»ç»“æ„(è¿è¡Œæ—¶å¸¸é‡å’Œé™æ€å˜é‡)ä»¥åŠæ–¹æ³•å’Œæ„é€ å‡½æ•°çš„ä»£ç ã€‚</p><h3 id="Java-å†…å­˜æ¨¡å‹â€”â€”å†…å­˜æ± "><a href="#Java-å†…å­˜æ¨¡å‹â€”â€”å†…å­˜æ± " class="headerlink" title="Java å†…å­˜æ¨¡å‹â€”â€”å†…å­˜æ± "></a>Java å†…å­˜æ¨¡å‹â€”â€”å†…å­˜æ± </h3><p>å†…å­˜æ± (<strong>Memory Pool</strong>)ç”±<code>JVM</code>å†…å­˜ç®¡ç†å™¨åˆ›å»ºï¼Œæ”¯æŒåˆ›å»ºä¸å¯å˜å¯¹è±¡( <strong>immutable object</strong>)æ± ã€‚æ¯”å¦‚ <code>String</code>æ± ã€‚ å†…å­˜æ± å¯ä»¥å±äº<code>Java</code>å †å†…å­˜æˆ–<strong>Perm Gen</strong>ï¼Œå…·ä½“å–å†³äº<code>JVM</code>å†…å­˜ç®¡ç†å™¨å®ç°ã€‚</p><h3 id="Java-å†…å­˜æ¨¡å‹â€”â€”è¿è¡Œæ—¶å¸¸é‡æ± "><a href="#Java-å†…å­˜æ¨¡å‹â€”â€”è¿è¡Œæ—¶å¸¸é‡æ± " class="headerlink" title="Java å†…å­˜æ¨¡å‹â€”â€”è¿è¡Œæ—¶å¸¸é‡æ± "></a>Java å†…å­˜æ¨¡å‹â€”â€”è¿è¡Œæ—¶å¸¸é‡æ± </h3><p>è¿è¡Œæ—¶å¸¸é‡æ± (<strong>Runtime constant pool</strong>)æ˜¯ç±»ä¸­å¸¸é‡æ± çš„æ¯ç±»è¿è¡Œæ—¶è¡¨ç¤ºå½¢å¼ã€‚å®ƒåŒ…å«ç±»è¿è¡Œæ—¶å¸¸é‡å’Œé™æ€æ–¹æ³•ã€‚ è¿è¡Œæ—¶å¸¸é‡æ± æ˜¯æ–¹æ³•åŒºçš„ä¸€éƒ¨åˆ†ã€‚</p><h3 id="Java-å†…å­˜æ¨¡å‹â€”â€”æ ˆå†…å­˜"><a href="#Java-å†…å­˜æ¨¡å‹â€”â€”æ ˆå†…å­˜" class="headerlink" title="Java å†…å­˜æ¨¡å‹â€”â€”æ ˆå†…å­˜"></a>Java å†…å­˜æ¨¡å‹â€”â€”æ ˆå†…å­˜</h3><p>Javaæ ˆå†…å­˜(<strong>Stack Memory</strong>)ç”¨äºæ‰§è¡Œçº¿ç¨‹ã€‚ å®ƒä»¬åŒ…å«æ–¹æ³•ç‰¹å®šçš„å€¼ï¼Œè¿™äº›å€¼æ˜¯çŸ­æš‚å­˜æ´»çš„ï¼Œå¹¶ä¸”å¼•ç”¨äº†å †å†…å­˜ä¸­è¢«æ–¹æ³•å¼•ç”¨çš„å…¶ä»–å¯¹è±¡ã€‚ <a href="/posts/e896e76f/" title="å †å†…å­˜å’Œæ ˆå†…å­˜">å †å†…å­˜å’Œæ ˆå†…å­˜</a></p><h2 id="Java-å†…å­˜ç®¡ç†â€”â€”Java-å †å†…å­˜å¼€å…³"><a href="#Java-å†…å­˜ç®¡ç†â€”â€”Java-å †å†…å­˜å¼€å…³" class="headerlink" title="Java å†…å­˜ç®¡ç†â€”â€”Java å †å†…å­˜å¼€å…³"></a>Java å†…å­˜ç®¡ç†â€”â€”Java å †å†…å­˜å¼€å…³</h2><p>Javaæä¾›äº†è®¸å¤šå†…å­˜å¼€å…³ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨æ¥è®¾ç½®å†…å­˜å¤§å°å’Œå®ƒä»¬çš„æ¯”ç‡ã€‚ä¸€äº›å¸¸ç”¨çš„å†…å­˜å¼€å…³æ˜¯ï¼š</p><table><thead><tr><th align="left">VM SWITCH</th><th align="left">VM SWITCH DESCRIPTION</th></tr></thead><tbody><tr><td align="left">-Xms</td><td align="left">åœ¨ JVM å¯åŠ¨æ—¶è®¾ç½®åˆå§‹å †å†…å­˜å¤§å°ã€‚</td></tr><tr><td align="left">-Xmx</td><td align="left">è®¾ç½®å †å†…å­˜ç©ºé—´å¤§å°çš„æœ€å¤§å€¼ã€‚</td></tr><tr><td align="left">-Xmn</td><td align="left">è®¾ç½®æ–°ç”Ÿä»£å†…å­˜ç©ºé—´å¤§å°ï¼Œå‰©ä¸‹çš„ç©ºé—´å¤§å°å°±æ˜¯è€å¹´ä»£çš„å†…å­˜ç©ºé—´å¤§å°ã€‚</td></tr><tr><td align="left">-XX:PermGen</td><td align="left">è®¾ç½®æ°¸ä¹…ä»£åˆå§‹å†…å­˜ç©ºé—´å¤§å°</td></tr><tr><td align="left">-XX:MaxPermGen</td><td align="left">è®¾ç½®æ°¸ä¹…ä»£å†…å­˜ç©ºé—´å¤§å°çš„æœ€å¤§å€¼ã€‚</td></tr><tr><td align="left">-XX:SurvivorRatio</td><td align="left">è®¾ç½®<code>Eden</code>å†…å­˜ç©ºé—´å’Œ<code>Survivor</code>å†…å­˜ç©ºé—´çš„æ¯”ä¾‹ï¼Œä¾‹å¦‚ï¼Œå¦‚æœæ–°ç”Ÿä»£çš„ç©ºé—´å¤§å°æ˜¯10Mï¼Œè€Œ-XX:SurvivorRatio=2ï¼Œé‚£ä¹ˆ<code>Eden</code>å†…å­˜ç©ºé—´å¤§å°ä¸º5Mï¼Œä¸¤ä¸ª<code>Survivor</code>å†…å­˜ç©ºé—´å¤§å°å°†åˆ†åˆ«ä¸º2.5Mã€‚-XX:SurvivorRatio é»˜è®¤å€¼ä¸º8ã€‚</td></tr><tr><td align="left">-XX:NewRatio</td><td align="left">è®¾ç½®è€å¹´ä»£å’Œæ–°ç”Ÿä»£ç©ºé—´å¤§å°çš„æ¯”ä¾‹ã€‚ é»˜è®¤å€¼ä¸º 2.</td></tr></tbody></table><p>å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä¸Šé¢çš„é€‰é¡¹è¶³å¤Ÿä½¿ç”¨äº†ï¼Œä½†æ˜¯å¦‚æœæ‚¨æƒ³ä½¿ç”¨å…¶ä»–é€‰é¡¹ï¼Œå¯ä»¥å‚è€ƒ<a href="https://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html" target="_blank" rel="noopener">JVM é€‰é¡¹</a>ã€‚</p><h2 id="Java-å†…å­˜ç®¡ç†â€”â€”åƒåœ¾å›æ”¶"><a href="#Java-å†…å­˜ç®¡ç†â€”â€”åƒåœ¾å›æ”¶" class="headerlink" title="Java å†…å­˜ç®¡ç†â€”â€”åƒåœ¾å›æ”¶"></a>Java å†…å­˜ç®¡ç†â€”â€”åƒåœ¾å›æ”¶</h2><p><code>Java</code>åƒåœ¾æ”¶é›†æ˜¯ä»å†…å­˜ä¸­æ ‡è¯†ã€åˆ é™¤æœªä½¿ç”¨å¯¹è±¡ä»¥åŠé‡Šæ”¾ç©ºé—´çš„è¿‡ç¨‹ã€‚ <code>Java</code>ç¼–ç¨‹è¯­è¨€çš„ç‰¹è‰²ä¹‹ä¸€æ˜¯è‡ªåŠ¨åƒåœ¾å›æ”¶ï¼Œä¸å…¶ä»–ç¼–ç¨‹è¯­è¨€(å¦‚C)ä¸åŒï¼Œå®ƒä»¬çš„å†…å­˜éœ€è¦æ‰‹åŠ¨åˆ†é…å’Œé‡Šæ”¾ã€‚</p><p>åƒåœ¾æ”¶é›†å™¨(<strong>Garbage Collector</strong>)æ˜¯åœ¨åå°è¿è¡Œçš„ç¨‹åº(å®ˆæŠ¤çº¿ç¨‹)ï¼Œå®ƒæ£€æŸ¥å†…å­˜ä¸­çš„æ‰€æœ‰å¯¹è±¡ï¼Œå¹¶æ‰¾å‡ºç¨‹åºæ‰€æœ‰æœªè¢«å¼•ç”¨çš„å¯¹è±¡ã€‚ ç„¶ååˆ é™¤æ‰€æœ‰æœªè¢«å¼•ç”¨çš„å¯¹è±¡ï¼Œå¹¶é‡Šæ”¾ç©ºé—´ä»¥åˆ†é…ç»™å…¶ä»–å¯¹è±¡ã€‚</p><p>åƒåœ¾å›æ”¶çš„ä¸€ä¸ªç®€å•å®ç°å¯ä»¥åˆ†ä¸ºä¸‰æ­¥ï¼š</p><ol><li><strong>æ ‡è®°</strong>â€”â€”è¿™æ˜¯åƒåœ¾å›æ”¶çš„ç¬¬ä¸€æ­¥ï¼Œå°†è¯†åˆ«å‡ºå“ªäº›å¯¹è±¡æ­£åœ¨ä½¿ç”¨ï¼Œå“ªäº›å¯¹è±¡æ²¡æœ‰åœ¨ä½¿ç”¨ã€‚</li><li><strong>æ™®é€šåˆ é™¤</strong>â€”â€”åƒåœ¾æ”¶é›†å™¨å°†åˆ é™¤æœªè¢«ä½¿ç”¨çš„å¯¹è±¡ï¼Œç„¶åå›æ”¶å†…å­˜ç©ºé—´åˆ†é…ç»™å…¶ä»–å¯¹è±¡ä½¿ç”¨ã€‚</li><li><strong>å‹ç¼©åˆ é™¤</strong>â€”â€”ä¸ºäº†è·å¾—æ›´å¥½çš„æ€§èƒ½ï¼Œåœ¨åˆ é™¤æœªè¢«ä½¿ç”¨çš„å¯¹è±¡åï¼Œå¯ä»¥å°†æ‰€æœ‰å¹¸å­˜çš„å¯¹è±¡ç§»åŠ¨åˆ°ä¸€èµ·ã€‚ è¿™ä¼šæé«˜ç»™æ–°å¯¹è±¡åˆ†é…å†…å­˜æ—¶çš„æ€§èƒ½ã€‚</li></ol><p>æ ‡è®°-åˆ é™¤æ–¹æ³•çš„ç¼ºç‚¹</p><ol><li>å®ƒæ•ˆç‡ä¸é«˜ï¼Œå› ä¸ºå¤§å¤šæ•°æ–°åˆ›å»ºçš„å¯¹è±¡éƒ½å°†è¢«é—²ç½®</li><li>åœ¨å¤šä¸ªåƒåœ¾æ”¶é›†å‘¨æœŸä¸­ä½¿ç”¨çš„å¯¹è±¡å¾ˆæœ‰å¯èƒ½åœ¨æœªæ¥çš„åƒåœ¾æ”¶é›†å‘¨æœŸä¸­ç»§ç»­ä½¿ç”¨ã€‚</li></ol><p>è¿™æ˜¯å› ä¸ºå †å†…å­˜åˆ†ä¸ºæ–°ç”Ÿä»£(<strong>Young Generation</strong>)å’Œè€å¹´ä»£(<strong>Old Generation</strong>)ï¼Œ<code>Java</code>åƒåœ¾å›æ”¶æ˜¯åˆ†ä»£çš„ã€‚ ä¸Šæ–‡ä¸­å·²ç»è§£é‡Šè¿‡å¦‚ä½•æ ¹æ®<code>Minor GC</code>å’Œ<code>Major GC</code>æ‰«æå¯¹è±¡å¹¶å°†å…¶ä»ä¸€ä¸ªç©ºé—´ç§»åŠ¨åˆ°å¦ä¸€ä¸ªç©ºé—´ã€‚</p><h2 id="Java-å†…å­˜ç®¡ç†â€”â€”åƒåœ¾å›æ”¶çš„ç±»å‹"><a href="#Java-å†…å­˜ç®¡ç†â€”â€”åƒåœ¾å›æ”¶çš„ç±»å‹" class="headerlink" title="Java å†…å­˜ç®¡ç†â€”â€”åƒåœ¾å›æ”¶çš„ç±»å‹"></a>Java å†…å­˜ç®¡ç†â€”â€”åƒåœ¾å›æ”¶çš„ç±»å‹</h2><p>åœ¨åº”ç”¨ç¨‹åºä¸­æˆ‘ä»¬å¯ä»¥ä½¿ç”¨5ç§åƒåœ¾å›æ”¶ç±»å‹ï¼Œæˆ‘åªéœ€è¦è°ƒæ•´<code>JVM</code>å¼€å…³å³å¯ä¸ºæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºé€‰æ‹©åƒåœ¾å›æ”¶ç­–ç•¥ã€‚</p><ol><li><strong>Serial GC (-XX:+UseSerialGC)</strong>: <strong>Serial GC</strong>ä½¿ç”¨ç®€å•çš„æ ‡è®° - æ¸…é™¤ - æ•´ç†(<strong>mark-sweep-compact</strong>)æ–¹æ³•ç”¨äºæ–°ç”Ÿä»£å’Œè€å¹´ä»£çš„åƒåœ¾å›æ”¶ï¼Œå³<code>Minor GC</code>å’Œ<code>Major GC</code>ã€‚<strong>Serial GC</strong>åœ¨å®¢æˆ·ç«¯æœºä¸­éå¸¸æœ‰ç”¨ï¼Œä¾‹å¦‚æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºæ¯”è¾ƒç‹¬ç«‹ï¼Œè€Œä¸”CPUæ¯”è¾ƒå°ã€‚ å®ƒé€‚ç”¨äºå†…å­˜å ç”¨å°‘çš„å°å‹åº”ç”¨ç¨‹åºã€‚</li><li><strong>Parallel GC (-XX:+UseParallelGC)</strong>: <strong>Parallel GC</strong>ä¸<strong>Serial GC</strong>ç›¸åŒï¼Œä¸åŒçš„æ˜¯<strong>Parallel GC</strong>ä½¿ç”¨N(Næ˜¯ç³»ç»Ÿä¸­çš„CPUæ ¸å¿ƒæ•°)ä¸ªçº¿ç¨‹è¿›è¡Œæ–°ç”Ÿä»£çš„åƒåœ¾å›æ”¶ã€‚ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>-XXï¼šParallelGCThreads = n</code>JVM é€‰é¡¹æ¥æ§åˆ¶çº¿ç¨‹æ•°ã€‚å¹¶è¡Œåƒåœ¾æ”¶é›†å™¨ä¹Ÿç§°ä¸ºååé‡æ”¶é›†å™¨ï¼Œå› ä¸ºå®ƒä½¿ç”¨å¤šä¸ª CPU æ¥æå‡ GC æ€§èƒ½ã€‚ <strong>Parallel GC</strong>ä½¿ç”¨å•ä¸ªçº¿ç¨‹è¿›è¡Œè€å¹´ä»£çš„åƒåœ¾å›æ”¶ã€‚</li><li><strong>Parallel Old GC (-XX:+UseParallelOldGC)</strong>: å’Œ<strong>Parallel GC</strong>ç›¸åŒï¼Œä¸åŒçš„æ˜¯å®ƒé‡‡ç”¨å¤šçº¿ç¨‹è¿›è¡Œè€å¹´ä»£å’Œæ–°ç”Ÿä»£çš„åƒåœ¾å›æ”¶ã€‚</li><li><strong>Concurrent Mark Sweep (CMS) Collector (-XX:+UseConcMarkSweepGC)</strong>: CMSæ”¶é›†å™¨ä¹Ÿç§°ä¸ºå¹¶å‘ä½æš‚åœæ”¶é›†å™¨ã€‚ åœ¨è€å¹´ä»£è¿›è¡Œåƒåœ¾å›æ”¶æ—¶ï¼ŒCMSæ”¶é›†å™¨å°è¯•é€šè¿‡ä¸åº”ç”¨ç¨‹åºçº¿ç¨‹åŒæ—¶æ‰§è¡Œå¤§å¤šæ•°åƒåœ¾æ”¶é›†å·¥ä½œæ¥æœ€å°åŒ–ç”±äºåƒåœ¾æ”¶é›†è€Œå¯¼è‡´çš„æš‚åœã€‚<br>æ–°ç”Ÿä»£çš„CMSæ”¶é›†å™¨ä¸å¹¶è¡Œæ”¶é›†å™¨ä½¿ç”¨ç›¸åŒçš„ç®—æ³•ã€‚ æ­¤åƒåœ¾æ”¶é›†å™¨é€‚ç”¨äºæˆ‘ä»¬æ— æ³•å¿å—æš‚åœæ—¶é—´è¿‡é•¿çš„å“åº”å¼åº”ç”¨ç¨‹åºã€‚ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>-XX:ParallelCMSThreads=n</code>JVMé€‰é¡¹è°ƒæ•´CMSæ”¶é›†å™¨ä¸­çš„çº¿ç¨‹æ•° ã€‚</li><li><strong>G1 Garbage Collector (-XX:+UseG1GC)</strong>: <strong>Garbage First</strong> æˆ–<strong>G1</strong>åƒåœ¾æ”¶é›†å™¨ä» Java 7 å¼€å§‹æ”¯æŒï¼Œå®ƒçš„ç›®æ ‡æ˜¯å–ä»£<strong>CMSæ”¶é›†å™¨</strong>ã€‚ <strong>G1</strong>æ”¶é›†å™¨æ˜¯å¹¶è¡Œï¼Œå¹¶å‘å’Œå¢é‡å‹ç¼©çš„ä½æš‚åœåƒåœ¾æ”¶é›†å™¨ã€‚<strong>G1</strong>æ”¶é›†å™¨ä¸åƒå…¶ä»–æ”¶é›†å™¨é‚£æ ·å·¥ä½œï¼Œå¹¶ä¸”æ²¡æœ‰æ–°ç”Ÿä»£å’Œè€å¹´ä»£çš„æ¦‚å¿µã€‚ å®ƒå°†å †ç©ºé—´åˆ’åˆ†ä¸ºå¤šä¸ªå¤§å°ç›¸ç­‰çš„å †åŒºåŸŸã€‚ å½“è¿›è¡Œåƒåœ¾å›æ”¶æ—¶ï¼Œå®ƒé¦–å…ˆæ”¶é›†å…·æœ‰è¾ƒå°‘å®æ—¶æ•°æ®çš„åŒºåŸŸï¼Œå› æ­¤ç§°ä¸ºâ€œ<strong>Garbage First</strong>â€ã€‚ æ‚¨å¯ä»¥åœ¨<a href="https://docs.oracle.com/javase/7/docs/technotes/guides/vm/G1.html" target="_blank" rel="noopener">Oracle Garbage-First Collector æ–‡æ¡£</a>ä¸­æ‰¾åˆ°æœ‰å…³å®ƒçš„æ›´å¤šè¯¦ç»†ä¿¡æ¯ã€‚</li></ol><h2 id="Java-å†…å­˜ç®¡ç†â€”â€”Java-åƒåœ¾å›æ”¶ç›‘æ§"><a href="#Java-å†…å­˜ç®¡ç†â€”â€”Java-åƒåœ¾å›æ”¶ç›‘æ§" class="headerlink" title="Java å†…å­˜ç®¡ç†â€”â€”Java åƒåœ¾å›æ”¶ç›‘æ§"></a>Java å†…å­˜ç®¡ç†â€”â€”Java åƒåœ¾å›æ”¶ç›‘æ§</h2><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Javaå‘½ä»¤è¡Œä»¥åŠUIå·¥å…·æ¥ç›‘è§†åº”ç”¨ç¨‹åºçš„åƒåœ¾æ”¶é›†æ´»åŠ¨ã€‚</p><h4 id="jstat"><a href="#jstat" class="headerlink" title="jstat"></a>jstat</h4><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>jstat</code>å‘½ä»¤è¡Œå·¥å…·æ¥ç›‘æ§<code>JVM</code> å†…å­˜å’Œåƒåœ¾æ”¶é›†æ´»åŠ¨ã€‚ å®ƒé€‚é…æ ‡å‡†<code>JDK</code>ï¼Œå› æ­¤æ‚¨æ— éœ€æ‰§è¡Œä»»ä½•å…¶ä»–æ“ä½œå³å¯ä½¿ç”¨å®ƒã€‚</p><p>åœ¨ä½¿ç”¨<code>jstat</code>å‘½ä»¤ä¹‹å‰ï¼Œä½ éœ€è¦çŸ¥é“ Java åº”ç”¨çš„è¿›ç¨‹idã€‚ä½ å¯ä»¥ä½¿ç”¨<code>ps -ef | grep java</code>å‘½ä»¤æ¥è·å–è¿›ç¨‹idã€‚å‡å¦‚æˆ‘çš„è¿›ç¨‹idæ˜¯9582ï¼Œé‚£ä¹ˆæˆ‘å°±å¯ä»¥ä½¿ç”¨<code>jstat -gc 9582 1000</code>æ¥æŸ¥çœ‹åƒåœ¾å›æ”¶çš„ä¿¡æ¯ã€‚å‘½ä»¤ä¸­æœ€åä¸€ä¸ªå‚æ•°æ˜¯æ¯ä¸ªè¾“å‡ºä¹‹é—´çš„æ—¶é—´é—´éš”ï¼Œå› æ­¤å®ƒå°†æ¯1ç§’æ‰“å°ä¸€æ¬¡å†…å­˜å’Œåƒåœ¾æ”¶é›†æ•°æ®ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> jstat -gc 9582 1000</span></span><br><span class="line"> S0C    S1C    S0U    S1U      EC       EU        OC         OU       PC     PU    YGC     YGCT    FGC    FGCT     GCT</span><br><span class="line">1024.0 1024.0  0.0    0.0    8192.0   7933.3   42108.0    23401.3   20480.0 19990.9    157    0.274  40      1.381    1.654</span><br><span class="line">1024.0 1024.0  0.0    0.0    8192.0   8026.5   42108.0    23401.3   20480.0 19990.9    157    0.274  40      1.381    1.654</span><br><span class="line">1024.0 1024.0  0.0    0.0    8192.0   8030.0   42108.0    23401.3   20480.0 19990.9    157    0.274  40      1.381    1.654</span><br><span class="line">1024.0 1024.0  0.0    0.0    8192.0   8122.2   42108.0    23401.3   20480.0 19990.9    157    0.274  40      1.381    1.654</span><br><span class="line">1024.0 1024.0  0.0    0.0    8192.0   8171.2   42108.0    23401.3   20480.0 19990.9    157    0.274  40      1.381    1.654</span><br><span class="line">1024.0 1024.0  48.7   0.0    8192.0   106.7    42108.0    23401.3   20480.0 19990.9    158    0.275  40      1.381    1.656</span><br><span class="line">1024.0 1024.0  48.7   0.0    8192.0   145.8    42108.0    23401.3   20480.0 19990.9    158    0.275  40      1.381    1.656</span><br></pre></td></tr></table></figure><p>æ¯ä¸€åˆ—çš„å«ä¹‰å¦‚ä¸‹ï¼š</p><ul><li><strong>S0C and S1C</strong>: Survivor0 å’Œ Survivor1å½“å‰çš„å†…å­˜å¤§å°ï¼Œä»¥ KB è®¡ã€‚</li><li><strong>S0U and S1U</strong>: Survivor0 å’Œ Survivor1å½“å‰å·²ä½¿ç”¨çš„å†…å­˜å¤§å°ï¼Œä»¥ KB è®¡ã€‚æ³¨æ„å…¶ä¸­ä¸€ä¸ª survivor ä¸€ç›´æ˜¯ç©ºçš„ã€‚</li><li><strong>EC and EU</strong>: Eden åŒºå½“å‰çš„å†…å­˜å¤§å°å’Œ Eden åŒºå½“å‰å·²ä½¿ç”¨çš„å†…å­˜å¤§å°ï¼Œä»¥ KB è®¡ã€‚æ³¨æ„ EU çš„å¤§å°ä¼šä¸€ç›´å¢å¤§ç›´åˆ°æ¥è¿‘ECçš„å¤§å°ï¼Œæ­¤æ—¶ä¼šæ‰§è¡ŒMinor GCï¼Œç„¶åEU çš„å¤§å°å°±é™ä½äº†ã€‚</li><li><strong>OC and OU</strong>: è€å¹´ä»£å½“å‰çš„å¤§å°å’Œå·²ä½¿ç”¨çš„å¤§å°ï¼Œä»¥ KB è®¡ã€‚</li><li><strong>PC and PU</strong>: æ°¸ä¹…ä»£å½“å‰çš„å¤§å°å’Œå·²ä½¿ç”¨çš„å¤§å°ï¼Œä»¥ KB è®¡ã€‚</li><li><strong>YGC and YGCT</strong>: YGC ä»£è¡¨åœ¨æ–°ç”Ÿä»£ GC å‘ç”Ÿçš„æ¬¡æ•°ï¼›YGCT ä»£è¡¨æ–°ç”Ÿä»£æ‰§è¡ŒGCçš„ç´¯è®¡æ—¶é—´ã€‚æ³¨æ„ï¼Œè¿™ä¸¤ä¸ªå€¼éƒ½åœ¨åŒä¸€è¡Œä¸­å¢åŠ ï¼Œå› ä¸º Minor GC ä¼šä½¿å¾— EU å€¼ä¸‹é™ã€‚</li><li><strong>FGC and FGCT</strong>: FGC ä»£è¡¨ Full GC å‘ç”Ÿçš„æ¬¡æ•°ï¼›FGCT Full GC å‘ç”Ÿçš„ç´¯è®¡æ—¶é—´ã€‚ æ³¨æ„ï¼Œä¸æ–°ç”Ÿä»£ GC ç›¸æ¯”ï¼Œ Full GC èŠ±è´¹æ—¶é—´å¤ªé•¿ã€‚</li><li><strong>GCT</strong>: GC æ“ä½œçš„æ€»ç´¯è®¡æ—¶é—´ã€‚æ³¨æ„ï¼Œå®ƒæ˜¯ YGCT å’Œ FGCT åˆ—å€¼çš„æ€»å’Œã€‚</li></ul><p><code>jstat</code>çš„ä¼˜ç‚¹æ˜¯å®ƒä¹Ÿå¯ä»¥åœ¨æ²¡æœ‰ GUI çš„è¿œç¨‹æœåŠ¡å™¨ä¸Šæ‰§è¡Œã€‚è¯·æ³¨æ„ï¼Œæ ¹æ®<code>-xmn10m</code>jvmé€‰é¡¹çš„é™åˆ¶ï¼ŒS0Cã€S1Cå’ŒECçš„æ€»å’Œä¸º10Mã€‚</p><h3 id="å¯è§†åŒ–çš„-Java-VisualVM"><a href="#å¯è§†åŒ–çš„-Java-VisualVM" class="headerlink" title="å¯è§†åŒ–çš„ Java VisualVM"></a>å¯è§†åŒ–çš„ Java VisualVM</h3><p>å¦‚æœæ‚¨æƒ³åœ¨GUIä¸­çœ‹åˆ°å†…å­˜å’ŒGCæ“ä½œï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨<code>jvisualvm</code>å·¥å…·ã€‚Java VisualVMä¹Ÿæ˜¯JDKçš„ä¸€éƒ¨åˆ†ï¼Œä¸éœ€è¦å•ç‹¬ä¸‹è½½ã€‚</p><p>åªéœ€åœ¨ç»ˆç«¯ä¸­è¿è¡Œ<code>jvisualvm</code>å‘½ä»¤å³å¯å¯åŠ¨Java VisualVMåº”ç”¨ç¨‹åºã€‚å¯åŠ¨åï¼Œæ‚¨éœ€è¦ä»tools -&gt; plugins é€‰é¡¹å®‰è£…VisualGCæ’ä»¶ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p><p><img src="https://cdn.journaldev.com/wp-content/uploads/2014/05/VisualVM-Visual-GC-Plugin-450x271.png" alt="VisualVM-Visual-GC-Plugin"></p><p>å®‰è£…å®ŒVisualGCä¹‹åï¼Œåªéœ€æ‰“å¼€å·¦ä¾§åˆ—ä¸­çš„åº”ç”¨ç¨‹åºï¼Œç„¶åè½¬åˆ°VisualGCéƒ¨åˆ†ã€‚æ‚¨å°†å¾—åˆ°ä¸€ä¸ªJVMå†…å­˜å’Œåƒåœ¾æ”¶é›†ç»†èŠ‚çš„æ˜ åƒï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p><p><img src="https://cdn.journaldev.com/wp-content/uploads/2014/05/Serial-GC-VisualGC-450x271.png" alt="Serial-GC-VisualGC"></p><h2 id="åƒåœ¾å›æ”¶è°ƒä¼˜"><a href="#åƒåœ¾å›æ”¶è°ƒä¼˜" class="headerlink" title="åƒåœ¾å›æ”¶è°ƒä¼˜"></a>åƒåœ¾å›æ”¶è°ƒä¼˜</h2><p>Javaåƒåœ¾å›æ”¶è°ƒä¼˜åº”è¯¥æ˜¯æé«˜åº”ç”¨ç¨‹åºååé‡çš„æœ€åé€‰é¡¹ï¼Œåªæœ‰å½“GCæ—¶é—´è¾ƒé•¿å¯¼è‡´åº”ç”¨ç¨‹åºè¶…æ—¶æ—¶ï¼Œæ‰çœ‹åˆ°æ€§èƒ½ä¸‹é™ã€‚</p><p>å‡å¦‚ä½ åœ¨æ—¥å¿—ä¸­çœ‹åˆ°<code>java.lang.OutOfMemoryError: PermGen space</code>é”™è¯¯ï¼Œä½ å¯ä»¥é€šè¿‡<code>-XX:PermGenå’Œ-XX:MaxPermGen</code>æ¥ç›‘æ§å’Œæä¾›æ°¸ä¹…ä»£å†…å­˜ã€‚ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨<code>-XX:+CMSClassUnloadingEnabled</code>ï¼Œç„¶åè§‚å¯Ÿåœ¨CMS åƒåœ¾æ”¶é›†å™¨çš„æ€§èƒ½ã€‚</p><p>å‡å¦‚ä½ çœ‹åˆ°å¾ˆå¤š Full GC æ“ä½œï¼Œä½ å¯ä»¥æé«˜è€å¹´ä»£å†…å­˜å¤§å°ã€‚</p><p>æ€»çš„æ¥è¯´ï¼Œåƒåœ¾å›æ”¶è°ƒä¼˜éœ€è¦èŠ±è´¹å¤§é‡çš„ç²¾åŠ›å’Œæ—¶é—´ï¼Œè€Œä¸”æ²¡æœ‰ç¡¬æ€§å’Œå¿«é€Ÿçš„è§„åˆ™ã€‚æ‚¨éœ€è¦å°è¯•ä¸åŒçš„é€‰é¡¹å¹¶è¿›è¡Œæ¯”è¾ƒï¼Œä»ä¸­æ‰¾å‡ºæœ€é€‚åˆæ‚¨çš„é€‰é¡¹ã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;å¦‚æœæ‚¨æƒ³å¼„æ¸…æ¥š&lt;code&gt;Java&lt;/code&gt;åƒåœ¾å›æ”¶çš„çš„å·¥ä½œåŸç†ï¼Œé‚£ä¹ˆç†è§£&lt;code&gt;JVM&lt;/code&gt;å†…å­˜æ¨¡å‹ä»¥åŠ&lt;code&gt;Java&lt;/code&gt;å†…å­˜ç®¡ç†éå¸¸é‡è¦ã€‚ ä»Šå¤©æˆ‘ä»¬å°†æ¢è®¨ä¸€ä¸‹&lt;code&gt;Java&lt;/code&gt;ä¸­çš„å†…å­˜ç®¡ç†ã€&lt;code&gt;JVM&lt;/code&gt;
      
    
    </summary>
    
      <category term="å­¦ä¹ ç¬”è®°" scheme="https://muhouer.github.io/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="Javaå†…å­˜æ¨¡å‹" scheme="https://muhouer.github.io/tags/Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B/"/>
    
  </entry>
  
  <entry>
    <title>Redisè¿›é˜¶æ•™ç¨‹</title>
    <link href="https://muhouer.github.io/posts/c275b75f/"/>
    <id>https://muhouer.github.io/posts/c275b75f/</id>
    <published>2019-08-05T16:29:00.000Z</published>
    <updated>2019-08-05T17:33:59.175Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Redis-æ•°æ®å¤‡ä»½ä¸æ¢å¤"><a href="#Redis-æ•°æ®å¤‡ä»½ä¸æ¢å¤" class="headerlink" title="Redis æ•°æ®å¤‡ä»½ä¸æ¢å¤"></a>Redis æ•°æ®å¤‡ä»½ä¸æ¢å¤</h2><h3 id="æ•°æ®å¤‡ä»½"><a href="#æ•°æ®å¤‡ä»½" class="headerlink" title="æ•°æ®å¤‡ä»½"></a>æ•°æ®å¤‡ä»½</h3><p>Redis <code>save</code> å‘½ä»¤ç”¨äºåˆ›å»ºå½“å‰æ•°æ®åº“çš„å¤‡ä»½ã€‚è¯¥å‘½ä»¤å°†åœ¨ redis å®‰è£…ç›®å½•ä¸­åˆ›å»ºdump.rdbæ–‡ä»¶ã€‚</p><p>åˆ›å»º redis å¤‡ä»½æ–‡ä»¶ä¹Ÿå¯ä»¥ä½¿ç”¨å‘½ä»¤ <code>bgsave</code>ï¼Œè¯¥å‘½ä»¤åœ¨åå°æ‰§è¡Œã€‚</p><h4 id="è¯­æ³•"><a href="#è¯­æ³•" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h4><p><code>save</code></p><h4 id="å®ä¾‹"><a href="#å®ä¾‹" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; save </span><br><span class="line">OK</span><br></pre></td></tr></table></figure><h3 id="æ¢å¤æ•°æ®"><a href="#æ¢å¤æ•°æ®" class="headerlink" title="æ¢å¤æ•°æ®"></a>æ¢å¤æ•°æ®</h3><p>å¦‚æœéœ€è¦æ¢å¤æ•°æ®ï¼Œåªéœ€å°†å¤‡ä»½æ–‡ä»¶ (dump.rdb) ç§»åŠ¨åˆ° redis å®‰è£…ç›®å½•å¹¶å¯åŠ¨æœåŠ¡å³å¯ã€‚è·å– redis ç›®å½•å¯ä»¥ä½¿ç”¨<code>config</code>å‘½ä»¤ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; config get dir</span><br><span class="line">1) &quot;dir&quot;</span><br><span class="line">2) &quot;/usr/local/redis-5.0.5/src&quot;</span><br></pre></td></tr></table></figure><h2 id="Redis-å®‰å…¨"><a href="#Redis-å®‰å…¨" class="headerlink" title="Redis å®‰å…¨"></a>Redis å®‰å…¨</h2><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ redis çš„é…ç½®æ–‡ä»¶è®¾ç½®å¯†ç å‚æ•°ï¼Œè¿™æ ·å®¢æˆ·ç«¯è¿æ¥åˆ° redis æœåŠ¡å°±éœ€è¦å¯†ç éªŒè¯ï¼Œè¿™æ ·å¯ä»¥è®©ä½ çš„ redis æœåŠ¡æ›´å®‰å…¨ã€‚</p><p>é»˜è®¤æƒ…å†µä¸‹ requirepass å‚æ•°æ˜¯ç©ºçš„ï¼Œè¿™å°±æ„å‘³ç€ä½ æ— éœ€é€šè¿‡å¯†ç éªŒè¯å°±å¯ä»¥è¿æ¥åˆ° redis æœåŠ¡ã€‚</p><h3 id="è¯­æ³•-1"><a href="#è¯­æ³•-1" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h3><p><code>auth password</code></p><h3 id="å®ä¾‹-1"><a href="#å®ä¾‹-1" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; config get requirepass</span><br><span class="line">1) &quot;requirepass&quot;</span><br><span class="line">2) &quot;&quot;</span><br><span class="line">127.0.0.1:6379&gt; config set requirepass &quot;redis&quot;</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; config get requirepass</span><br><span class="line">(error) NOAUTH Authentication required.</span><br><span class="line">127.0.0.1:6379&gt; auth redis</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; config get requirepass</span><br><span class="line">1) &quot;requirepass&quot;</span><br><span class="line">2) &quot;redis&quot;</span><br><span class="line">127.0.0.1:6379&gt;</span><br></pre></td></tr></table></figure><h2 id="Redis-æ€§èƒ½æµ‹è¯•"><a href="#Redis-æ€§èƒ½æµ‹è¯•" class="headerlink" title="Redis æ€§èƒ½æµ‹è¯•"></a>Redis æ€§èƒ½æµ‹è¯•</h2><p>Redis æ€§èƒ½æµ‹è¯•æ˜¯é€šè¿‡åŒæ—¶æ‰§è¡Œå¤šä¸ªå‘½ä»¤å®ç°çš„ã€‚</p><h3 id="è¯­æ³•-2"><a href="#è¯­æ³•-2" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h3><p><code>redis-benchmark [option] [option value]</code></p><p>æ³¨æ„ï¼šè¯¥å‘½ä»¤æ˜¯åœ¨ redis çš„ç›®å½•ä¸‹æ‰§è¡Œçš„ï¼Œè€Œä¸æ˜¯ redis<br>å®¢æˆ·ç«¯çš„å†…éƒ¨æŒ‡ä»¤ã€‚</p><h3 id="å®ä¾‹-2"><a href="#å®ä¾‹-2" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h3><p>åŒæ—¶æ‰§è¡Œ 10000 ä¸ªè¯·æ±‚æ¥æ£€æµ‹æ€§èƒ½:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">$ ./redis-benchmark -n 10000 -q</span><br><span class="line">PING_INLINE: 104166.66 requests per second</span><br><span class="line">PING_BULK: 106382.98 requests per second</span><br><span class="line">SET: 105263.16 requests per second</span><br><span class="line">GET: 105263.16 requests per second</span><br><span class="line">INCR: 103092.78 requests per second</span><br><span class="line">LPUSH: 106382.98 requests per second</span><br><span class="line">RPUSH: 105263.16 requests per second</span><br><span class="line">LPOP: 108695.65 requests per second</span><br><span class="line">RPOP: 102040.82 requests per second</span><br><span class="line">SADD: 106382.98 requests per second</span><br><span class="line">HSET: 107526.88 requests per second</span><br><span class="line">SPOP: 97087.38 requests per second</span><br><span class="line">LPUSH (needed to benchmark LRANGE): 101010.10 requests per second</span><br><span class="line">LRANGE_100 (first 100 elements): 106382.98 requests per second</span><br><span class="line">LRANGE_300 (first 300 elements): 109890.11 requests per second</span><br><span class="line">LRANGE_500 (first 450 elements): 107526.88 requests per second</span><br><span class="line">LRANGE_600 (first 600 elements): 99009.90 requests per second</span><br><span class="line">MSET (10 keys): 101010.10 requests per second</span><br></pre></td></tr></table></figure><table><thead><tr><th align="left">åºå·</th><th align="left">é€‰é¡¹</th><th align="left">æè¿°</th><th align="left">é»˜è®¤å€¼</th></tr></thead><tbody><tr><td align="left">1</td><td align="left"><strong>-h</strong></td><td align="left">æŒ‡å®šæœåŠ¡å™¨ä¸»æœºå</td><td align="left">127.0.0.1</td></tr><tr><td align="left">2</td><td align="left"><strong>-p</strong></td><td align="left">æŒ‡å®šæœåŠ¡å™¨ç«¯å£</td><td align="left">6379</td></tr><tr><td align="left">3</td><td align="left"><strong>-s</strong></td><td align="left">æŒ‡å®šæœåŠ¡å™¨ socket</td><td align="left"></td></tr><tr><td align="left">4</td><td align="left"><strong>-c</strong></td><td align="left">æŒ‡å®šå¹¶å‘è¿æ¥æ•°</td><td align="left">50</td></tr><tr><td align="left">5</td><td align="left"><strong>-n</strong></td><td align="left">æŒ‡å®šè¯·æ±‚æ•°</td><td align="left">10000</td></tr><tr><td align="left">6</td><td align="left"><strong>-d</strong></td><td align="left">ä»¥å­—èŠ‚çš„å½¢å¼æŒ‡å®š SET/GET å€¼çš„æ•°æ®å¤§å°</td><td align="left">2</td></tr><tr><td align="left">7</td><td align="left"><strong>-k</strong></td><td align="left">1=keep alive 0=reconnect</td><td align="left">1</td></tr><tr><td align="left">8</td><td align="left"><strong>-r</strong></td><td align="left">SET/GET/INCR ä½¿ç”¨éšæœº key, SADD ä½¿ç”¨éšæœºå€¼</td><td align="left"></td></tr><tr><td align="left">9</td><td align="left"><strong>-P</strong></td><td align="left">é€šè¿‡ç®¡é“ä¼ è¾“<code>&lt;numreq&gt;</code>è¯·æ±‚</td><td align="left">1</td></tr><tr><td align="left">10</td><td align="left"><strong>-q</strong></td><td align="left">å¼ºåˆ¶é€€å‡º redisã€‚ä»…æ˜¾ç¤º query/sec å€¼</td><td align="left"></td></tr><tr><td align="left">11</td><td align="left"><strong>â€“csv</strong></td><td align="left">ä»¥ CSV æ ¼å¼è¾“å‡º</td><td align="left"></td></tr><tr><td align="left">12</td><td align="left"><strong>-l</strong></td><td align="left">ç”Ÿæˆå¾ªç¯ï¼Œæ°¸ä¹…æ‰§è¡Œæµ‹è¯•</td><td align="left"></td></tr><tr><td align="left">13</td><td align="left"><strong>-t</strong></td><td align="left">ä»…è¿è¡Œä»¥é€—å·åˆ†éš”çš„æµ‹è¯•å‘½ä»¤åˆ—è¡¨ã€‚</td><td align="left"></td></tr><tr><td align="left">14</td><td align="left"><strong>-I</strong></td><td align="left">Idle æ¨¡å¼ã€‚ä»…æ‰“å¼€ N ä¸ª idle è¿æ¥å¹¶ç­‰å¾…ã€‚</td><td align="left"></td></tr></tbody></table><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ ./redis-benchmark -h 127.0.0.1 -p 6379 -t set,lpush -n 10000 -q</span><br><span class="line">SET: 104166.66 requests per second</span><br><span class="line">LPUSH: 105263.16 requests per second</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šå®ä¾‹ä¸­ä¸»æœºä¸º 127.0.0.1ï¼Œç«¯å£å·ä¸º 6379ï¼Œæ‰§è¡Œçš„å‘½ä»¤ä¸º set,lpushï¼Œè¯·æ±‚æ•°ä¸º 10000ï¼Œé€šè¿‡ -q å‚æ•°è®©ç»“æœåªæ˜¾ç¤ºæ¯ç§’æ‰§è¡Œçš„è¯·æ±‚æ•°ã€‚</p><h2 id="Redis-å®¢æˆ·ç«¯è¿æ¥"><a href="#Redis-å®¢æˆ·ç«¯è¿æ¥" class="headerlink" title="Redis å®¢æˆ·ç«¯è¿æ¥"></a>Redis å®¢æˆ·ç«¯è¿æ¥</h2><p>Redis é€šè¿‡ç›‘å¬ä¸€ä¸ª TCP ç«¯å£æˆ–è€… Unix socket çš„æ–¹å¼æ¥æ¥æ”¶æ¥è‡ªå®¢æˆ·ç«¯çš„è¿æ¥ï¼Œå½“ä¸€ä¸ªè¿æ¥å»ºç«‹åï¼ŒRedis å†…éƒ¨ä¼šè¿›è¡Œä»¥ä¸‹ä¸€äº›æ“ä½œï¼š</p><ol><li>é¦–å…ˆï¼Œå®¢æˆ·ç«¯ socket ä¼šè¢«è®¾ç½®ä¸ºéé˜»å¡æ¨¡å¼ï¼Œå› ä¸º Redis åœ¨ç½‘ç»œäº‹ä»¶å¤„ç†ä¸Šé‡‡ç”¨çš„æ˜¯éé˜»å¡å¤šè·¯å¤ç”¨æ¨¡å‹ã€‚</li><li>ç„¶åä¸ºè¿™ä¸ª socket è®¾ç½® TCP_NODELAY å±æ€§ï¼Œç¦ç”¨ Nagle ç®—æ³•</li><li>ç„¶ååˆ›å»ºä¸€ä¸ªå¯è¯»çš„æ–‡ä»¶äº‹ä»¶ç”¨äºç›‘å¬è¿™ä¸ªå®¢æˆ·ç«¯ socket çš„æ•°æ®å‘é€</li></ol><p>Socketç¼–ç¨‹ä¸­ï¼ŒTCP_NODELAYé€‰é¡¹æ˜¯ç”¨æ¥æ§åˆ¶æ˜¯å¦å¼€å¯Nagleç®—æ³•ï¼Œè¯¥ç®—æ³•æ˜¯ä¸ºäº†æé«˜è¾ƒæ…¢çš„å¹¿åŸŸç½‘ä¼ è¾“æ•ˆç‡ï¼Œå‡å°å°åˆ†ç»„çš„æŠ¥æ–‡ä¸ªæ•°ï¼Œå®Œæ•´æè¿°ï¼š</p><blockquote><p>è¯¥ç®—æ³•è¦æ±‚ä¸€ä¸ªTCPè¿æ¥ä¸Šæœ€å¤šåªèƒ½æœ‰ä¸€ä¸ªæœªè¢«ç¡®è®¤çš„å°åˆ†ç»„ï¼Œåœ¨è¯¥å°åˆ†ç»„çš„ç¡®è®¤åˆ°æ¥ä¹‹å‰ï¼Œä¸èƒ½å‘é€å…¶ä»–å°åˆ†ç»„ã€‚</p></blockquote><h3 id="æœ€å¤§è¿æ¥æ•°"><a href="#æœ€å¤§è¿æ¥æ•°" class="headerlink" title="æœ€å¤§è¿æ¥æ•°"></a>æœ€å¤§è¿æ¥æ•°</h3><p>åœ¨ Redis2.4 ä¸­ï¼Œæœ€å¤§è¿æ¥æ•°æ˜¯è¢«ç›´æ¥ç¡¬ç¼–ç åœ¨ä»£ç é‡Œé¢çš„ï¼Œè€Œåœ¨2.6ç‰ˆæœ¬ä¸­è¿™ä¸ªå€¼å˜æˆå¯é…ç½®çš„ã€‚</p><p>maxclients çš„é»˜è®¤å€¼æ˜¯ 10000ï¼Œä½ ä¹Ÿå¯ä»¥åœ¨ redis.conf ä¸­å¯¹è¿™ä¸ªå€¼è¿›è¡Œä¿®æ”¹ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; config get maxclients</span><br><span class="line">1) "maxclients"</span><br><span class="line">2) "10000"</span><br><span class="line">127.0.0.1:6379&gt;</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> ./redis-server --maxclients 100000 <span class="comment"># åœ¨æœåŠ¡å¯åŠ¨æ—¶è®¾ç½®æœ€å¤§è¿æ¥æ•°ä¸º 100000</span></span></span><br></pre></td></tr></table></figure><h3 id="å®¢æˆ·ç«¯å‘½ä»¤"><a href="#å®¢æˆ·ç«¯å‘½ä»¤" class="headerlink" title="å®¢æˆ·ç«¯å‘½ä»¤"></a>å®¢æˆ·ç«¯å‘½ä»¤</h3><table><thead><tr><th align="left">åºå·</th><th align="left">å‘½ä»¤</th><th align="left">æè¿°</th><th>å¯ç”¨ç‰ˆæœ¬</th><th>æ—¶é—´å¤æ‚åº¦</th></tr></thead><tbody><tr><td align="left">1</td><td align="left"><strong>client list</strong></td><td align="left">ä»¥äººç±»å¯è¯»çš„æ ¼å¼ï¼Œè¿”å›æ‰€æœ‰è¿æ¥åˆ°æœåŠ¡å™¨çš„å®¢æˆ·ç«¯ä¿¡æ¯å’Œç»Ÿè®¡æ•°æ®ã€‚è¿”å›çš„ä¿¡æ¯å«ä¹‰å‚è§</td><td>&gt;=2.4.0</td><td>O(N)ï¼Œ N ä¸ºè¿æ¥åˆ°æœåŠ¡å™¨çš„å®¢æˆ·ç«¯æ•°é‡ã€‚</td></tr><tr><td align="left">2</td><td align="left"><strong>client setname</strong></td><td align="left">1. ä¸ºå½“å‰è¿æ¥åˆ†é…ä¸€ä¸ªåå­—ã€‚è¿™ä¸ªåå­—ä¼šæ˜¾ç¤ºåœ¨<code>client list</code>å‘½ä»¤çš„ç»“æœä¸­ï¼Œ ç”¨äºè¯†åˆ«å½“å‰æ­£åœ¨ä¸æœåŠ¡å™¨è¿›è¡Œè¿æ¥çš„å®¢æˆ·ç«¯ã€‚è·å–é€šè¿‡<code>client setname</code> å‘½ä»¤è®¾ç½®çš„æœåŠ¡åç§°ã€‚<br>2. åå­—ä½¿ç”¨ Redis çš„å­—ç¬¦ä¸²ç±»å‹æ¥ä¿å­˜ï¼Œ æœ€å¤§å¯ä»¥å ç”¨ 512 MB ã€‚<br>3. å¦å¤–ï¼Œ ä¸ºäº†é¿å…å’Œ<code>client list</code>å‘½ä»¤çš„è¾“å‡ºæ ¼å¼å‘ç”Ÿå†²çªï¼Œ åå­—é‡Œä¸å…è®¸ä½¿ç”¨ç©ºæ ¼ã€‚<br>4. è¦ç§»é™¤ä¸€ä¸ªè¿æ¥çš„åå­—ï¼Œ å¯ä»¥å°†è¿æ¥çš„åå­—è®¾ä¸ºç©ºå­—ç¬¦ä¸² <code>&quot;&quot;</code> ã€‚<br>5. æ–°åˆ›å»ºçš„è¿æ¥é»˜è®¤æ˜¯æ²¡æœ‰åå­—çš„ã€‚åœ¨ Redis åº”ç”¨ç¨‹åºå‘ç”Ÿè¿æ¥æ³„æ¼æ—¶ï¼Œä¸ºè¿æ¥è®¾ç½®åå­—æ˜¯ä¸€ç§å¾ˆå¥½çš„ debug æ‰‹æ®µã€‚</td><td>&gt;=2.6.9</td><td>O(1)</td></tr><tr><td align="left">3</td><td align="left"><strong>client getname</strong></td><td align="left">è¿”å›<code>client getname</code>å‘½ä»¤ä¸ºè¿æ¥è®¾ç½®çš„åå­—ã€‚å› ä¸ºæ–°åˆ›å»ºçš„è¿æ¥é»˜è®¤æ˜¯æ²¡æœ‰åå­—çš„ï¼Œ å¯¹äºæ²¡æœ‰åå­—çš„è¿æ¥ï¼Œ <code>client getname</code>è¿”å›ç©ºç™½å›å¤ã€‚</td><td>&gt;=2.6.9</td><td>O(1)</td></tr><tr><td align="left">4</td><td align="left"><strong>client pause</strong></td><td align="left">æŒ‚èµ·å®¢æˆ·ç«¯è¿æ¥ï¼ŒæŒ‡å®šæŒ‚èµ·çš„æ—¶é—´ä»¥æ¯«ç§’è®¡</td><td>&gt;=2.9.5</td><td>O(1)</td></tr><tr><td align="left">5</td><td align="left"><strong>client kill</strong></td><td align="left">å½“æŒ‡å®šçš„å®¢æˆ·ç«¯å­˜åœ¨ï¼Œä¸”è¢«æˆåŠŸå…³é—­æ—¶ï¼Œè¿”å› OK ã€‚å…³é—­åœ°å€ä¸º <code>ip:port</code> çš„å®¢æˆ·ç«¯ã€‚<code>ip:port</code> åº”è¯¥å’Œ<code>client-list)</code>å‘½ä»¤è¾“å‡ºçš„å…¶ä¸­ä¸€è¡ŒåŒ¹é…ã€‚å› ä¸º Redis ä½¿ç”¨å•çº¿ç¨‹è®¾è®¡ï¼Œæ‰€ä»¥å½“ Redis æ­£åœ¨æ‰§è¡Œå‘½ä»¤çš„æ—¶å€™ï¼Œä¸ä¼šæœ‰å®¢æˆ·ç«¯è¢«æ–­å¼€è¿æ¥ã€‚</td><td>&gt;=2.4.0</td><td>O(N) ï¼Œ N ä¸ºå·²è¿æ¥çš„å®¢æˆ·ç«¯æ•°é‡ã€‚</td></tr><tr><td align="left">6</td><td align="left"><strong>client id</strong></td><td align="left">è¿”å›å½“å‰è¿æ¥çš„id</td><td>&gt;=5.0.0</td><td>O(1)</td></tr></tbody></table><h4 id="å®ä¾‹-3"><a href="#å®ä¾‹-3" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; client getname</span><br><span class="line">(nil)</span><br><span class="line">127.0.0.1:6379&gt; client setname freya-connection</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; client getname</span><br><span class="line">"freya-connection"</span><br><span class="line">127.0.0.1:6379&gt; client list</span><br><span class="line">id=7 addr=127.0.0.1:56661 fd=8 name= age=265815 idle=261969 flags=P db=0 sub=1 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=subscribe</span><br><span class="line">id=1012 addr=127.0.0.1:51537 fd=9 name=freya-connection age=647 idle=0 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=26 qbuf-free=32742 obl=0 oll=0 omem=0 events=r cmd=client</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; client setname    # åªç”¨ç©ºæ ¼æ˜¯ä¸è¡Œçš„ï¼</span><br><span class="line">(error) ERR Unknown subcommand or wrong number of arguments for 'setname'. Try CLIENT HELP</span><br><span class="line">127.0.0.1:6379&gt; client setname ""  # å¿…é¡»åŒå¼•å·æ˜¾ç¤ºåŒ…å›´</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; client getname</span><br><span class="line">(nil)</span><br><span class="line">127.0.0.1:6379&gt; client list</span><br><span class="line">id=7 addr=127.0.0.1:56661 fd=8 name= age=265951 idle=262105 flags=P db=0 sub=1 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=subscribe</span><br><span class="line">id=1012 addr=127.0.0.1:51537 fd=9 name= age=783 idle=0 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=26 qbuf-free=32742 obl=0 oll=0 omem=0 events=r cmd=client</span><br><span class="line">127.0.0.1:6379&gt;</span><br></pre></td></tr></table></figure><h4 id="Redis-client-list-å‘½ä»¤è¿”å›å€¼"><a href="#Redis-client-list-å‘½ä»¤è¿”å›å€¼" class="headerlink" title="Redis client list å‘½ä»¤è¿”å›å€¼"></a>Redis <code>client list</code> å‘½ä»¤è¿”å›å€¼</h4><p>å‘½ä»¤è¿”å›å¤šè¡Œå­—ç¬¦ä¸²ï¼Œè¿™äº›å­—ç¬¦ä¸²æŒ‰ä»¥ä¸‹å½¢å¼è¢«æ ¼å¼åŒ–ï¼š</p><ol><li>æ¯ä¸ªå·²è¿æ¥å®¢æˆ·ç«¯å¯¹åº”ä¸€è¡Œï¼ˆä»¥ LF åˆ†å‰²ï¼‰</li><li>æ¯è¡Œå­—ç¬¦ä¸²ç”±ä¸€ç³»åˆ— <strong>å±æ€§=å€¼</strong> å½¢å¼çš„åŸŸç»„æˆï¼Œæ¯ä¸ªåŸŸä¹‹é—´ä»¥ç©ºæ ¼åˆ†å¼€</li></ol><p>ä»¥ä¸‹æ˜¯åŸŸçš„å«ä¹‰ï¼š</p><table><thead><tr><th>åŸŸ</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td><code>addr</code></td><td>å®¢æˆ·ç«¯çš„åœ°å€å’Œç«¯å£</td></tr><tr><td><code>fd</code></td><td>å¥—æ¥å­—æ‰€ä½¿ç”¨çš„æ–‡ä»¶æè¿°ç¬¦</td></tr><tr><td><code>age</code></td><td>ä»¥ç§’è®¡ç®—çš„å·²è¿æ¥æ—¶é•¿</td></tr><tr><td><code>idle</code></td><td>ä»¥ç§’è®¡ç®—çš„ç©ºé—²æ—¶é•¿</td></tr><tr><td><code>flags</code></td><td>å®¢æˆ·ç«¯flag(è§ä¸‹è¡¨)</td></tr><tr><td><code>db</code></td><td>è¯¥å®¢æˆ·ç«¯æ­£åœ¨ä½¿ç”¨çš„æ•°æ®åº“ID</td></tr><tr><td><code>sub</code></td><td>å·²è®¢é˜…é¢‘é“çš„æ•°é‡</td></tr><tr><td><code>psub</code></td><td>å·²è®¢é˜…æ¨¡å¼çš„æ•°é‡</td></tr><tr><td><code>multi</code></td><td>åœ¨äº‹åŠ¡ä¸­è¢«æ‰§è¡Œçš„å‘½ä»¤æ•°é‡</td></tr><tr><td><code>qbuf</code></td><td>æŸ¥è¯¢ç¼“å­˜çš„é•¿åº¦(0 è¡¨ç¤ºæ²¡æœ‰æŸ¥è¯¢åœ¨ç­‰å¾…)</td></tr><tr><td><code>qbuf-free</code></td><td>æŸ¥è¯¢ç¼“å­˜çš„å‰©ä½™ç©ºé—´(0 è¡¨ç¤ºæ²¡æœ‰å‰©ä½™ç©ºé—´)</td></tr><tr><td><code>obl</code></td><td>è¾“å‡ºç¼“å­˜çš„é•¿åº¦</td></tr><tr><td><code>oll</code></td><td>è¾“å‡ºåˆ—è¡¨çš„é•¿åº¦(å½“è¾“å‡ºç¼“å­˜æ²¡æœ‰å‰©ä½™ç©ºé—´æ—¶ï¼Œå›å¤è¢«å…¥é˜Ÿåˆ°è¿™ä¸ªé˜Ÿåˆ—é‡Œ)</td></tr><tr><td><code>omem</code></td><td>è¾“å‡ºç¼“å­˜çš„å†…å­˜å ç”¨é‡</td></tr><tr><td><code>events</code></td><td>æ–‡ä»¶æè¿°ç¬¦äº‹ä»¶(è§ä¸‹æ–‡)</td></tr><tr><td><code>cmd</code></td><td>æœ€è¿‘ä¸€æ¬¡æ‰§è¡Œçš„å‘½ä»¤</td></tr></tbody></table><p>å®¢æˆ·ç«¯ flag å¯ä»¥ç”±ä»¥ä¸‹éƒ¨åˆ†ç»„æˆï¼š</p><table><thead><tr><th>åŸŸ</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td><code>O</code></td><td>å®¢æˆ·ç«¯æ˜¯ monitor æ¨¡å¼ä¸‹çš„é™„å±èŠ‚ç‚¹ (slave)</td></tr><tr><td><code>S</code></td><td>å®¢æˆ·ç«¯æ˜¯ä¸€èˆ¬æ¨¡å¼ä¸‹ (normal) çš„é™„å±èŠ‚ç‚¹</td></tr><tr><td><code>M</code></td><td>å®¢æˆ·ç«¯æ˜¯ä¸»èŠ‚ç‚¹ (master)</td></tr><tr><td><code>x</code></td><td>å°å†™<code>x</code>ï¼Œå®¢æˆ·ç«¯æ­£åœ¨æ‰§è¡Œäº‹åŠ¡</td></tr><tr><td><code>b</code></td><td>å®¢æˆ·ç«¯æ­£åœ¨ç­‰å¾…é˜»å¡äº‹ä»¶</td></tr><tr><td><code>i</code></td><td>å®¢æˆ·ç«¯æ­£åœ¨ç­‰å¾… VM I/O æ“ä½œ (å·²åºŸå¼ƒ)</td></tr><tr><td><code>d</code></td><td>ä¸€ä¸ªå—ç›‘æ§ (watched) çš„é”®å·²è¢«ä¿®æ”¹ï¼Œ <code>exec</code>å‘½ä»¤å°†å¤±è´¥</td></tr><tr><td><code>c</code></td><td>åœ¨å°†å›å¤å®Œæ•´å†™å‡ºæ¥ä¹‹åï¼Œå…³é—­è¿æ¥</td></tr><tr><td><code>u</code></td><td>å®¢æˆ·ç«¯æœªè¢«é˜»å¡ (unblocked)</td></tr><tr><td><code>A</code></td><td>å°½å¯èƒ½å¿«åœ°å…³é—­è¿æ¥</td></tr><tr><td><code>N</code></td><td>æœªè®¾ç½®ä»»ä½• flag</td></tr></tbody></table><p>æ–‡ä»¶æè¿°ç¬¦äº‹ä»¶</p><table><thead><tr><th>æ–‡ä»¶æè¿°ç¬¦äº‹ä»¶</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td><code>r</code></td><td>å®¢æˆ·ç«¯å¥—æ¥å­—ï¼ˆåœ¨äº‹ä»¶ loop ä¸­ï¼‰æ˜¯å¯è¯»çš„ï¼ˆreadableï¼‰</td></tr><tr><td><code>w</code></td><td>å®¢æˆ·ç«¯å¥—æ¥å­—ï¼ˆåœ¨äº‹ä»¶ loop ä¸­ï¼‰æ˜¯å¯å†™çš„ï¼ˆwriteableï¼‰</td></tr></tbody></table><h4 id="æ³¨æ„"><a href="#æ³¨æ„" class="headerlink" title="æ³¨æ„"></a>æ³¨æ„</h4><p>ä¸ºäº† debug çš„éœ€è¦ï¼Œç»å¸¸ä¼šå¯¹åŸŸè¿›è¡Œæ·»åŠ å’Œåˆ é™¤ï¼Œä¸€ä¸ªå®‰å…¨çš„ Redis å®¢æˆ·ç«¯åº”è¯¥å¯ä»¥å¯¹ CLIENT LIST çš„è¾“å‡ºè¿›è¡Œç›¸åº”çš„å¤„ç†ï¼ˆparseï¼‰ï¼Œæ¯”å¦‚å¿½ç•¥ä¸å­˜åœ¨çš„åŸŸï¼Œè·³è¿‡æœªçŸ¥åŸŸï¼Œè¯¸å¦‚æ­¤ç±»ã€‚</p><h4 id="å®ä¾‹-4"><a href="#å®ä¾‹-4" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; client list</span><br><span class="line">id=7 addr=127.0.0.1:56661 fd=8 name= age=150289 idle=146443 flags=P db=0 sub=1 psub=0 multi=-1 qbuf=0 qbuf-free=0 obl=0 oll=0 omem=0 events=r cmd=subscribe</span><br><span class="line">id=10 addr=127.0.0.1:64043 fd=9 name= age=525 idle=0 flags=N db=0 sub=0 psub=0 multi=-1 qbuf=26 qbuf-free=32742 obl=0 oll=0 omem=0 events=r cmd=client</span><br></pre></td></tr></table></figure><h2 id="Redis-ç®¡é“æŠ€æœ¯"><a href="#Redis-ç®¡é“æŠ€æœ¯" class="headerlink" title="Redis ç®¡é“æŠ€æœ¯"></a>Redis ç®¡é“æŠ€æœ¯</h2><p>Redisæ˜¯ä¸€ç§åŸºäºå®¢æˆ·ç«¯-æœåŠ¡ç«¯æ¨¡å‹ä»¥åŠè¯·æ±‚/å“åº”åè®®çš„TCPæœåŠ¡ã€‚è¿™æ„å‘³ç€é€šå¸¸æƒ…å†µä¸‹ä¸€ä¸ªè¯·æ±‚ä¼šéµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š</p><ol><li>å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘é€ä¸€ä¸ªæŸ¥è¯¢è¯·æ±‚ï¼Œå¹¶ç›‘å¬Socketè¿”å›ï¼Œé€šå¸¸æ˜¯ä»¥é˜»å¡æ¨¡å¼ï¼Œç­‰å¾…æœåŠ¡ç«¯å“åº”ã€‚</li><li>æœåŠ¡ç«¯å¤„ç†å‘½ä»¤ï¼Œå¹¶å°†ç»“æœè¿”å›ç»™å®¢æˆ·ç«¯ã€‚</li></ol><p>Redis ç®¡é“æŠ€æœ¯å¯ä»¥åœ¨æœåŠ¡ç«¯æœªå“åº”æ—¶ï¼Œå®¢æˆ·ç«¯å¯ä»¥ç»§ç»­å‘æœåŠ¡ç«¯å‘é€è¯·æ±‚ï¼Œå¹¶æœ€ç»ˆä¸€æ¬¡æ€§è¯»å–æ‰€æœ‰æœåŠ¡ç«¯çš„å“åº”ã€‚</p><h3 id="å®ä¾‹-5"><a href="#å®ä¾‹-5" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ (echo -en &quot;auth pwd\r\n PING\r\n SET freya redis\r\nGET freya\r\nINCR visitor\r\nINCR visitor\r\nINCR visitor\r\n&quot;; sleep 10) | nc localhost 6379</span><br><span class="line">+OK</span><br><span class="line">+PONG</span><br><span class="line">+OK</span><br><span class="line">$5</span><br><span class="line">redis</span><br><span class="line">:1</span><br><span class="line">:2</span><br><span class="line">:3</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šå‘½ä»¤é‡‡ç”¨<code>auth pwd</code>æˆæƒï¼Œé‡‡ç”¨<code>PING</code>å‘½ä»¤æŸ¥çœ‹redisæœåŠ¡æ˜¯å¦å¯ç”¨ï¼Œ ä¹‹åæˆ‘ä»¬è®¾ç½®äº† freya çš„å€¼ä¸º redisï¼Œç„¶åæˆ‘ä»¬è·å– freya çš„å€¼å¹¶ä½¿å¾— visitor è‡ªå¢ 3 æ¬¡ã€‚</p><h3 id="ç®¡é“æŠ€æœ¯çš„ä¼˜åŠ¿"><a href="#ç®¡é“æŠ€æœ¯çš„ä¼˜åŠ¿" class="headerlink" title="ç®¡é“æŠ€æœ¯çš„ä¼˜åŠ¿"></a>ç®¡é“æŠ€æœ¯çš„ä¼˜åŠ¿</h3><p>ç®¡é“æŠ€æœ¯æœ€æ˜¾è‘—çš„ä¼˜åŠ¿æ˜¯æé«˜äº† redis æœåŠ¡çš„æ€§èƒ½ã€‚</p><h2 id="Redis-åˆ†åŒº"><a href="#Redis-åˆ†åŒº" class="headerlink" title="Redis åˆ†åŒº"></a>Redis åˆ†åŒº</h2><p>åˆ†åŒºæ˜¯åˆ†å‰²æ•°æ®åˆ°å¤šä¸ªRediså®ä¾‹çš„å¤„ç†è¿‡ç¨‹ï¼Œå› æ­¤æ¯ä¸ªå®ä¾‹åªä¿å­˜keyçš„ä¸€ä¸ªå­é›†ã€‚</p><h3 id="åˆ†åŒºçš„ä¼˜åŠ¿"><a href="#åˆ†åŒºçš„ä¼˜åŠ¿" class="headerlink" title="åˆ†åŒºçš„ä¼˜åŠ¿"></a>åˆ†åŒºçš„ä¼˜åŠ¿</h3><ol><li>é€šè¿‡åˆ©ç”¨å¤šå°è®¡ç®—æœºå†…å­˜çš„å’Œå€¼ï¼Œå…è®¸æˆ‘ä»¬æ„é€ æ›´å¤§çš„æ•°æ®åº“ã€‚</li><li>é€šè¿‡å¤šæ ¸å’Œå¤šå°è®¡ç®—æœºï¼Œå…è®¸æˆ‘ä»¬æ‰©å±•è®¡ç®—èƒ½åŠ›ï¼›é€šè¿‡å¤šå°è®¡ç®—æœºå’Œç½‘ç»œé€‚é…å™¨ï¼Œå…è®¸æˆ‘ä»¬æ‰©å±•ç½‘ç»œå¸¦å®½ã€‚<h3 id="åˆ†åŒºçš„ä¸è¶³"><a href="#åˆ†åŒºçš„ä¸è¶³" class="headerlink" title="åˆ†åŒºçš„ä¸è¶³"></a>åˆ†åŒºçš„ä¸è¶³</h3></li><li>æ¶‰åŠå¤šä¸ªkeyçš„æ“ä½œé€šå¸¸æ˜¯ä¸è¢«æ”¯æŒçš„ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œå½“ä¸¤ä¸ªsetæ˜ å°„åˆ°ä¸åŒçš„rediså®ä¾‹ä¸Šæ—¶ï¼Œä½ å°±ä¸èƒ½å¯¹è¿™ä¸¤ä¸ªsetæ‰§è¡Œäº¤é›†æ“ä½œã€‚</li><li>æ¶‰åŠå¤šä¸ªkeyçš„redisäº‹åŠ¡ä¸èƒ½ä½¿ç”¨ã€‚</li><li>å½“ä½¿ç”¨åˆ†åŒºæ—¶ï¼Œæ•°æ®å¤„ç†è¾ƒä¸ºå¤æ‚ï¼Œæ¯”å¦‚ä½ éœ€è¦å¤„ç†å¤šä¸ªrdb/aofæ–‡ä»¶ï¼Œå¹¶ä¸”ä»å¤šä¸ªå®ä¾‹å’Œä¸»æœºå¤‡ä»½æŒä¹…åŒ–æ–‡ä»¶ã€‚</li><li>å¢åŠ æˆ–åˆ é™¤å®¹é‡ä¹Ÿæ¯”è¾ƒå¤æ‚ã€‚redisé›†ç¾¤å¤§å¤šæ•°æ”¯æŒåœ¨è¿è¡Œæ—¶å¢åŠ ã€åˆ é™¤èŠ‚ç‚¹çš„é€æ˜æ•°æ®å¹³è¡¡çš„èƒ½åŠ›ï¼Œä½†æ˜¯ç±»ä¼¼äºå®¢æˆ·ç«¯åˆ†åŒºã€ä»£ç†ç­‰å…¶ä»–ç³»ç»Ÿåˆ™ä¸æ”¯æŒè¿™é¡¹ç‰¹æ€§ã€‚ç„¶è€Œï¼Œä¸€ç§å«åšpreshardingçš„æŠ€æœ¯å¯¹æ­¤æ˜¯æœ‰å¸®åŠ©çš„ã€‚</li></ol><h3 id="åˆ†åŒºç±»å‹"><a href="#åˆ†åŒºç±»å‹" class="headerlink" title="åˆ†åŒºç±»å‹"></a>åˆ†åŒºç±»å‹</h3><p>Redis æœ‰ä¸¤ç§ç±»å‹åˆ†åŒºã€‚ å‡è®¾æœ‰4ä¸ªRediså®ä¾‹ R0ï¼ŒR1ï¼ŒR2ï¼ŒR3ï¼Œå’Œç±»ä¼¼user:1ï¼Œuser:2è¿™æ ·çš„è¡¨ç¤ºç”¨æˆ·çš„å¤šä¸ªkeyï¼Œå¯¹æ—¢å®šçš„keyæœ‰å¤šç§ä¸åŒæ–¹å¼æ¥é€‰æ‹©è¿™ä¸ªkeyå­˜æ”¾åœ¨å“ªä¸ªå®ä¾‹ä¸­ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæœ‰ä¸åŒçš„ç³»ç»Ÿæ¥æ˜ å°„æŸä¸ªkeyåˆ°æŸä¸ªRedisæœåŠ¡ã€‚</p><h4 id="èŒƒå›´åˆ†åŒº"><a href="#èŒƒå›´åˆ†åŒº" class="headerlink" title="èŒƒå›´åˆ†åŒº"></a>èŒƒå›´åˆ†åŒº</h4><p>æœ€ç®€å•çš„åˆ†åŒºæ–¹å¼æ˜¯æŒ‰èŒƒå›´åˆ†åŒºï¼Œå°±æ˜¯æ˜ å°„ä¸€å®šèŒƒå›´çš„å¯¹è±¡åˆ°ç‰¹å®šçš„Rediså®ä¾‹ã€‚<br>æ¯”å¦‚ï¼ŒIDä»0åˆ°10000çš„ç”¨æˆ·ä¼šä¿å­˜åˆ°å®ä¾‹R0ï¼ŒIDä»10001åˆ° 20000çš„ç”¨æˆ·ä¼šä¿å­˜åˆ°R1ï¼Œä»¥æ­¤ç±»æ¨ã€‚<br>è¿™ç§æ–¹å¼æ˜¯å¯è¡Œçš„ï¼Œå¹¶ä¸”åœ¨å®é™…ä¸­ä½¿ç”¨ï¼Œä¸è¶³å°±æ˜¯è¦æœ‰ä¸€ä¸ªåŒºé—´èŒƒå›´åˆ°å®ä¾‹çš„æ˜ å°„è¡¨ã€‚è¿™ä¸ªè¡¨è¦è¢«ç®¡ç†ï¼ŒåŒæ—¶è¿˜éœ€è¦å„ç§å¯¹è±¡çš„æ˜ å°„è¡¨ï¼Œé€šå¸¸å¯¹Redisæ¥è¯´å¹¶éæ˜¯å¥½çš„æ–¹æ³•ã€‚</p><h4 id="å“ˆå¸Œåˆ†åŒº"><a href="#å“ˆå¸Œåˆ†åŒº" class="headerlink" title="å“ˆå¸Œåˆ†åŒº"></a>å“ˆå¸Œåˆ†åŒº</h4><p>å¦å¤–ä¸€ç§åˆ†åŒºæ–¹æ³•æ˜¯hashåˆ†åŒºã€‚è¿™å¯¹ä»»ä½•keyéƒ½é€‚ç”¨ï¼Œä¹Ÿæ— éœ€æ˜¯object_name:è¿™ç§å½¢å¼ï¼Œåƒä¸‹é¢æè¿°çš„ä¸€æ ·ç®€å•ï¼š</p><ol><li>ç”¨ä¸€ä¸ªhashå‡½æ•°å°†keyè½¬æ¢ä¸ºä¸€ä¸ªæ•°å­—ï¼Œæ¯”å¦‚ä½¿ç”¨crc32 hashå‡½æ•°ã€‚å¯¹key foobaræ‰§è¡Œcrc32(foobar)ä¼šè¾“å‡ºç±»ä¼¼93024922çš„æ•´æ•°ã€‚</li><li>å¯¹è¿™ä¸ªæ•´æ•°å–æ¨¡ï¼Œå°†å…¶è½¬åŒ–ä¸º0-3ä¹‹é—´çš„æ•°å­—ï¼Œå°±å¯ä»¥å°†è¿™ä¸ªæ•´æ•°æ˜ å°„åˆ°4ä¸ªRediså®ä¾‹ä¸­çš„ä¸€ä¸ªäº†ã€‚93024922 % 4 = 2ï¼Œå°±æ˜¯è¯´key foobaråº”è¯¥è¢«å­˜åˆ°R2å®ä¾‹ä¸­ã€‚æ³¨æ„ï¼šå–æ¨¡æ“ä½œæ˜¯å–é™¤çš„ä½™æ•°ï¼Œé€šå¸¸åœ¨å¤šç§ç¼–ç¨‹è¯­è¨€ä¸­ç”¨%æ“ä½œç¬¦å®ç°ã€‚</li></ol><h2 id="Java-ä½¿ç”¨-Redis"><a href="#Java-ä½¿ç”¨-Redis" class="headerlink" title="Java ä½¿ç”¨ Redis"></a>Java ä½¿ç”¨ Redis</h2><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><p>å¼€å§‹åœ¨ Java ä¸­ä½¿ç”¨ Redis å‰ï¼Œ æˆ‘ä»¬éœ€è¦ç¡®ä¿å·²ç»å®‰è£…äº† redis æœåŠ¡åŠ Java redis é©±åŠ¨ï¼Œä¸”ä½ çš„æœºå™¨ä¸Šèƒ½æ­£å¸¸ä½¿ç”¨ Javaã€‚</p><h3 id="è¿æ¥åˆ°-redis-æœåŠ¡"><a href="#è¿æ¥åˆ°-redis-æœåŠ¡" class="headerlink" title="è¿æ¥åˆ° redis æœåŠ¡"></a>è¿æ¥åˆ° redis æœåŠ¡</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">import redis.clients.jedis.Jedis;</span><br><span class="line"></span><br><span class="line">public class RedisTest &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        // è¿æ¥æœ¬åœ°çš„ Redis æœåŠ¡</span><br><span class="line">        Jedis jedis = new Jedis(&quot;localhost&quot;)ï¼›</span><br><span class="line"> Â  Â  Â  Â //éªŒè¯å¯†ç </span><br><span class="line"> Â  Â  Â  Â jedis.auth(&quot;redis&quot;);</span><br><span class="line">        // æŸ¥çœ‹æœåŠ¡æ˜¯å¦è¿è¡Œ</span><br><span class="line">        System.out.println(&quot;æœåŠ¡æ­£åœ¨è¿è¡Œ: &quot; + jedis.ping());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Redis-æ•°æ®å¤‡ä»½ä¸æ¢å¤&quot;&gt;&lt;a href=&quot;#Redis-æ•°æ®å¤‡ä»½ä¸æ¢å¤&quot; class=&quot;headerlink&quot; title=&quot;Redis æ•°æ®å¤‡ä»½ä¸æ¢å¤&quot;&gt;&lt;/a&gt;Redis æ•°æ®å¤‡ä»½ä¸æ¢å¤&lt;/h2&gt;&lt;h3 id=&quot;æ•°æ®å¤‡ä»½&quot;&gt;&lt;a href=&quot;#æ•°æ®å¤‡ä»½&quot;
      
    
    </summary>
    
      <category term="Redis" scheme="https://muhouer.github.io/categories/Redis/"/>
    
      <category term="å­¦ä¹ ç¬”è®°" scheme="https://muhouer.github.io/categories/Redis/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="è¿›é˜¶æ•™ç¨‹" scheme="https://muhouer.github.io/tags/%E8%BF%9B%E9%98%B6%E6%95%99%E7%A8%8B/"/>
    
  </entry>
  
</feed>
